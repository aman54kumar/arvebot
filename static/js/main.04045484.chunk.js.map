{"version":3,"sources":["Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/ChatStepTypes.ts","Components/Generic/Header/HeaderTitle/HeaderTitle.tsx","Components/Generic/Header/HeaderMenu/MenuLink/MenuLink.tsx","Components/Generic/Header/HeaderMenu/NavLinks.ts","Components/Generic/Header/HeaderMenu/HeaderMenu.tsx","Components/Generic/Header/Header.tsx","Components/HomeComponents/HomeDetail/HomeDetail.tsx","Pages/HomePage.tsx","Pages/AboutPage.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/services/ChatbotCommunicator.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/OptionSelector/OptionSelector.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/InfoMessagesWidget/InfoMessagesWidget.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/RearChildrenOptionSelector/RearChildrenOptionSelector.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/UndividedEstateWidget/UndividedEstateWidget.tsx","Components/InheritanceCalculatorComponents/OtherComponent/ChatHeader/ChatHeader.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/ParentChildSelector.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Classes/NodeEntity.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Generics.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/ValidationType.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Config.js","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/BinaryAnswerTypes.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/ChatbotValidation.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/MessageParser.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/ShowInfoWidget/ShowInfoWidget.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/QuestionConstants.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/InheritanceConstants.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Classes/Person.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Classes/Family.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/HandleCurrency.tsx","Components/InheritanceCalculatorComponents/Reports/ReportUtils.ts","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ProcessDataForChart.tsx","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/CustomNode.tsx","Components/InheritanceCalculatorComponents/Reports/InheritanceCalculation.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProvider.tsx","store/chartSelector.js","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/ChartNode.ts","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/ChartConnector.ts","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/Bubble.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/services/ComponentCommunicatorService.tsx","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ChartComponent.tsx","assets/images/chat_button_logo.svg","Pages/InheritanceCalculatorPage.js","Components/Generic/Footer/Footer.tsx","Pages/ResourcesPage.tsx","store/genericReducer.js","store/store.js","App.tsx","index.tsx"],"names":["ChatStepTypes","QuestionType","useStyles","makeStyles","root","fontFamily","color","HeaderTitle","classes","Typography","variant","className","noWrap","fontSize","padding","textDecoration","textAlign","backgroundColor","fontWeight","rootActive","MenuLink","props","to","href","exact","activeClassName","name","navLinks","id","title","path","HeaderMenu","Grid","container","direction","justifyContent","alignItems","NavLinks","map","item","header","height","paddingLeft","drawerContainer","menuIconRoot","Header","useState","mobileView","drawerOpen","state","setState","useEffect","setResponsiveness","window","innerWidth","prevState","addEventListener","AppBar","Toolbar","IconButton","edge","onClick","size","Drawer","anchor","open","onClose","Link","component","RouterLink","style","key","MenuItem","sm","highLightText","HomeDetail","Box","align","typeSpeed","strings","HomePage","AboutPage","inSubject","Subject","outSubject","internalSubscriptionList","Array","externalSubscriptionList","previousStates","messageService","message","next","asObservable","subscription","push","data","stateCopy","_","cloneDeep","filter","previousState","Object","entries","length","pop","reverseCount","forEach","unsubscribe","handleOptions","option","actionProvider","hideWarning","curStep","stepID","yesNoClickedFlag","testatorStep","handleUndividedEstateChoice","undividedEstateStep","successor_flag","part2","handleChildAliveOption","parent_flag","handleParentAliveOption","part3","handleSecondParentExists","underAgeStep","handleUnderAge","spouseChoice","handleSpouseChoice","cohabitantChoice","handleCohabitantChoice","successorStep","parentsStep","marriedParentsStep","handleMarriedParents","grandParentStep","finalStep","handleFinalQuestion","console","log","warningDiv","document","getElementById","display","OptionSelector","setOption","e","InfoMessagesWidget","PropTypes","string","label","sx","RearChildrenOptionSelector","a","rearChildren","handleRearChildrenOptionWidget","UndividedEstateWidget","handleOwnershipResponse","onClickHandler","thisButton","target","currentParent","parentElement","hasChildNodes","values","childNodes","childEl","pointerEvents","disabled","background","ChatHeader","setOpen","handleCloseNo","restartBot","resetChatbot","flexGrow","position","Button","RestartAlt","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","ParentChildSelector","NodeEntity","level","_id","_level","_path","_parents","_children","_spouse","_cohabitant","_undividedEstateSpouse","_relationshipMap","_childCount","_processChildNodePos","_getRelationshipMap","Map","add_child","child","add_for_both","children_array","child_id","find","obj","getLevel","add_parent","parent","parents_array","parent_id","grandParent","getLatestPathKey","Error","x","setPathforPartner","partnerSelector","partner","has_surviving_spouse","has_surviving_cohabitant","this","prevPath","nodeMap","currId","currNode","getNode","includes","parentCount","i","node","get","undefined","ValidationType","DefaultWarningMessage","ChatbotState","initalStep","person","testator","caseName","netWealth","initialQuestion","temp_person","temp_child","temp_parent","personsMap","deceasedParentsArray","grandParent_flag","rearChildrenResponse","undividedEstate","undividedEstateChoice","undivided_flag","totalEstateValue","undividedEstateSeparateWealth","temp_first","temp_last","tempMessages","successorProcessArray","isUndividedParent","InitialChatbotState","messages","cache","createIntlCache","value","createIntl","locale","Norsk","formatMessage","config","botName","lang","customStyles","botMessageBox","chatButton","initialMessages","createChatBotMessage","customComponents","widgets","widgetName","widgetFunc","BinaryAnswerTypeYes","BinaryAnswerTypeNo","ChatbotValidation","chatbotState","validate","validationTypes","warningMessage","validationType","getDefaultWarningMessage","validationResult","emptyValue","validateEmpty","invalidAmount","validateAmount","onlyDigit","validateDigit","incorrectValueForBoolean","validateValueForBoolean","error","showWarning","messageCopy","handleValidation","test","innerHTML","emptyValueMessage","MessageParser","chatbotValidator","disableButtons","buttonElements","getElementsByClassName","currentElement","setRevertListeners","subscribe","revertState","lastState","flagSwitch","curState","part1","handleSuccessorInput","handleSuccessorCount","trim","handleTestator","toLowerCase","alert","handleTotalEstateValueResponse","handleDelvisFirstResponse","part4","handleDelvisSecondResponse","part5","handleFulltSaereieResponse","part6","handleParentsInput","handleUndividedEstateSpouse","handleNetWealth","netWealthStep","spouseStep","handleSpouseInput","cohabitantStep","handleCohabitantInput","theme","popover","paper","spacing","ShowInfoWidget","containerRef","useRef","anchorEl","setAnchorEl","handlePopoverClose","Boolean","ref","onMouseEnter","event","currentTarget","onMouseLeave","Popover","anchorOrigin","vertical","horizontal","transformOrigin","disableRestoreFocus","current","text","QuestionConstants","TestatorQuestion","UndividedEstateQuestion","YesNoWidgetOptions","widget","withAvatar","loading","terminateLoading","UndividedEstateResultText","selectedOption","undividedEstateResultText","NetWealthQuestion","NetWealthWarning","UnderAgeQuestion","UnderAgeResultText","underAgeResultText","SpouseChoiceQuestion","SpouseQuestion","CohabitantChoiceQuestion","CohabitantQuestion","addSuccessorQuestion1","person_id","person_ID","addSuccessorQuestion2","child_id_string","children_IDs","AliveQuestion","child_ID","AliveResultText","aliveResultText","addParentsQuestion1","askSecondParentChoiceQuestion","addParentsQuestion2","parent_id_string","parents_IDs","MarriedParents1","first_parent_id","second_parent_id","parent1_ID","parent2_ID","MarriedParents2","addGrandParentsQuestion1","addGrandParentsQuestion2","grandparent_id_string","grandParents_IDs","FinalQuestion","EmptyQuestion","DefaultText","TotalEstateNetValueQuestion","TotalEstateNetValueWarning","OwnershipTypeQuestion","OwnershipQuestionWidgetOptions","OwnershipTypeWarning","DelvisFirstQuestion","DelvisSecondQuestion","FulltSaereieQuestion","UndividedEstateSpouseQuestion","TextBeforeSucsrUndvdSpouse","addSuccessorCount","addSuccessorOfParentCount","existing_child_id","existing_child_ID","InheritanceConstants","DESC_COHABITANT_WITHOUT_COMMON_CHILD","DESC_NO_SPOUSE_OR_COHABITANT","DESC_COHABITANT_NO_CLOSE_RELATIVES_2","DESC_COHABITANT_NO_CLOSE_RELATIVES","DESC_SPOUSE_NO_CLOSE_RELATIVES_2","DESC_SPOUSE_NO_CLOSE_RELATIVES","G","MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN","FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN","MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS","FRACTION_INHERITANCE_SPOUSE_VS_PARENTS","MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN","FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN","MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS","FRACTION_INHERITANCE_COHABITANT_VS_PARENTS","FRACTION_PLIKTDEL","LINE_MAXIMUM_PLIKTDEL","LAW_LINKS","KapittelVI","CODE_PARAGRAPHS","Person","personid","_personName","_deceased","_childrenRearing","_underAge","set_spouse","spouse","hasSurvivingSpouse","set_cohabitant","cohabitant","getPerson","personMap","Family","_person_dict","personID","keys","ParseCurrencyStringForOutput","unformattedCurrency","Intl","NumberFormat","currency","currencyDisplay","minimumFractionDigits","maximumFractionDigits","format","Number","replace","concat","CurrencyOutput","inputCurrency","initialCurrencyValue","beginningValue","endValue","matchesStart","match","matchStartResult","substring","matchesEnd","matchEndResult","removeTextFromCurrencyString","digitsBeforeSeparatorValue","separatorCount","checkSeparatorCount","digitsBeforeSymbol","checkDigitsBeforeSeparatorValue","xDiff","yDiff","partnerBubbleLevelMap","HandleType","ReportUtils","combine_duplicates","inheritance_fraction_list","combinedList","inheritanceFraction","has","frac","chains","set","arrayOfObjects","from","rArray","split_evenly_between_lines","person_list","maximum_distance","allow_parents","split_fraction_list","split_frac","personDetail","personNode","get_class_and_distance_closest_surviving_relative","temp_list","level_sum","interm_temp_list","temp_split_fraction_list","temp_fraction_list","compute_default_genealogy_splits_with_chains","class_closest","firstParentSpouse","grandParent_splits","parentNode","intl","InheritanceCalculation","will","ActionProvider","survivor","survivor_type","distance_closest","old_surviving_reference_paragraphs","surviving_reference_paragraphs","minimum_surviving_inheritance","surviving_fraction","descriptive_text","survivor_inheritance_sum","genealogy_inheritance_sum","splits_with_chains","genealogy_inheritance","genealogy_splits","reportUtils","computeInheritance","closest_class","firstParentNode","num","grandparent_splits","split","resultList","computeGenealogyInheritance","Math","min","max","genealogy_split","setStateFunc","createClientMessage","stateRef","QuestionConsts","family","checkstate","isStarted","glb_state","GRANDCHILDREN_PATH_LIMIT","revertCount","localStorage","getItem","parseInt","setItem","toString","returnState","testatorResponse","undividedEstateQuestion","createTestator","addMessageToBotState","undividedEstateChoiceResponse","totalEstateNetValueQuestion","netWealthQuestion","totalEstateValueResponse","totalEstateValueQuestion","currencyIntResponse","currencyStringResponse","currencyJSX","ownershipTypeQuestion","currencyCustom","totalEstateWarning","ownershipResponse","undividedEstateSpouseQuestion","underAgeQuestion","askFinalQuestion","delvisFirstQuestion","fulltSaereieQuestion","ownershipTypeWarning","delvisFirstResponse","delvisSecondQuestion","netWealthWarning","delvisSecondResponse","fulltSaereieResponse","undividedEstateSpouseResponse","undividedSpouseID","newUndividedSpouse","createNewPerson","undividedSpouse","newUndividedSpouseDetail","textBeforeSucsrUndvdSpouse","newSuccessorQuestion","spouseChoiceQuestion","cohabitantChoiceQuestion","spouseQuestion","spouseResponse","spouseID","newSpouse","rearChildrenStep","cohabitantChoiceResponse","cohabitantQuestion","cohabitantResponse","cohabitantID","newCohabitant","successorResponse","child_name","childID","getChildUnprocessedNode","personId","aliveQuestion","alive","childDetail","getGenerationCount","handleNoSuccessorCase","childItrPos","allChildrenID","getParentChildrenIDStrings","currentParentID","isCurrentParentID","currentId","getParentId","currentParentDetail","handleClosingStep","secondParentChoice","allParentsID","temp_person_detail","newParentQuestion","closestSurvivingRelativeParents","closestSurvivingRelativeGrandParents","parentResponse","predecessor_id","predecessor","temp_parent_detail","grandParentFirst","testatorNode","askForNextGrandParent","marriedParentsResponse","finalOption","inheritanceCalculation","handleRearChildrenResult","closestSurvivingRelativeChildren","testatorDetail","temp_class_testator","temp_class_undivided_spouse","collection","join","finalQuestion","isTwoParent","personName","secondParentChoiceQuestion","temp_class","eitherParentsDeceased","p_id","parent1Detail","parent2Detail","marriedParentsQn","isArray","handleDefault","newPerson","generateNextID","newNode","createEmptyNode","firstSpouse_id","secondSpouse_id","surviving_successor_distance","possible_distances","temp","distance","alternatives","sort","b","closest_alternative_class","closest_alternative_distance","check","self","setInterval","detail","clearInterval","chartSelector","currencyResponse","successorCount","parentID","questionType","itr_id","t","ChartNode","type","xLevel","draggable","connectable","NodeData","showDialog","pos","ChartConnector","source","sourceHandle","targetHandle","animated","Bubble","elements","maxLevel","minLevel","xLevelArray","chartNodeMap","connectorArray","nodeSize","setxLevel","levelMap","processedNodes","currentLevelChartNodes","currentNode","avgXlevel","parentsCurrentNode","n","partnerNodeId","partnerChartNode","getChartNode","partnerBubbleArray","right","left","connector","newConnector","currentNodePath","j","sourceNode","bottom","targetNode","top","getLevelMap","nodeDetails","nodeLabel","y","setNodePosition","ypos","sortedLevelChartNode","bubbles","createLevelBubble","processBubbles","xleft","xgap","previousXRight","bubble","parentChartNode","relativeXleft","relativeXRight","eleID","chartNodes","partnerBubble","isPartnerProcessed","chartNode","partnerParent","isExistingBubble","partnerNode","existingBubbles","existingBubble","getChartNodeConnectorArray","finalArray","setxLevelForMaxLevel","nodeArray","xlevelDefault","customHandleData","Position","Right","Bottom","Left","Top","partnerNodeStyles","width","borderRadius","borderColor","borderStyle","borderWidth","letterSpacing","lineHeight","deceasedFormatter","personString","CustomNode","totalData","isConnectable","handles","v","k","labelString","margin","mode","forceSingleModeWidth","Popper","chatBotDataSubject","chatbotMessageSubscriptionList","componentCommunicatorService","flowStyles","isHandleChange","OrgChartTree","result","setResult","chartContent","setChartContent","componentWillUnmount","updateNodeInternals","useUpdateNodeInternals","setTimeout","chartData","maxLevelData","processData","fitView","useZoomPanHelper","nodeTypes","specialNode","paddingTop","nodesConnectable","paneMoveable","selectNodesOnDrag","elementsSelectable","nodesDraggable","BackgroundVariant","Dots","gap","setWarningDiv","chatParentElement","newDiv","createElement","prepend","addListenerToChatInputField","InheritanceCalculatorPage","prev","Config","messageParser","divChatBot","src","botIcon","Copyright","Date","getFullYear","footer","useTheme","Footer","description","Paper","gutterBottom","ResourcesPage","initialState","genericReducer","action","payload","store","createStore","createTheme","rootPaper","marginTop","minHeight","opacity","menuItems","App","langMessages","StyledEngineProvider","injectFirst","ThemeProvider","role","render"],"mappings":"+RAAYA,EAmBAC,E,2OCVNC,EAAYC,YAAW,CAAEC,KALlB,CACXC,WAAY,yBACZC,MAAO,aAcMC,EAVK,WAClB,IAAMC,EAAUN,IAEhB,OACE,cAACO,EAAA,EAAD,CAAYC,QAAQ,KAAKC,UAAWH,EAAQJ,KAAMQ,QAAM,EAAxD,sBCJEV,EAAYC,YAAW,CAC3BC,KAAM,CACJC,WAAY,0BAEZQ,SAAU,SACVP,MAAO,UACPQ,QAAS,SACTC,eAAgB,OAChBC,UAAW,SACX,UAAW,CACTV,MAAO,UACPW,gBAAiB,UACjBC,WAAY,SAGhBC,WAAY,CACVF,gBAAiB,UACjBX,MAAO,UACP,UAAW,CACTW,gBAAiB,UACjBX,MAAO,cAmBEc,EAdE,SAACC,GAChB,IAAMb,EAAUN,EAAUmB,GAC1B,OACE,cAAC,IAAD,CACEC,GAAID,EAAME,KACVZ,UAAWH,EAAQJ,KACnBoB,OAAK,EACLC,gBAAiBjB,EAAQW,WAJ3B,SAMGE,EAAMK,QCrBEC,EAvBE,CACf,CACEC,GAAI,EACJC,MAAO,YACPC,KAAM,KAER,CACEF,GAAI,EACJC,MAAO,kBACPC,KAAM,eAER,CACEF,GAAI,EACJC,MAAO,aACPC,KAAM,UAER,CACEF,GAAI,EACJC,MAAO,iBACPC,KAAM,e,SCMKC,EAnBI,WACjB,OACE,cAACC,EAAA,EAAD,CACEC,WAAS,EACTC,UAAU,MACVC,eAAe,eACfC,WAAW,SAJb,SAMGC,EAASC,KAAI,YAA0B,IAAvBV,EAAsB,EAAtBA,GAAIC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,KAC1B,OACE,cAACE,EAAA,EAAD,CAAMO,MAAI,EAAV,SACE,cAAC,EAAD,CAAUb,KAAM,cAAC,IAAD,CAAkBE,GAAE,UAAKC,KAAaN,KAAMO,KAD9CF,SCCpB1B,EAAYC,YAAW,CAC3BqC,OAAQ,CACNvB,gBAAiB,QACjBwB,OAAQ,QAEV,4BAA6B,CAC3BC,YAAa,GAEfC,gBAAiB,CACf7B,QAAS,aAEX8B,aAAc,CACZtC,MAAO,aAoFIuC,EA3CA,WACb,MAA0BC,mBAAS,CACjCC,YAAY,EACZC,YAAY,IAFd,mBAAOC,EAAP,KAAcC,EAAd,KAIQH,EAA2BE,EAA3BF,WAAYC,EAAeC,EAAfD,WACpBG,qBAAU,WACR,IAAMC,EAAoB,WACxB,OAAOC,OAAOC,WAAa,IACvBJ,GAAS,SAACK,GAAD,mBAAC,eAAoBA,GAArB,IAAgCR,YAAY,OACrDG,GAAS,SAACK,GAAD,mBAAC,eAAoBA,GAArB,IAAgCR,YAAY,QAE3DK,IACAC,OAAOG,iBAAiB,UAAU,kBAAMJ,SACvC,IAEH,IAAM5C,EAAUN,IAoBhB,OACE,cAACuD,EAAA,EAAD,CAAQ9C,UAAWH,EAAQgC,OAA3B,SACGO,EAbD,eAACW,EAAA,EAAD,WACE,cAAC,IAAD,CAAU/C,UAAWH,EAAQoC,eAC7B,cAACe,EAAA,EAAD,CAAYC,KAAK,QAAQtD,MAAM,UAAUuD,QARpB,kBACvBX,GAAS,SAACK,GAAD,mBAAC,eAAoBA,GAArB,IAAgCP,YAAY,QAOiBc,KAAK,UACzE,cAACC,EAAA,EAAD,CAAQC,OAAO,OAAOC,KAAMjB,EAAYkB,QAPlB,kBACxBhB,GAAS,SAACK,GAAD,mBAAC,eAAoBA,GAArB,IAAgCP,YAAY,QAMnD,SACE,qBAAKrC,UAAWH,EAAQmC,gBAAxB,SAjEDN,EAASC,KAAI,YAA0B,IAAvBV,EAAsB,EAAtBA,GAAIC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,KAChC,OACE,cAACqC,EAAA,EAAD,CAEIC,UAAWC,IACX/C,GAAIQ,EACJxB,MAAO,UACPgE,MAAO,CAAEvD,eAAgB,QACzBwD,IAAK3C,EANT,SASE,cAAC4C,EAAA,EAAD,UAAW3C,aAwDX,cAAC,EAAD,OAjDJ,cAAC6B,EAAA,EAAD,UACE,eAAC1B,EAAA,EAAD,CACEC,WAAS,EACTC,UAAU,MACVC,eAAe,aACfC,WAAW,WAJb,UAME,cAACJ,EAAA,EAAD,CAAMO,MAAI,EAACkC,GAAI,EAAf,SACE,cAAC,EAAD,MAEF,cAACzC,EAAA,EAAD,CAAMO,MAAI,EAACkC,GAAI,EAAf,SACE,cAAC,EAAD,c,2BCzDJvE,EAAYC,YAAW,CAC3BC,KAAM,CACJU,QAAS,cACTR,MAAO,QACPD,WAAY,2BAEdqE,cAAe,CACbrE,WAAY,yBACZQ,SAAU,OACVP,MAAO,YAoBIqE,EAhBI,WACjB,IAAMnE,EAAUN,IAEhB,OACE,cAAC0E,EAAA,EAAD,UACE,eAACnE,EAAA,EAAD,CAAYC,QAAQ,KAAKmE,MAAM,SAASlE,UAAWH,EAAQJ,KAA3D,0EACmD,uBADnD,wDAEiD,uBAFjD,sEAGsE,IACpE,uBAJF,IAIS,uBACP,sBAAMO,UAAWH,EAAQkE,cAAzB,uBALF,IAK2D,cAAC,IAAD,CAAOI,UAAW,GAAIC,QARnE,CAAC,0ECTNC,EATE,WACf,OAIE,aAHA,CAGC,EAAD,KCGWC,EATG,WAEhB,OACE,cAACxE,EAAA,EAAD,CAAYC,QAAQ,KAAKmE,MAAM,SAA/B,yB,yBRLQ7E,K,cAAAA,E,4BAAAA,E,0CAAAA,E,8BAAAA,E,4BAAAA,E,4BAAAA,E,wBAAAA,E,oCAAAA,E,gCAAAA,E,8BAAAA,E,0BAAAA,E,oCAAAA,E,wCAAAA,E,kCAAAA,E,sBAAAA,E,yCAAAA,M,cAmBAC,K,cAAAA,E,cAAAA,E,cAAAA,E,cAAAA,E,cAAAA,E,cAAAA,E,wBAAAA,M,mCShBNiF,EAAY,IAAIC,IAChBC,EAAa,IAAID,IACjBE,EAA2B,IAAIC,MAC/BC,EAA2B,IAAID,MAC/BE,EAAiB,IAAIF,MACdG,EAIe,SAACC,GAAD,OAAkBN,EAAWO,KAAKD,IAJjDD,EAMY,kBAAMP,EAAUU,gBAN5BH,GAQa,kBAAML,EAAWQ,gBAR9BH,GAUgB,SAACI,GAAD,OAAgCR,EAAyBS,KAAKD,IAV9EJ,GAYgB,SAACI,GAAD,OAAgCN,EAAyBO,KAAKD,IAZ9EJ,GAcS,SAACM,GACf,IAAMC,EAAYC,IAAEC,UAAUH,GACoF,IAA9GP,EAAeW,QAAO,SAAAC,GAAa,OAAIC,OAAOC,QAAQF,IAAkBC,OAAOC,QAAQN,MAAYO,QACnGf,EAAeM,KAAKE,IAjBnBP,GAqBY,WACjB,OAA8B,IAA1BD,EAAee,OACR,KAEJf,EAAegB,OAzBjBf,GA4BU,kBAAMD,GA5BhBC,GA8BS,SAACgB,GACf,OAA8B,IAA1BjB,EAAee,OAAqB,KACjCf,EAAeA,EAAee,OAAS,EAAIE,IAhC7ChB,GAmCqB,WAC1BJ,EAAyBqB,SAAQ,SAACb,GAC9BA,EAAac,kBArCZlB,GAyCqB,WAC1BF,EAAyBmB,SAAQ,SAACb,GAC9BA,EAAac,kBCDnBC,GAAgB,SAACC,EAAiBC,EAAqB5D,GAC3D6D,KACA7D,GAAS,SAACD,GACRwC,GAAA,eAAqCxC,IACrC,IAAM+D,EAAU/D,EAAMgE,OAEtB,OADAhE,EAAMiE,kBAAmB,EACjBF,GACN,KAAKhH,EAAcmH,aACjBL,EAAeM,4BAA4BP,GAC3C,MAEF,KAAK7G,EAAcqH,oBACjB,GAAIpE,EAAMqE,iBAAmBrH,EAAasH,MAAO,CAC/CT,EAAeU,uBAAuBX,GACtC,MAEG,GAAI5D,EAAMwE,cAAgBxH,EAAasH,MAAO,CACjDT,EAAeY,wBAAwBb,GACvC,MAEG,GAAI5D,EAAMwE,cAAgBxH,EAAa0H,MAAO,CACjDb,EAAec,yBAAyBf,GACxC,MAEF,MAEF,KAAK7G,EAAc6H,aACjBf,EAAegB,eAAejB,GAC9B,MAEF,KAAK7G,EAAc+H,aACjBjB,EAAekB,mBAAmBnB,GAClC,MAEF,KAAK7G,EAAciI,iBACjBnB,EAAeoB,uBAAuBrB,GACtC,MAEF,KAAK7G,EAAcmI,cACjBlF,EAAMqE,eAAiBrH,EAAasH,MACpCT,EAAeU,uBAAuBX,GACtC,MAEF,KAAK7G,EAAcoI,YACjB,GAAInF,EAAMqE,iBAAmBrH,EAAasH,MAAO,CAC/CT,EAAeU,uBAAuBX,GACtC,MAEG,GAAI5D,EAAMwE,cAAgBxH,EAAasH,MAAO,CACjDT,EAAeY,wBAAwBb,GACvC,MAEG,GAAI5D,EAAMwE,cAAgBxH,EAAa0H,MAAO,CACjDb,EAAec,yBAAyBf,GACxC,MAEF,MAEF,KAAK7G,EAAcqI,mBACjBvB,EAAewB,qBAAqBzB,GACpC,MAEF,KAAK7G,EAAcuI,gBACjB,GAAItF,EAAMqE,iBAAmBrH,EAAasH,MAAO,CAC/CT,EAAeU,uBAAuBX,GACtC,MAEG,GAAI5D,EAAMwE,cAAgBxH,EAAasH,MAAO,CACjDT,EAAeY,wBAAwBb,GACvC,MAEG,GAAI5D,EAAMwE,cAAgBxH,EAAa0H,MAAO,CACjDb,EAAec,yBAAyBf,GACxC,MAEF,MAEF,KAAK7G,EAAcwI,UACjB1B,EAAe2B,oBAAoB5B,GACnC,MAEF,QACE6B,QAAQC,IAAI,oBAAqB1F,GAGrC,OAAOA,MAGL8D,GAAc,WAClB,IAAM6B,EAAaC,SAASC,eAAe,uBACvCF,IACFA,EAAWtE,MAAMyE,QAAU,SAIhBC,GAzIQ,SAAC3H,GACtB,IAAQyF,EAA6BzF,EAA7ByF,eAAgB5D,EAAa7B,EAAb6B,SAClB+F,EAAY,SAACpC,GACjBD,GAAcC,EAAQC,EAAgB5D,IAcxC,OACE,8BACE,sBAAKvC,UAAU,mCAAf,UACE,wBACEA,UAAU,yBACVkD,QAAS,SAACqF,GAERD,GAAU,IAJd,SAOE,cAAC,IAAD,CAAkBrH,GAAG,kBAEvB,wBACEjB,UAAU,yBACVkD,QAAS,SAACqF,GAERD,GAAU,IAJd,SAOE,cAAC,IAAD,CAAkBrH,GAAG,uB,oBCrBhBuH,I,OAlBNC,KAAUC,OAIQ,SAAC,GAAiC,IAA/BC,EAA8B,EAA9BA,MAC5B,OAAO,eAAC1E,EAAA,EAAD,CACLmE,QAAQ,OACR5G,eAAe,SACfC,WAAW,SACXgC,UAAU,OACVzD,UAAU,cACV4I,GAAI,CAAEtI,gBAAiB,WANlB,6BAQYqI,O,8BCkBNE,I,OAhCoB,SAACnI,GAClC,IAAQ6B,EAA6B7B,EAA7B6B,SAAU4D,EAAmBzF,EAAnByF,eAEZmC,EAAS,yCAAG,WAAOpC,GAAP,UAAA4C,EAAA,sDAChBvG,GAAS,SAACD,GAAD,mBAAC,eACLA,GADI,IAGPyG,aAAc7C,OAGhBC,EAAe6C,+BAA+B9C,GAP9B,2CAAH,sDASf,OACE,8BACE,sBAAKlG,UAAU,mCAAf,UACE,wBACEA,UAAU,yBACVkD,QAAS,kBAAMoF,GAAU,IAF3B,SAIE,cAAC,IAAD,CAAkBrH,GAAG,kBAEvB,wBACEjB,UAAU,yBACVkD,QAAS,kBAAMoF,GAAU,IAF3B,SAIE,cAAC,IAAD,CAAkBrH,GAAG,wBC8BhBgI,I,OAtDe,SAACvI,GAC7B,IAAQyF,EAAmBzF,EAAnByF,eAEFmC,EAAY,SAACpC,GACjBC,EAAe+C,wBAAwBhD,IAGnCiD,EAAiB,SAACZ,GACtB,IAAMa,EAAab,EAAEc,OACfC,EAAgBF,EAAWG,cACjC,UAAID,QAAJ,IAAIA,KAAeE,cAAe,CAEhC,IADA,IACA,MAD0B9D,OAAO+D,OAAOH,EAAcI,YACtD,eAAyC,CAApC,IAAMC,EAAO,KAChBA,EAAQhG,MAAMiG,cAAgB,OAC9BD,EAAQE,UAAW,EAErBT,EAAWzF,MAAMmG,WAAa,mBAGlC,OACE,8BACE,sBAAK9J,UAAU,mCAAf,UACE,wBACEA,UAAU,yBACVkD,QAAS,SAACqF,GACRY,EAAeZ,GACfD,EAAU,cAJd,SAOE,cAAC,IAAD,CAAkBrH,GAAG,8BAEvB,wBACEjB,UAAU,yBACVkD,QAAS,SAACqF,GACRY,EAAeZ,GACfD,EAAU,qBAJd,SAOE,cAAC,IAAD,CAAkBrH,GAAG,8BAEvB,wBACEjB,UAAU,yBACVkD,QAAS,SAACqF,GACRY,EAAeZ,GACfD,EAAU,oBAJd,SAOE,cAAC,IAAD,CAAkBrH,GAAG,qC,sFCxChB,SAAS8I,GAAWrJ,GACjC,MAAwByB,oBAAS,GAAjC,mBAAOmB,EAAP,KAAa0G,EAAb,KAMMC,EAAgB,WACpBD,GAAQ,IAQJE,EAAa,WACjBxJ,EAAMyF,eAAegE,gBAGvB,OACE,cAAClG,EAAA,EAAD,CAAK2E,GAAI,CAAEwB,SAAU,GAArB,SACE,cAACtH,EAAA,EAAD,CAAQuH,SAAS,SAAjB,SACE,eAACtH,EAAA,EAAD,WACE,cAACjD,EAAA,EAAD,CAAYC,QAAQ,KAAK0D,UAAU,MAAMmF,GAAI,CAAEwB,SAAU,GAAzD,uCAGA,cAACE,GAAA,EAAD,CAAQpH,QAxBQ,WACtB8G,GAAQ,IAuBgCrG,MAAO,CAAErD,gBAAiB,qBAA5D,SACE,cAACiK,GAAA,EAAD,CAAYrK,SAAS,YAEvB,eAACsK,GAAA,EAAD,CACElH,KAAMA,EACNC,QAAS0G,EACT,kBAAgB,qBAChB,mBAAiB,2BAJnB,UAME,cAACQ,GAAA,EAAD,CAAaxJ,GAAG,qBAAhB,8BAGA,cAACyJ,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,CAAmB1J,GAAG,2BAAtB,4EAIF,eAAC2J,GAAA,EAAD,WACE,cAACN,GAAA,EAAD,CAAQpH,QAAS+G,EAAjB,gBACA,cAACK,GAAA,EAAD,CAAQpH,QAnCG,WACrBgH,IACAF,GAAQ,IAiCmCa,WAAS,EAA1C,8B,IC1DFC,G,qCAAAA,O,iBAAAA,I,mBAAAA,I,wBAAAA,I,6BAAAA,I,mBAAAA,I,2BAAAA,I,sCAAAA,Q,KCEL,IAAMC,GAAb,WAYE,WAAY9J,EAAY+J,GAAgB,IAAD,iCAXvCC,SAWuC,OAVvCC,YAUuC,OATvCC,WASuC,OARvCC,cAQuC,OAPvCC,eAOuC,OANvCC,aAMuC,OALvCC,iBAKuC,OAJvCC,4BAIuC,OAHvCC,sBAGuC,OAFvCC,iBAEuC,OADvCC,0BACuC,OAavCC,oBAAsB,WACpB,OAAO,IAAIC,IAAoB,CAC7B,CAAC,IAAK,SACN,CAAC,KAAM,cACP,CAAC,IAAK,UACN,CAAC,KAAM,kBACP,CAAC,MAAO,gBACR,CAAC,OAAQ,cACT,CAAC,KAAM,eACP,CAAC,MAAO,cACR,CAAC,OAAQ,UACT,CAAC,GAAI,OAxB8B,KA8DvCC,UAAY,SAACC,GAAkD,IAA/BC,IAA8B,yDACtDC,EAAiB,EAAKZ,UACtBa,EAAWH,EAAMd,IAClBgB,EAAeE,MAAK,SAACC,GAAD,OAASA,IAAQF,MACxC,EAAKb,UAAUlG,KAAK+G,GAEtBH,EAAMZ,MAAN,aAAkB,EAAKA,OACvBY,EAAMZ,MAAMhG,KAAK,CAAC2F,GAAoBiB,MAAOG,IAC7CH,EAAMb,OAAS,EAAKmB,SAASN,EAAMZ,OAC/Ba,IACGD,EAAMX,SAASe,MAAK,SAACC,GAAD,OAASA,IAAQ,EAAKnB,QAC7Cc,EAAMX,SAASjG,KAAK,EAAK8F,OAzEQ,KA8EvCqB,WAAa,SACXC,GAGU,IAFVP,IAES,yDACHQ,EAAgB,EAAKpB,SACrBqB,EAAYF,EAAOtB,IACpBuB,EAAcL,MAAK,SAACC,GAAD,OAASA,IAAQK,MACvC,EAAKrB,SAASjG,KAAKsH,GAErBF,EAAOpB,MAAP,aAAmB,EAAKA,OAExBoB,EAAOpB,MAAMhG,KAAK,CAAC2F,GAAoByB,OAAQE,IAC/CF,EAAOrB,OAAS,EAAKmB,SAASE,EAAOpB,OACf,IAAlBoB,EAAOrB,SACTqB,EAAOpB,MAAMoB,EAAOpB,MAAMvF,OAAS,GAAG,GACpCkF,GAAoB4B,aAEpBV,IACGO,EAAOlB,UAAUc,MAAK,SAACC,GAAD,OAASA,IAAQ,EAAKnB,QAC/CsB,EAAOlB,UAAUlG,KAAK,EAAK8F,OAlGM,KAuGvC0B,iBAAmB,WACjB,GAAyB,GAArB,EAAKxB,MAAMvF,OACb,MAAM,IAAIgH,MAAM,gBAElB,OAAO,EAAKzB,MAAM,EAAKA,MAAMvF,OAAS,GAAG,IA3GJ,KA8GvCyG,SAAW,SAAClL,GACV,IAAI6J,EAAQ,EAaZ,OAZA7J,EAAKQ,KAAI,SAACkL,GACJA,EAAE,KAAO/B,GAAoBiB,MAC/Bf,GAAgB,EAEhB6B,EAAE,KAAO/B,GAAoByB,QAC7BM,EAAE,KAAO/B,GAAoB4B,YAE7B1B,GAAgB,EAEhBA,GAAgB,KAGbA,GA5H8B,KAuIvC8B,kBAAoB,SAACC,EAAyBC,GAC5CA,EAAQ7B,MAAR,aAAoB,EAAKA,OACzB6B,EAAQ7B,MAAMhG,KAAK,CAAC4H,EAAiBC,EAAQ/B,OAzIR,KAiJvCgC,qBAAuB,WACrB,OAAO,GAlJ8B,KAqJvCC,yBAA2B,WACzB,OAAyB,OAArB,EAAK3B,aArJT4B,KAAKlC,IAAMhK,EACXkM,KAAKjC,OAASF,EACdmC,KAAKhC,MAAQ,GACbgC,KAAK/B,SAAW,GAChB+B,KAAK9B,UAAY,GACjB8B,KAAK7B,QAAU,KACf6B,KAAK5B,YAAc,KACnB4B,KAAK3B,uBAAyB,KAC9B2B,KAAK1B,iBAAmB0B,KAAKvB,sBAC7BuB,KAAKzB,YAAc,EACnByB,KAAKxB,qBAAuB,EAvBhC,4CAwCE,SAAQyB,GACND,KAAKhC,MAAQiC,IAzCjB,yBA2CE,SAAYC,GACV,GAAIF,KAAKhC,MAAMvF,OAAS,EAAI,EAC1B,OAAO,KAET,IAAM0H,EAASH,KAAKhC,MAAMgC,KAAKhC,MAAMvF,OAAS,GAAG,GAC3C2H,EAAWxC,EAAWyC,QAAQF,EAAQD,GAC5C,OAEIF,KAAK9B,UAAUoC,SAASN,KAAKhC,MAAMgC,KAAKhC,MAAMvF,OAAS,GAAG,KAC1D2H,EAAS/B,yBAA2B2B,KAAKlC,IAItC,KADEkC,KAAKhC,MAAMgC,KAAKhC,MAAMvF,OAAS,GAAG,KAvD/C,gCA0DE,WACE,IAAI8H,EAAc,EAClB,GAAIP,KAAKhC,MAAMvF,OAAS,EAAI,EAC1B,OAAO,EAET,IAAK,IAAI+H,EAAIR,KAAKhC,MAAMvF,OAAS,EAAG+H,GAAK,EAAGA,IAAK,CAC/C,GAAIR,KAAKhC,MAAMwC,GAAG,KAAO7C,GAAoB4B,YAAa,CACxDgB,GAAe,EACf,MAEAA,GAAe,EAGnB,OAAOA,IAvEX,qCAuJE,WACE,GAAIP,KAAKxB,qBAAuBwB,KAAK9B,UAAUzF,OAC7C,OAAOuH,KAAK9B,UAAU8B,KAAKxB,4BAzJjC,KAAaZ,GA2IJyC,QAAU,SAACvM,EAAYoM,GAC5B,IAAMO,EAA+BP,EAAQQ,IAAI5M,GACjD,QAAY6M,GAARF,EACF,MAAM,IAAIhB,MAAM,gCAAkC3L,GAEpD,OAAO2M,GChHJ,IClCKG,GAMAC,GD4BCC,GAAiC,CAC5C3H,OAAQjH,EAAc6O,WACtBC,OAAQ,IAAIpD,GAAW,EAAG,GAC1BqD,SAAU,IAAIrD,GAAW,EAAG,GAC5BsD,SAAU,GACVC,UAAW,EACX3H,eAAgBrH,EAAaiP,gBAC7BzH,YAAaxH,EAAaiP,gBAC1BC,YAAa,IAAIzD,GAAW,EAAG,GAC/B0D,WAAY,IAAI1D,GAAW,EAAG,GAC9B2D,YAAa,IAAI3D,GAAW,EAAG,GAC/B4D,WAAY,IAAI9C,IAChBwB,QAAS,IAAIxB,IACb5K,GAAI,EACJ2N,qBAAsB,GACtBC,iBAAkBvP,EAAaiP,gBAC/BO,sBAAsB,EACtBC,gBAAiB,CACfC,uBAAuB,EACvBC,eAAgB3P,EAAaiP,gBAC7BW,iBAAkB,EAClBC,8BAA+B,EAC/BC,WAAY,EACZC,UAAW,GAEbC,aAAc,GACdC,sBAAuB,GACvBC,mBAAmB,EACnBjJ,kBAAkB,GAGPkJ,GAA2B,CACtCnJ,OAAQjH,EAAc6O,WACtBC,OAAQ,IAAIpD,GAAW,EAAG,GAC1BqD,SAAU,IAAIrD,GAAW,EAAG,GAC5BsD,SAAU,GACVC,UAAW,EACX3H,eAAgBrH,EAAaiP,gBAC7BzH,YAAaxH,EAAaiP,gBAC1BC,YAAa,IAAIzD,GAAW,EAAG,GAC/B0D,WAAY,IAAI1D,GAAW,EAAG,GAC9B2D,YAAa,IAAI3D,GAAW,EAAG,GAC/B4D,WAAY,IAAI9C,IAChBwB,QAAS,IAAIxB,IACb5K,GAAI,EACJ2N,qBAAsB,GACtBC,iBAAkBvP,EAAaiP,gBAC/BO,sBAAsB,EACtBC,gBAAiB,CACfC,uBAAuB,EACvBC,eAAgB3P,EAAaiP,gBAC7BW,iBAAkB,EAClBC,8BAA+B,EAC/BC,WAAY,EACZC,UAAW,GAEbC,aAAc,GACdC,sBAAuB,GACvBG,SAAU,I,kBEjFNC,GAAQC,eAIRC,GAHOC,YAAW,CAAEC,OAAQ,QAASL,SAAUM,IAASL,IAG3CM,cAAc,CAAEhP,GAAI,8BAqCxBiP,GApCA,CACbC,QAHc,UAIdC,KAAM,KACNC,aAAc,CACZC,cAAe,CACbhQ,gBAAiB,WAEnBiQ,WAAY,CACVjQ,gBAAiB,YAGrBgC,MAAO2L,GACPuC,gBAAiB,CAACC,+BAAqBZ,GAAO,KAC9Ca,iBAAkB,CAChB7O,OAAQ,SAACsE,GAAD,OAAoB,cAAC4D,GAAD,CAAY5D,eAAgBA,MAG1DwK,QAAS,CACP,CACEC,WAAY,uBACZC,WAAY,SAACnQ,GAAD,OAAW,cAAC,GAAD,eAAoBA,MAE7C,CACEkQ,WAAY,6BACZC,WAAY,SAACnQ,GAAD,OAAW,cAAC,GAAD,eAAgCA,MAEzD,CACEkQ,WAAY,cACZC,WAAY,SAACnQ,GAAD,OAAW,cAAC,GAAD,eAAuBA,MAEhD,CACEkQ,WAAY,wBACZC,WAAY,SAACnQ,GAAD,OAAW,cAAC,GAAD,eAA2BA,S,SDhD5CqN,O,2BAAAA,I,iCAAAA,I,yBAAAA,I,wDAAAA,Q,cAMAC,K,8CAAAA,E,6CAAAA,E,kFAAAA,Q,SENA8C,GAKAC,G,mBALAD,O,aAAAA,I,YAAAA,Q,cAKAC,O,WAAAA,I,cAAAA,Q,KCAL,IAAMC,GAAb,WACI,WAAoB7K,EAAwC8K,GAAoB,IAAD,iCAA3D9K,iBAA2D,KAAnB8K,eAAmB,KAC/EC,SAAW,SAACnM,EAAiBoM,EAAgCC,GAAsC,IAAD,iBAEjED,GAFiE,IAE9F,2BAA8C,CAAC,IAApCE,EAAmC,aACnBvD,IAAnBsD,IACAA,EAAiB,EAAKE,yBAAyBD,IAEnD,IAAIE,GAAmB,EACvB,OAAQF,GACJ,KAAKtD,GAAeyD,WAChBD,EAAmB,EAAKE,cAAc1M,GACtC,MACJ,KAAKgJ,GAAe2D,cAChBH,EAAmB,EAAKI,eAAe5M,GACvC,MACJ,KAAKgJ,GAAe6D,UAChBL,EAAmB,EAAKM,cAAc9M,GACtC,MACJ,KAAKgJ,GAAe+D,yBAChBP,EAAmB,EAAKQ,wBAAwBhN,GAChD,MACJ,QAEI,OADAgD,QAAQiK,MAAM,4BACP,EAEf,IAAKT,GAAoB,EAAKN,aAAc,CACxC,EAAKgB,YAAYb,GACjB,IAAMc,EAAc5M,IAAEC,UAAU,EAAK0L,aAAavB,UAElD,OADA,EAAKvJ,eAAegM,iBAAiBD,IAC9B,EAEP,EAAK9L,eA9BiF,8BAiC9F,OAAO,GAlCoE,KAoC/EqL,cAAgB,SAAC1M,GAEb,OAAuB,IAAnBA,EAAQa,QAtC+D,KA6C/E+L,eAAiB,SAAC5M,GACd,OAAO,GA9CoE,KAiD/E8M,cAAgB,SAAC9M,GAEb,QADqB,mBACJqN,KAAKrN,IAnDqD,KAuD/EgN,wBAA0B,SAAChN,GACvB,OAAMA,KAAW+L,IAAyB/L,KAAWgM,OAA0BhM,IAAW,CAAC,EAAG,KAxDnB,KA8DvEkN,YAAc,SAACb,GACnB,IAAMnJ,EAAaC,SAASC,eAAe,uBAC3C,GAAIF,EAGA,OAFAA,EAAWoK,UAAYjB,OACvBnJ,EAAWtE,MAAMyE,QAAU,UAlE4C,KAsEvEhC,YAAc,WAClB,IAAM6B,EAAaC,SAASC,eAAe,uBACvCF,IACAA,EAAWtE,MAAMyE,QAAU,SA1EvC,6DA8EI,SAAyBiJ,GACrB,OAAQA,GACJ,KAAKtD,GAAeyD,WAChB,OAAOxD,GAAsBsE,kBACjC,KAAKvE,GAAe+D,yBAChB,MAAO,wBAEX,QACI,MAAO,+CAtFvB,KCgbeS,G,WAzab,WAAYpM,EAAgC7D,GAAa,IAAD,iCAHxD6D,oBAGwD,OAFxD7D,WAEwD,OADxDkQ,sBACwD,OA6WxDC,eAAiB,WAEf,IADA,IAAMC,EAAsBxK,SAASyK,uBAAuB,0BACnDhF,EAAI,EAAGA,EAAI+E,EAAe9M,OAAQ+H,IAAK,CAC9C,IAAMiF,EAAiBF,EAAe/E,GACjCiF,EAAe/I,WAClB+I,EAAe/I,UAAW,GAC5B+I,EAAejP,MAAMiG,cAAgB,SAnXe,KAuXxDiJ,mBAAqB,WACnB/N,KAEA,IAAMI,EAAeJ,IAAqCgO,WAAU,SAAA/N,GAClE,EAAKgO,iBAEPjO,GAAuCI,IA7Xe,KA+XxD6N,YAAc,WAGZ,IAAMC,EAAYlO,KAClBiD,QAAQC,IAAI,kBACZD,QAAQC,IAAIgL,GAEZ,IAAMnO,EAAsBC,KAC5BiD,QAAQC,IAAI,oBACZD,QAAQC,IAAInD,GAERmO,GACF,EAAK7M,eAAe5D,UAAS,SAACD,GAM5B,OALAA,EAAQ0Q,EACRjL,QAAQC,IAAI,eACZD,QAAQC,IAAI1F,GAGLA,MAjZ2C,KAqZxD2Q,WAAa,SAACC,EAA4BnO,GACxC,OAAImO,EAASvM,iBAAmBrH,EAAa6T,MACpC,EAAKhN,eAAeiN,qBAAqBrO,GACvCmO,EAASvM,iBAAmBrH,EAAasH,MAC3C,EAAKT,eAAeU,uBAAuB9B,GAC3CmO,EAASvM,iBAAmBrH,EAAa0H,OAC5C,EAAKwL,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAeyD,WAAYzD,GAAe6D,YAC9E,EAAKzL,eAAekN,qBAAqBtO,GAM7C,MAjaPoI,KAAKhH,eAAiBA,EACtBgH,KAAK7K,MAAQA,EACb6K,KAAKqF,iBAAmB,IAAIxB,GAAkB7K,EAAgB7D,G,0CAIhE,SAAMyC,GAGJA,EAAUA,EAAQuO,OAElB,IAAMJ,EAAW/F,KAAK7K,MAItB,GAHA4Q,EAAS3M,kBAAmB,EAGxB2M,EAAS5M,SAAWjH,EAAc6O,WACpC,OAAIf,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAeyD,aACnDrE,KAAKhH,eAAeoN,eAAexO,QAE5C,EAIF,GAAImO,EAAS5M,SAAWjH,EAAcmH,eACpCzB,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeM,6BAA4B,GAGpD,GAAI1B,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeM,6BAA4B,GAGvDgN,MAAM,mBAMZ,GAAIP,EAAS5M,SAAWjH,EAAcqH,oBAAqB,CACzD,GAAIwM,EAASnE,gBAAgBE,iBAAmB3P,EAAa6T,MAC3D,OAAOhG,KAAKhH,eAAeuN,+BAA+B3O,GAE5D,GAAImO,EAASnE,gBAAgBE,iBAAmB3P,EAAasH,MAC3D,OAAOuG,KAAKhH,eAAe+C,wBAAwBnE,GAErD,GAAImO,EAASnE,gBAAgBE,iBAAmB3P,EAAa0H,MAC3D,OAAOmG,KAAKhH,eAAewN,0BAA0B5O,GAEvD,GAAImO,EAASnE,gBAAgBE,iBAAmB3P,EAAasU,MAC3D,OAAOzG,KAAKhH,eAAe0N,2BAA2B9O,GAExD,GAAImO,EAASnE,gBAAgBE,iBAAmB3P,EAAawU,MAC3D,OAAO3G,KAAKhH,eAAe4N,2BAA2BhP,GAExD,GAAImO,EAASnE,gBAAgBE,iBAAmB3P,EAAa0U,MAAO,CAClE,GAAId,EAASvM,iBAAmBrH,EAAa6T,MAC3C,OAAOhG,KAAKhH,eAAeiN,qBAAqBrO,GAC3C,GAAImO,EAASvM,iBAAmBrH,EAAasH,OAElD,GADA7B,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,2BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeU,wBAAuB,GAE/C,GAAI9B,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeU,wBAAuB,GAGlD4M,MAAM,yBAIP,GAAIP,EAASvM,iBAAmBrH,EAAa0H,OAC5CmG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAeyD,WAAYzD,GAAe6D,YACrF,OAAOzE,KAAKhH,eAAekN,qBAAqBtO,GAMpD,GAAImO,EAASpM,cAAgBxH,EAAa6T,MACxC,OAAOhG,KAAKhH,eAAe8N,mBAAmBlP,GAE3C,GAAImO,EAASpM,aAAexH,EAAasH,QAC5C7B,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeY,yBAAwB,GAEhD,GAAIhC,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeY,yBAAwB,GAGnD0M,MAAM,mBAIZ,OAAOtG,KAAKhH,eAAe+N,4BAA4BnP,GAGvD,OAAOoI,KAAKhH,eAAegO,gBAAgBpP,GAM/C,GAAImO,EAAS5M,SAAWjH,EAAc+U,cACpC,OAAOjH,KAAKhH,eAAegO,gBAAgBpP,GAI7C,GAAImO,EAAS5M,SAAWjH,EAAc6H,eACpCnC,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAegB,gBAAe,GAGvC,GAAIpC,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAegB,gBAAe,GAG1CsM,MAAM,mBAMZ,GAAIP,EAAS5M,SAAWjH,EAAc+H,eACpCrC,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAekB,oBAAmB,GAE3C,GAAItC,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAekB,oBAAmB,GAG9CoM,MAAM,mBAIZ,GAAIP,EAAS5M,SAAWjH,EAAcgV,YAChClH,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAeyD,aAC1D,OAAOrE,KAAKhH,eAAemO,kBAAkBvP,GAOjD,GAAImO,EAAS5M,SAAWjH,EAAciI,mBACpCvC,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeoB,wBAAuB,GAE/C,GAAIxC,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeoB,wBAAuB,GAGlDkM,MAAM,mBAKZ,GAAIP,EAAS5M,SAAWjH,EAAckV,eACpC,OAAOpH,KAAKhH,eAAeqO,sBAAsBzP,GAOnD,GAAImO,EAAS5M,SAAWjH,EAAcmI,cAAe,CACnD,GAAI0L,EAASvM,iBAAmBrH,EAAa6T,MAC3C,OAAOhG,KAAKhH,eAAeiN,qBAAqBrO,GAC3C,GAAImO,EAASvM,iBAAmBrH,EAAasH,OAElD,GADA7B,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,2BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeU,wBAAuB,GAE/C,GAAI9B,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeU,wBAAuB,GAGlD4M,MAAM,yBAIP,GAAIP,EAASvM,iBAAmBrH,EAAa0H,MAChD,OAAImG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAeyD,WAAYzD,GAAe6D,YAC9EzE,KAAKhH,eAAekN,qBAAqBtO,QAEhD,EASN,GAAImO,EAAS5M,SAAWjH,EAAcoI,YAAa,CACjD,GAAIyL,EAASvM,iBAAmBrH,EAAa6T,MAC3C,OAAOhG,KAAKhH,eAAeiN,qBAAqBrO,GAC3C,GAAImO,EAASvM,iBAAmBrH,EAAasH,OAElD,GADA7B,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,2BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeU,wBAAuB,GAE/C,GAAI9B,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeU,wBAAuB,GAGlD4M,MAAM,yBAIP,GAAIP,EAASvM,iBAAmBrH,EAAa0H,MAChD,OAAImG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAeyD,WAAYzD,GAAe6D,YAC9EzE,KAAKhH,eAAekN,qBAAqBtO,QAEhD,EAGJ,GAAImO,EAASpM,cAAgBxH,EAAa6T,MACxC,OAAOhG,KAAKhH,eAAe8N,mBAAmBlP,GAE3C,GAAImO,EAASpM,aAAexH,EAAasH,QAC5C7B,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeY,yBAAwB,GAEhD,GAAIhC,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeY,yBAAwB,GAGnD0M,MAAM,oBAOd,GAAIP,EAAS5M,SAAWjH,EAAcqI,qBACpC3C,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAewB,sBAAqB,GAG7C,GAAI5C,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAewB,sBAAqB,GAGhD8L,MAAM,mBAOZ,GAAIP,EAAS5M,SAAWjH,EAAcuI,gBAAiB,CACrD,GAAIsL,EAASvM,iBAAmBrH,EAAa6T,MAC3C,OAAOhG,KAAKhH,eAAeiN,qBAAqBrO,GAC3C,GAAImO,EAASvM,iBAAmBrH,EAAasH,OAElD,GADA7B,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,2BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeU,wBAAuB,GAG/C,GAAI9B,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeU,wBAAuB,GAGlD4M,MAAM,yBAIP,GAAIP,EAASvM,iBAAmBrH,EAAa0H,MAChD,OAAImG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAeyD,WAAYzD,GAAe6D,YAC9EzE,KAAKhH,eAAekN,qBAAqBtO,QAEhD,EAKJ,GAAImO,EAASpM,cAAgBxH,EAAa6T,MACxC,OAAOhG,KAAKhH,eAAe8N,mBAAmBlP,GAE3C,GAAImO,EAASpM,aAAexH,EAAasH,QAC5C7B,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAeY,yBAAwB,GAEhD,GAAIhC,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAeY,yBAAwB,GAGnD0M,MAAM,oBAQd,GAAIP,EAAS5M,SAAWjH,EAAcwI,YACpCE,QAAQC,IAAIkL,GACZnO,EAAUA,EAAQyO,cACdrG,KAAKqF,iBAAiBtB,SAASnM,EAAS,CAACgJ,GAAe+D,4BAA4B,CACtF,GAAI/M,KAAW+L,GAEb,OADA3D,KAAKsF,iBACEtF,KAAKhH,eAAe2B,qBAAoB,GAG5C,GAAI/C,KAAWgM,GAElB,OADA5D,KAAKsF,iBACEtF,KAAKhH,eAAe2B,qBAAoB,GAG/C2L,MAAM,wB,6CCtWVlU,GAAYC,aAAW,SAACiV,GAAD,MAAY,CACvCC,QAAS,CACP9K,cAAe,QAEjB+K,MAAO,CACLxU,QAASsU,EAAMG,QAAQ,GACvBtU,gBAAiB,eAyDNuU,GArDQ,SAACnU,GACtB,IAAMb,EAAUN,KAKVuV,EAAeC,iBAAuB,MAC5C,EAAgC5S,mBAAS,MAAzC,mBAAO6S,EAAP,KAAiBC,EAAjB,KAKMC,EAAqB,WACzBD,EAAY,OAGR3R,EAAO6R,QAAQH,GACrB,OACE,sBAAKhV,UAAU,UAAUoV,IAAKN,EAA9B,UACE,cAAC,KAAD,CACE9U,UAAU,iBACVqV,aAboB,SAACC,GACzBL,EAAYK,EAAMC,gBAadC,aAAcN,EACd,YAAW5R,EAAO,0BAAuBwK,EACzC,gBAAc,SAGhB,cAAC2H,GAAA,EAAD,CACExU,GAAG,qBACHjB,UAAWH,EAAQ6U,QACnB7U,QAAS,CACP8U,MAAO9U,EAAQ8U,OAEjBrR,KAAMA,EACN0R,SAAUA,EACVU,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdC,gBAAiB,CACfF,SAAU,SACVC,WAAY,QAEdrS,QAAS2R,EACTY,qBAAmB,EACnBxU,UAAWwT,EAAaiB,QAlB1B,SAoBE,cAAC,IAAD,CAAkB9U,GAAIP,EAAMsV,aCyMrBC,G,qDApQbC,iBAAoB,cAAC,IAAD,CAAkBjV,GAAG,8B,KAEzCkV,wBACE,cAAC,IAAD,CAAkBlV,GAAG,sC,KAGvBmV,mBAAqB,CACnBC,OAAQ,uBACRC,YAAY,EACZC,SAAS,EACTC,kBAAkB,G,KAGpBC,0BAA4B,SAACC,GAC3B,IAAMC,EAAgD,SAAnBD,EAC/B,cACA,aACJ,OAAO,cAAC,IAAD,CAAkBzV,GAAI0V,K,KAG/BC,kBACE,gCACE,cAAC,IAAD,CAAkB3V,GAAG,gCACrB,cAAC,GAAD,CAAgB+U,KAAK,qC,KAIzBa,iBAAoB,cAAC,IAAD,CAAkB5V,GAAG,+B,KAEzC6V,iBAAoB,cAAC,IAAD,CAAkB7V,GAAG,+B,KAEzC8V,mBAAqB,SAACL,GACpB,IAAMM,EAAqBN,EACvB,mBACA,sBAEJ,OAAO,cAAC,IAAD,CAAkBzV,GAAI+V,K,KAI/BC,qBAAwB,cAAC,IAAD,CAAkBhW,GAAG,kC,KAG7CiW,eAAkB,cAAC,IAAD,CAAkBjW,GAAG,4B,KAGvCkW,yBAA4B,cAAC,IAAD,CAAkBlW,GAAG,sC,KAEjDmW,mBACE,gCACE,cAAC,IAAD,CAAkBnW,GAAG,gCACrB,cAAC,GAAD,CAAgB+U,KAAK,qC,KAIzBqB,sBAAwB,SAACC,GACvB,OACE,gCACE,cAAC,IAAD,CACErW,GAAG,0BACHwI,OAAQ,CAAE8N,UAAW,iCAASD,OAEhC,cAAC,GAAD,CAAgBtB,KAAK,iC,KAI3BwB,sBAAwB,SACtBF,EACAG,GAEA,OACE,gCACE,cAAC,IAAD,CACExW,GAAG,0BACHwI,OAAQ,CAAE8N,UAAW,iCAASD,IAAqBI,aAAcD,KAEnE,cAAC,GAAD,CAAgBzB,KAAK,iC,KAK3B2B,cAAgB,SAACzL,GACf,OACE,cAAC,IAAD,CACEjL,GAAG,sBACHwI,OAAQ,CAAEmO,SAAU1L,M,KAK1B2L,gBAAkB,SAACnB,GACjB,IAAMoB,EAAkBpB,EAAiB,cAAgB,aAEzD,OAAO,cAAC,IAAD,CAAkBzV,GAAI6W,K,KAI/BC,oBAAsB,SAACT,GACrB,OACE,gCACE,cAAC,IAAD,CACErW,GAAG,wBACHwI,OAAQ,CAAE8N,UAAW,iCAASD,OAEhC,cAAC,GAAD,CAAgBtB,KAAK,kC,KAK3BgC,8BAAgC,SAACV,GAC/B,OACE,8BACE,cAAC,IAAD,CAAkBrW,GAAG,6BAA6BwI,OAAQ,CAAE8N,UAAW,iCAASD,U,KAMtFW,oBAAsB,SACpBX,EACAY,GAEA,OACE,gCACE,cAAC,IAAD,CACEjX,GAAG,wBACHwI,OAAQ,CAAE8N,UAAW,iCAASD,IAAqBa,YAAaD,KAElE,cAAC,GAAD,CAAgBlC,KAAK,kC,KAK3BoC,gBAAkB,SAChBC,EACAC,GAEA,OACE,8BACE,cAAC,IAAD,CACErX,GAAG,0BACHwI,OAAQ,CAAE8O,WAAY,iCAASF,IAA2BG,WAAY,iCAASF,U,KAMvFG,gBAAkB,SAChBJ,EACAC,GAEA,OACE,8BACE,cAAC,IAAD,CACErX,GAAG,0BACHwI,OAAQ,CAAE8O,WAAY,iCAASF,IAA2BG,WAAY,iCAASF,U,KAOvFI,yBAA2B,SAACjM,GAC1B,OAAQ,8BACN,cAAC,IAAD,CACExL,GAAG,4BACHwI,OAAQ,CAAEgD,UAAW,iCAASA,U,KAMpCkM,yBAA2B,SAAClM,EAAmBmM,GAC7C,OAAQ,8BACN,cAAC,IAAD,CACE3X,GAAG,4BACHwI,OAAQ,CAAEgD,UAAW,iCAASA,IAAqBoM,iBAAkBD,Q,KAK3EE,cAAiB,cAAC,IAAD,CAAkB7X,GAAG,2B,KAEtC8X,cAAgB,sB,KAChBC,YAAe,cAAC,IAAD,CAAkB/X,GAAG,yB,KAMpCgY,4BACE,gCACE,cAAC,IAAD,CAAkBhY,GAAG,4CACrB,cAAC,GAAD,CAAgB+U,KAAK,iD,KAIzBkD,2BAA8B,cAAC,IAAD,CAAkBjY,GAAG,+B,KAGnDkY,sBAAyB,cAAC,IAAD,CAAkBlY,GAAG,+B,KAE9CmY,+BAAiC,CAC/B/C,OAAQ,wBACRC,YAAY,EACZC,SAAS,EACTC,kBAAkB,G,KAGpB6C,qBAAuB,cAAC,IAAD,CAAkBpY,GAAG,qC,KAE5CqY,oBACE,gCACE,cAAC,IAAD,CAAkBrY,GAAG,0CACrB,cAAC,GAAD,CAAgB+U,KAAK,+C,KAIzBuD,qBACE,gCACE,cAAC,IAAD,CAAkBtY,GAAG,yCACrB,cAAC,GAAD,CAAgB+U,KAAK,8C,KAIzBwD,qBACE,gCACE,cAAC,IAAD,CAAkBvY,GAAG,mCACrB,cAAC,GAAD,CAAgB+U,KAAK,wC,KAIzByD,8BAAiC,8BAC/B,cAAC,IAAD,CAAkBxY,GAAG,wC,KAGvByY,2BAA8B,8BAAK,cAAC,IAAD,CAAkBzY,GAAG,yC,KAGxD0Y,kBAAoB,SAACrC,GACnB,OACE,8BACE,cAAC,IAAD,CACErW,GAAG,4BACHwI,OAAQ,CAAE8N,UAAW,iCAASD,U,KAMtCsC,0BAA4B,SAACtC,EAAmBuC,GAC9C,OACE,8BACE,cAAC,IAAD,CAAkB5Y,GAAG,0CACnBwI,OAAQ,CAAE8N,UAAW,iCAASD,IAAqBwC,kBAAmB,iCAASD,aCpQpEE,G,qDACnBC,qCACE,yH,KACFC,6BACE,wD,KACFC,qCACE,oM,KACFC,mCACE,kJ,KACFC,iCACE,sL,KACFC,+BACE,mI,KAEFC,EAAI,O,KACJC,uCAAyC,EAAIpN,KAAKmN,E,KAClDE,wCAA0C,EAAI,E,KAC9CC,sCAAwC,EAAItN,KAAKmN,E,KACjDI,uCAAyC,G,KACzCC,2CAA6C,EAAIxN,KAAKmN,E,KACtDM,4CAA8C,E,KAC9CC,0CAA4C,EAAI1N,KAAKmN,E,KACrDQ,2CAA6C,E,KAC7CC,kBAAoB,EAAI,E,KACxBC,sBAAwB,GAAK7N,KAAKmN,E,KAElCW,UAAY,CACV,EAAG,+CACH,EAAG,+CACH,EAAG,+CACH,EAAG,+CACH,EAAG,+CACH,GAAI,gDACJ,GAAI,gDACJ,GAAI,gDACJC,WAAY,2D,KAGdC,gBAAkB,CAChB,4BACE,0QACF,oCACE,uuBACF,kCACE,+FACF,4BACE,umBACF,EAAG,glBACH,mBACE,sYACF,4BACE,gdACF,sBACE,scACF,GAAI,upCACJ,uCACE,wMCxDeC,G,WAUnB,WAAYC,GAA2B,IAAD,OAARpa,EAAQ,uDAAH,EAAG,0BATtCgK,SASsC,OARtCqQ,YAAc,GAQwB,KAPtC9P,4BAOsC,OANtC+P,WAAY,EAM0B,KALtCjQ,aAKsC,OAJtCC,iBAIsC,OAHtCiQ,sBAGsC,OAFtCC,eAEsC,OAiCtCC,WAAa,SAACC,GAA+C,IAA/B3P,IAA8B,yDACrD,EAAKV,QACL,EAAKA,QAAUqQ,EADD5T,QAAQC,IAAI,EAAKsD,SAAWqQ,GAE3C3P,GAAc2P,EAAOD,WAAW,GAAM,IApCN,KAuCtCE,mBAAqB,WACnB,YAAqB9N,IAAjB,EAAKxC,UAA0B,EAAKA,QAAQiQ,WAxCZ,KAgDtCM,eAAiB,SAACC,GAAmD,IAA/B9P,IAA8B,yDAC7D,EAAKT,YACL,EAAKA,YAAcuQ,EADD/T,QAAQC,IAAI,EAAKuD,aAAeuQ,GAEnD9P,GAAc8P,EAAWD,eAAe,GAAM,IAlDlD1O,KAAKmO,YAAcD,EACnBlO,KAAKlC,IAAMhK,E,4CAGb,WACE,OAAOkM,KAAKmO,a,IAGd,SAAczL,GACZ1C,KAAKmO,YAAczL,I,oBAGrB,WACE,OAAO1C,KAAKoO,W,IAGd,SAAa1L,GACX1C,KAAKoO,UAAY1L,I,iCAGnB,WACE,OAAO1C,KAAK3B,wB,IAGd,SAA0BqE,GACxB1C,KAAK3B,uBAAyBqE,I,kBAGhC,WACE,OAAO1C,KAAK7B,U,sBAcd,WACE,OAAO6B,KAAK5B,c,sCAiBd,WACE,SAAI4B,KAAK5B,aAAgB4B,KAAK5B,YAAYgQ,e,KAzEzBH,GAgEZW,UAAY,SAAC9a,EAAY+a,GAC9B,IAAM7N,EAA6B6N,EAAUnO,IAAI5M,GACjD,QAAc6M,GAAVK,EACF,MAAM,IAAIvB,MAAM,kCAAoC3L,GAEtD,OAAOkN,G,ICjDI8N,G,WAfb,aAAe,0BAFfC,kBAEc,EACZ/O,KAAK+O,aAAe,G,yDAGtB,SAAqBC,GACnB,GAAIA,KAAYzW,OAAO0W,KAAKjP,KAAK+O,cAC/B,OAAO/O,KAAK+O,aAAaC,GAEzB,IAAMhO,EAAS,IAAIiN,GAAOe,GAE1B,OADAhP,KAAK+O,aAAaC,GAAYhO,EACvBA,M,KCoDAkO,GAA+B,SAACC,GACzC,OAAO,IAAIC,KAAKC,aAAa,QAAS,CAClC7Y,MAAO,WACP8Y,SAAU,MACVC,gBAAiB,eACjBC,sBAAuB,EACvBC,sBAAuB,IACxBC,OAAOC,OAAOR,EAAoBS,QAAQ,aAAc,MAAMA,QAAQ,KAAM,OAAOC,OAAO,OAcpFC,GAAiB,SAACC,GAE3B,GAAK,KAAM9K,KAAK8K,GAAgB,CAC5B,IAAMC,EA7CuB,SAACD,GAClC,IAAIE,EAAiB,GACjBC,EAAW,GAGTC,EAAwCJ,EAAcK,MAAM,aAClE,GAAID,EAAc,CACd,IAAME,EAAmBF,EAAa,GACtCF,EAAiBF,EAAcO,UAAUD,EAAiB5X,QAI9D,IAAM8X,EAAsCN,EAAeG,MAAM,cACjE,GAAIG,EAAY,CACZ,IAAMC,EAAiBD,EAAW,GAClCL,EAAWD,EAAeK,UAAU,EAAGL,EAAexX,OAAS+X,EAAe/X,QAGlF,OAAOyX,EAASN,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IAAIA,QAAQ,IAAK,IA2BtBa,CAA6BV,GAE9DW,EAA6B,UAC3BC,EAtFc,SAACX,GACzB,IADkE,EAC9DY,EAAsB,EADwC,eAElDZ,GAFkD,IAElE,2BAAsC,CAAC,IAA5BxP,EAA2B,QACzB,KAALA,GAAiB,KAALA,GAAiB,KAALA,IACxBoQ,GAAuB,IAJmC,8BAOlE,OAA2B,GAAvBA,EACO,EAEFA,EAAsB,EAEpB,EAGA,EAuEgBA,CAAoBZ,GAI3C,OAHuB,IAAnBW,IACAD,EApE4B,SAACV,GACrC,IAD8E,EAC1Ea,EAAqB,EADqD,eAE9Db,GAF8D,IAE9E,2BAAsC,CAAC,IAA5BxP,EAA2B,QAClC,GAAIqQ,EAAqB,EAErB,MAAO,YAEI,MAANrQ,GAAmB,MAANA,GAAmB,MAANA,EAC/BqQ,GAAsB,EAGtBA,EAAqB,GAXiD,8BAe9E,MAAO,UAqD8BC,CAAgCd,IAEzC,IAAnBW,GAA2C,IAAnBA,GAAwD,YAA/BD,EAK3B,IAAnBC,EACO,CAAC,EAAG,kBAEyB,cAA/BD,EACE,CAAC,EAAG,8BAGJ,CAAC,EAAG,wBAXR,CAAC,EAAGV,GAiBf,MAAO,CAAC,EAAG,KClHZ,ICUHe,GACAC,GAEAC,GCXCC,GFFQC,GAAb,cAGE,WAAYnY,EAAqB7D,GAA0B,IAAD,iCAF1D6D,oBAE0D,OAD1D7D,WAC0D,OAK1Dic,mBAAqB,SAACC,GACpB,IAD0E,EACpEC,EAAe,IAAI5S,IADiD,eAExC2S,GAFwC,IAE1E,2BAA6D,CAAC,IAAnDE,EAAkD,QAC3D,GAAID,EAAaE,IAAID,EAAoB,IAAK,CAC5C,IAAM7R,EAAI4R,EAAa5Q,IAAI6Q,EAAoB,IAC3C7R,IACFA,EAAE+R,MAAQF,EAAoB,GAC9B7R,EAAEgS,OAAO1Z,KAAKuZ,EAAoB,UAGpCD,EAAaK,IAAIJ,EAAoB,GAAI,CACvCvQ,OAAQuQ,EAAoB,GAC5BE,KAAMF,EAAoB,GAC1BG,OAAQ,CAACH,EAAoB,OAbuC,8BAmB1E,IAFA,IACMK,EAAiB,GACvB,MAFoBpa,MAAMqa,KAAKP,EAAahV,UAE5C,eAAkC,CAA7B,IAAMwV,EAAM,KACfF,EAAe5Z,KAAK8Z,GAEtB,OAAOF,GA3BiD,KA8B1DG,2BAA6B,SAC3BC,GAGS,IAFTC,EAEQ,4DAF+BtR,EACvCuR,EACQ,wDACJC,EAAsB,IAAI3a,MAC9B,GAA2B,IAAvBwa,EAAYvZ,OACd,OAAO0Z,EAGT,IANQ,EAMFC,EAAa,EAAIJ,EAAYvZ,OAN3B,eAQauZ,GARb,IAQR,2BAAkC,CAAC,IAAxBhR,EAAuB,QAC1BqR,EAAe,EAAKrZ,eAAe4V,UACvC5N,EACA,EAAK7L,MAAMqM,YAEP8Q,EAAa,EAAKtZ,eAAeqH,QACrCW,EACA,EAAK7L,MAAM+K,SAEb,GAAImS,EAAajE,UACf,GAAyB,IAArB6D,QAEG,GAII,IAHT,EAAKjZ,eAAeuZ,kDAClBD,EACA,EAAKnd,OACL,IAEF,GAAI+c,EAAe,CACjB,IADiB,EACbM,EAAiB,EAAKT,2BACxBO,EAAWrU,UAETwU,EAAY,EAJC,eAKED,GALF,IAKjB,2BAA8B,CAAC,IAApB/d,EAAmB,QAC5Bge,GAAahe,EAAK,IANH,8BAQjB,IAAMie,EAAqC,GAC3C,GAAkB,IAAdD,EAAiB,CAAC,IAAD,iBACAD,GADA,IACnB,2BAA8B,CAAC,IAApB/d,EAAmB,QAC5Bie,EAAiB1a,MAAMvD,EAAK,GAAIA,EAAK,GAAgBA,EAAK,MAFzC,8BAInB+d,EAAYE,EAGd,IAhBiB,EAgBXC,EAAuD,GAhB5C,eAiBEH,GAjBF,IAiBjB,2BAA8B,CAAC,IAApB/d,EAAmB,QAC5Bke,EAAyB3a,KAAK,CAC5BvD,EAAK,GACLA,EAAK,GAAK2d,EACV3d,EAAK,GAAK,CAAC4d,EAAalE,gBArBX,8BAwBjBgE,EAAsBA,EAAoBtC,OACxC8C,QAKC,CACL,IADK,EACDH,EAAwB,EAAKT,2BAC/BO,EAAWpU,WAEP0U,EAAiC,GACnCH,EAAY,EALX,eAMcD,GANd,IAML,2BAA8B,CAAC,IAApB/d,EAAmB,QAC5Bge,GAAahe,EAAK,IAPf,8BASL,GAAkB,IAAdge,EAAiB,CAAC,IAAD,iBACAD,GADA,IACnB,2BAA8B,CAAC,IAApB/d,EAAmB,QAC5Bme,EAAmB5a,KAAK,CACtBvD,EAAK,GACLA,EAAK,GAAKge,EACVhe,EAAK,GAAGob,OAAO,CAACwC,EAAalE,iBALd,8BAQnBqE,EAAYI,EAEd,IAnBK,EAmBCD,EAAgC,GAnBjC,eAoBcH,GApBd,IAoBL,2BAA8B,CAAC,IAApB/d,EAAmB,QAC5Bke,EAAyB3a,KAAK,CAC5BvD,EAAK,GACLA,EAAK,GAAK2d,EACV3d,EAAK,GAAK,CAAC4d,EAAalE,gBAxBvB,8BA2BLgE,EAAsBA,EAAoBtC,OACxC8C,GAEF/X,QAAQC,IAAIsX,QAGdA,EAAoBna,KAAK,CAACgJ,EAAQoR,EAAY,MAzF1C,8BA4FR,IA5FQ,EA4FJK,EAAY,EA5FR,eA6FWN,GA7FX,IA6FR,gCAAW1d,EAAX,QAAwCge,GAAahe,EAAK,IA7FlD,8BA+FR,GAAkB,IAAdge,EAAiB,CACnB,IADmB,EACbE,EAAgC,GADnB,eAEAR,GAFA,IAEnB,2BAAwC,CAAC,IAA9B1d,EAA6B,QACtCke,EAAyB3a,KAAK,CAACvD,EAAK,GAAIA,EAAK,GAAKge,EAAWhe,EAAK,MAHjD,8BAKnB0d,EAAsBA,EAAoBtC,OACxC8C,GAGJ,OAAOR,GA1IiD,KA6I1DU,6CAA+C,SAAC7R,GAC9C,IAAMsR,EAAa,EAAKtZ,eAAeqH,QAAQW,EAAQ,EAAK7L,MAAM+K,SAClE,EACE,EAAKlH,eAAeuZ,kDAClBD,GAFJ,mBAAOQ,EAAP,UAIA,GAAsB,IAAlBA,EACF,OAAO,EAAKf,2BAA2BO,EAAWpU,WAC7C,GAAsB,IAAlB4U,EAAqB,CAC9B,IAAMC,EAAoB,EAAK/Z,eAAeqH,QAC5CiS,EAAWrU,SAAS,GACpB,EAAK9I,MAAM+K,SACX/B,QACF,OACGmU,EAAWhE,WACZyE,IAAsBT,EAAWrU,SAAS,GAInC,EAAK8T,2BACVO,EAAWrU,cACX0C,GACA,GALK,EAAKoR,2BAA2BO,EAAWrU,UAQ/C,GAAsB,IAAlB6U,EAAqB,CAC9B,IAAME,EAAqB,GAC3BV,EAAWrU,SAASzJ,KAAI,SAAC4K,GACvB,IAAM6T,EAAa,EAAKja,eAAeqH,QACrCjB,EACA,EAAKjK,MAAM+K,SAEb8S,EAAmBhb,KACjB,EAAK+Z,2BAA2BkB,EAAWhV,SAAU,YAGpD,QAAsB0C,IAAlBmS,GAA+BA,EAAgB,EAAG,MAAO,IAhLpE9S,KAAKhH,eAAiBA,EACtBgH,KAAK7K,MAAQA,KGDXqN,GAAQC,eACRyQ,GAAOvQ,YAAW,CAAEC,OAAQ,QAASL,SAAUM,IAASL,IAsBjD2Q,GAAb,cAqBE,WACEnS,EACQhI,EACR7D,GAEC,IAAD,OADAie,EACA,4DADOzS,EACP,0BAHQ3H,iBAGR,KAzBF7D,WAyBE,OAxBFke,oBAwBE,OAvBFzG,0BAuBE,OAtBF5L,YAsBE,OArBFsS,SAA0B,KAqBxB,KApBFC,cAAgB,GAoBd,KAnBFT,mBAmBE,OAlBFU,sBAkBE,OAjBFC,mCAAqC,GAiBnC,KAhBFC,+BAAiC,GAgB/B,KAfFC,8BAAgC,EAe9B,KAdFC,mBAAqB,EAcnB,KAbFC,iBAAmB,GAajB,KAZFC,yBAA2B,EAYzB,KAXFC,0BAA4B,EAW1B,KAVFC,mBAAyB,GAUvB,KATFC,sBAA6B,GAS3B,KARFC,iBAAuB,GAQrB,KAPFd,UAOE,OANFe,iBAME,OAQFC,mBAAqB,WAAO,IAAD,EAEvB,EAAKpb,eAAeuZ,kDAClB,EAAKpd,MAAM8L,SACX,EAAK9L,OAJgB,mBACxB,EAAK2d,cADmB,KACJ,EAAKU,iBADD,KAOrB,EAAKxS,OAAOlB,wBAEd,EAAKwT,SAAW,EAAKtS,OAAO7C,QAC5B,EAAKoV,cAAgBL,GAAKpQ,cAAc,CACtChP,GAAI,0CAGqB6M,IAAvB,EAAKmS,eAA+B,EAAKA,cAAgB,GAC3D,EAAKW,mCAAqCP,GAAKpQ,cAAc,CAC3DhP,GAAI,kEAEN,EAAK4f,+BAAiCR,GAAKpQ,cAAc,CACvDhP,GAAI,6DAEN,EAAK6f,8BAAgC,EACrC,EAAKC,mBAAqB,EAC1B,EAAKC,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,uDAE0B,IAAvB,EAAKgf,eACd,EAAKW,mCAAqCP,GAAKpQ,cAAc,CAC3DhP,GAAI,kEAEN,EAAK4f,+BAAiCR,GAAKpQ,cAAc,CACvDhP,GAAI,kEAEN,EAAK6f,8BACH,EAAK/G,qBAAqBQ,uCAC5B,EAAKwG,mBACH,EAAKhH,qBAAqBS,wCAC5B,EAAKwG,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,0CAE0B,IAAvB,EAAKgf,gBACd,EAAKW,mCAAqCP,GAAKpQ,cAAc,CAC3DhP,GAAI,kEAEN,EAAK4f,+BAAiCR,GAAKpQ,cAAc,CACvDhP,GAAI,kEAEN,EAAK6f,8BACH,EAAK/G,qBAAqBU,sCAC5B,EAAKsG,mBACH,EAAKhH,qBAAqBW,uCAC5B,EAAKsG,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,2CAGC,EAAKkN,OAAOjB,4BACrB,EAAKuT,SAAW,EAAKtS,OAAO5C,YAC5B,EAAKmV,cAAgBL,GAAKpQ,cAAc,CACtChP,GAAI,0CAGqB6M,IAAvB,EAAKmS,eAA+B,EAAKA,cAAgB,GAC3D,EAAKW,mCAAqCP,GAAKpQ,cAAc,CAC3DhP,GAAI,oEAEN,EAAK4f,+BAAiCR,GAAKpQ,cAAc,CACvDhP,GAAI,mEAEN,EAAK6f,8BAAgC,EACrC,EAAKC,mBAAqB,EAC1B,EAAKC,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,2DAE0B,IAAvB,EAAKgf,eACd,EAAKW,mCAAqCP,GAAKpQ,cAAc,CAC3DhP,GAAI,oEAEN,EAAK4f,+BAAiCR,GAAKpQ,cAAc,CACvDhP,GAAI,mEAEN,EAAK6f,8BACH,EAAK/G,qBAAqBY,2CAC5B,EAAKoG,mBACH,EAAKhH,qBAAqBa,4CAC5B,EAAKoG,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,4DAE0B,IAAvB,EAAKgf,eACd,EAAKW,mCAAqCP,GAAKpQ,cAAc,CAC3DhP,GAAI,oEAEN,EAAK4f,+BAAiCR,GAAKpQ,cAAc,CACvDhP,GAAI,mEAEN,EAAK6f,8BACH,EAAK/G,qBAAqBc,0CAC5B,EAAKkG,mBACH,EAAKhH,qBAAqBe,2CAC5B,EAAKkG,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,6DAE0B,IAAvB,EAAKgf,gBACV,EAAKU,kBAAoB,EAAKA,kBAAoB,GACpD,EAAKC,mCAAqCP,GAAKpQ,cAAc,CAC3DhP,GAAI,oEAEN,EAAK4f,+BAAiCR,GAAKpQ,cAAc,CACvDhP,GAAI,mEAEN,EAAK6f,8BAAgC,EAAI,EAAK/G,qBAAqBO,EACnE,EAAKyG,mBAAqB,EAC1B,EAAKC,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,6DAGN,EAAK2f,mCAAqCP,GAAKpQ,cAAc,CAC3DhP,GAAI,oEAEN,EAAK4f,+BAAiCR,GAAKpQ,cAAc,CACvDhP,GAAI,mEAEN,EAAK6f,8BAAgC,EACrC,EAAKC,mBAAqB,EAC1B,EAAKC,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,gEAKV,EAAKwf,SAAW,KAChB,EAAKI,+BAAiC,GACtC,EAAKC,8BAAgC,EACrC,EAAKC,mBAAqB,EAC1B,EAAKC,iBAAmBX,GAAKpQ,cAAc,CACzChP,GAAI,sDA9IR,KAmJF+e,6CAA+C,SAAC7R,GAE9C,IAAMsR,EAAa,EAAKtZ,eAAeqH,QAAQW,EAAQ,EAAK7L,MAAM+K,SAC5DmS,EAAe,EAAKrZ,eAAe4V,UACvC5N,EACA,EAAK7L,MAAMqM,YAEb,EACE,EAAKxI,eAAeuZ,kDAClBD,EACA,EAAKnd,OAHT,mBAAOkf,EAAP,UAKA,GAAsB,IAAlBA,EACF,OAAO,EAAKF,YAAYpC,2BAA2BO,EAAWpU,WACzD,GAAsB,IAAlBmW,EAAqB,CAC9B,IAAMC,EAAkB,EAAKtb,eAAeqH,QAC1CiS,EAAWrU,SAAS,GACpB,EAAK9I,MAAM+K,SAEb,OACGmS,EAAa/D,WACdgG,EAAgBnW,UAAYmU,EAAWrU,SAAS,GAIzC,EAAKkW,YAAYpC,2BACtBO,EAAWrU,cACX0C,GACA,GALK,EAAKwT,YAAYpC,2BAA2BO,EAAWrU,UAO3D,GAAsB,IAAlBoW,EAAqB,CAC9B,IAIIE,EAL0B,EACxBC,EAAqB,EAAKL,YAAYpC,2BAC1CO,EAAWrU,SACX,GAH4B,eAMduW,GANc,IAM9B,2BAAoC,CAAC,IAA1B7Y,EAAyB,QAC9BA,EAAElD,OAAS,IACb8b,EAAM5Y,EAAElD,SARkB,8BAW9B,IAX8B,EAWxB+Z,EAAY,GAXY,eAYVgC,GAZU,IAY9B,2BAAwC,CAAC,IAA9BC,EAA6B,QAClCA,EAAMhc,OAAS,GACjB+Z,EAAUxa,KAAK,CAACyc,EAAM,MAdI,8BAkB9B,IADA,IAAMC,EAAa,GACnB,MAAmBlC,EAAnB,eAA8B,CAAzB,IAAM/d,EAAI,KACbigB,EAAW1c,KAAK,CAACvD,EAAK,GAAIA,EAAK,GAAK8f,EAAK9f,EAAK,KAEhD,OAAOigB,EACF,YAAsB/T,IAAlB0T,GAA+BA,EAAgB,EACjD,QADF,GAvMP,KA4MFM,4BAA8B,SAACxK,GAW7B,GAVA,EAAK2J,yBAA2Bc,KAAKC,IACnC,EAAK1f,MAAMgM,UACXyT,KAAKE,IACH,EAAKnB,8BACL,EAAKC,mBAAqB,EAAKze,MAAMgM,YAIzC,EAAK4S,0BACH,EAAK5e,MAAMgM,UAAY,EAAK2S,yBACS,IAAnC,EAAKC,0BAAiC,CACxC,EAAKC,mBACH,EAAKnB,6CAA6C1I,GACpD,IAAM+J,EAAmB,EAAKC,YAAY/C,mBACxC,EAAK4C,oBAEPpZ,QAAQC,IAAIqZ,GAEZA,EAAiB1f,KAAI,SAACugB,GACpB,OAAO,EAAKd,sBAAsBjc,KAAK,CACrC+c,EAAgB/T,OAChB+T,EAAgBtD,KAAO,EAAKsC,0BAC5BgB,EAAgBrD,iBAWpB,EAAKsC,mBAAqB,GAC1B,EAAKE,iBAAmB,GACxB,EAAKD,sBAAwB,GAE/B,OAAO,EAAKA,uBAjPZjU,KAAK7K,MAAQA,EACb6K,KAAK4M,qBAAuBA,GAC5B5M,KAAKgB,OAAShB,KAAKhH,eAAe4V,UAAU5N,EAAQhB,KAAK7K,OACzD6K,KAAKoT,KAAOA,EACZpT,KAAKmU,YAAc,IAAIhD,GAAYnY,EAAgB7D,MC5CjDke,G,WAgBJ,WACE/P,EAIA0R,EACAC,EACAC,GACC,IAAD,iCAtBF5R,0BAsBE,OAlBFlO,cAkBE,OAjBF6f,yBAiBE,OAhBFE,oBAgBE,OAfFvI,0BAeE,OAdFwI,YAcE,OAbFF,cAaE,OAZFG,WAAkB,KAYhB,KAXFC,WAAY,EAWV,KAVFC,UAAiB,KAUf,KATFC,yBAA2B,EASzB,KAwBF5P,YAAc,WAEZ,IACIC,EADE4P,EAAcC,aAAaC,QAAQ,gBAGvC9P,EAAYlO,GADV8d,EAC0CG,SAASH,GAET,MAKxCA,EACFC,aAAaG,QAAQ,eAAgBD,SAASH,GAAe,GAAGK,YAEhEJ,aAAaG,QAAQ,cAAe,KAEtC,EAAKzgB,UAAS,SAACD,GAEb,OADAA,EAAQ0Q,EACD,EAAKkQ,YAAY5gB,QA3C5B,KAoDFiR,eAAiB,SAAC4P,GAOhB,IAAMC,EAA0B,EAAK3S,qBACnC,EAAK6R,eAAenM,wBACpB,EAAKmM,eAAelM,oBAEtB,EAAK7T,UAAS,SAACD,GAAD,mBAAC,eACVA,GADS,IAEZgE,OAAQjH,EAAcmH,aACtB4H,SAAU,EAAKiV,eAAeF,EAAkB7gB,QAElD,EAAKC,UAAS,SAACD,GAAD,sBACTA,MAGL,EAAKghB,qBAAqBF,IAxE1B,KA2EF3c,4BAA8B,SAAC8c,GAI7B,EAAKhhB,UAAS,SAACD,GAWb,GAAIihB,EAA+B,CACjCjhB,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcqH,oBACtBqI,gBAAgB,2BAAMzM,EAAMyM,iBAAb,IAA8BE,eAAgB3P,EAAa6T,MAAOnE,sBAAuBuU,MAG1G,IAAMC,EAA8B,EAAK/S,qBACvC,EAAK6R,eAAerJ,6BAGtB,OADA,EAAKqK,qBAAqBE,GACnB,EAAKN,YAAY5gB,GAIxBA,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAc+U,cACtBrF,gBAAgB,2BAAMzM,EAAMyM,iBAAb,IAA8BE,eAAgB,OAAQD,sBAAuBuU,MAE9F,IAAME,EAAoB,EAAKhT,qBAC7B,EAAK6R,eAAe1L,mBAGtB,OADA,EAAK0M,qBAAqBG,GACnB,EAAKP,YAAY5gB,OAlH5B,KAuHFoR,+BAAiC,SAACgQ,GAChC,EAAKnhB,UAAS,SAACD,GACb,IAAMqhB,EAA2B,EAAKlT,qBAAqB,EAAK6R,eAAerJ,6BACzE2K,EAAsB3G,GAAeyG,GACrCG,EAAyBxH,GAA6BuH,EAAoB,IAC1EE,EAAc,cAAC,GAAD,CAAoBnb,MAAOkb,IAC/C,GAA+B,IAA3BD,EAAoB,GAAU,CAChC,IAAMG,EAAwB,EAAKtT,qBAAqB,EAAK6R,eAAenJ,sBAAuB,EAAKmJ,eAAelJ,gCACvH9W,EAAK,2BACAA,GADA,IAEHyM,gBAAgB,2BAAMzM,EAAMyM,iBAAb,IAA8BE,eAAgB3P,EAAasH,MAAOsI,iBAAkB6T,SAASa,EAAoB,QAGlI,IAAMI,EAAiB,EAAK5B,oBAAoB0B,GAChD,EAAKR,qBAAqBU,GAC1B,EAAKV,qBAAqBS,OAEvB,CACH,IAAME,EAAqB,EAAKxT,qBAC9B,EAAK6R,eAAepJ,4BAGtB,EAAKoK,qBAAqBW,GAC1B,EAAKX,qBAAqBK,GAG5B,OAAO,EAAKT,YAAY5gB,OAjJ1B,KAqJF4G,wBAA0B,SAACgb,GACzB,EAAK3hB,UAAS,SAACD,GACb,GAA0B,cAAtB4hB,GAWF,IAVA5hB,EAAK,2BACAA,GADA,IAEHyM,gBAAgB,2BACXzM,EAAMyM,iBADI,IAEbE,eAAgB3P,EAAa0U,MAC7B7E,8BAA+B7M,EAAMyM,gBAAgBG,iBAAmB,IAG1EZ,UAAWhM,EAAMyM,gBAAgBG,iBAAmB,KAE5CH,gBAAgBI,8BAAgC,EAAG,CAC3D,IAAMgV,EAAgC,EAAK1T,qBAAqB,EAAK6R,eAAe7I,+BACpF,EAAK6J,qBAAqBa,QAG1B,GAAI7hB,EAAM6L,SAAW7L,EAAM8L,UAAY9L,EAAM6L,OAAO3C,uBAAwB,CAO1E,QALoCsC,IADA,EAAK4R,kDAAkD,EAAKlS,QAAQlL,EAAM6L,OAAO3C,uBAAwBlJ,EAAM+K,SAAU/K,GAAO,KAElKA,EAAMgM,UAAYhM,EAAMgM,UAAYhM,EAAMyM,gBAAgBI,8BAC1D7M,EAAMyM,gBAAgBI,8BAAgC,KAGpD7M,EAAMgM,WAAa,GAGlB,CACH,EAAK/L,UAAS,SAACD,GACbA,EAAMgE,OAASjH,EAAc6H,gBAE/B,IAAMkd,EAAmB,EAAK3T,qBAC5B,EAAK6R,eAAexL,iBACpB,EAAKwL,eAAelM,oBAGtB,OADA,EAAKkN,qBAAqBc,GACnB,EAAKlB,YAAY5gB,GAXxB,EAAK+hB,yBAgBR,GAA0B,qBAAtBH,EAAuC,CAC9C5hB,EAAK,2BACAA,GADA,IAEHyM,gBAAgB,2BAAMzM,EAAMyM,iBAAb,IAA8BE,eAAgB3P,EAAa0H,UAE5E,IAAMsd,EAAsB,EAAK7T,qBAAqB,EAAK6R,eAAehJ,qBAC1E,EAAKgK,qBAAqBgB,QAEvB,GAA0B,oBAAtBJ,EAAsC,CAC7C5hB,EAAK,2BACAA,GADA,IAEHyM,gBAAgB,2BAAMzM,EAAMyM,iBAAb,IAA8BE,eAAgB3P,EAAawU,UAE5E,IAAMyQ,EAAuB,EAAK9T,qBAAqB,EAAK6R,eAAe9I,sBAC3E,EAAK8J,qBAAqBiB,OAEvB,CACH,IAAMC,EAAuB,EAAK/T,qBAAqB,EAAK6R,eAAejJ,sBACrE0K,EAAwB,EAAKtT,qBAAqB,EAAK6R,eAAenJ,sBAAuB,EAAKmJ,eAAelJ,gCACvH,EAAKkK,qBAAqBkB,GAC1B,EAAKlB,qBAAqBS,GAE5B,OAAO,EAAKb,YAAY5gB,OArN1B,KAyNFqR,0BAA4B,SAAC8Q,GAC3B,EAAKliB,UAAS,SAACD,GACb,IAAMshB,EAAsB3G,GAAewH,GACrCZ,EAAyBxH,GAA6BuH,EAAoB,IAC1EE,EAAc,cAAC,GAAD,CAAoBnb,MAAOkb,IAC/C,GAA+B,IAA3BD,EAAoB,GAAU,CAChC,IAAMI,EAAiB,EAAK5B,oBAAoB0B,GAChD,EAAKR,qBAAqBU,GAC1B1hB,EAAK,2BACAA,GADA,IAEHyM,gBAAgB,2BAAMzM,EAAMyM,iBAAb,IAA8BE,eAAgB3P,EAAasU,MAAOxE,WAAY2T,SAASa,EAAoB,QAE5H,IAAMc,EAAuB,EAAKjU,qBAAqB,EAAK6R,eAAe/I,sBAC3E,EAAK+J,qBAAqBoB,OAEvB,CACH,IAAMC,EAAmB,EAAKlU,qBAC5B,EAAK6R,eAAezL,kBAEhByN,EAAsB,EAAK7T,qBAAqB,EAAK6R,eAAehJ,qBAC1E,EAAKgK,qBAAqBqB,GAC1B,EAAKrB,qBAAqBgB,GAE5B,OAAO,EAAKpB,YAAY5gB,OAhP1B,KAoPFuR,2BAA6B,SAAC+Q,GAC5B,EAAKriB,UAAS,SAACD,GACb,IAAMshB,EAAsB3G,GAAe2H,GACrCf,EAAyBxH,GAA6BuH,EAAoB,IAC1EE,EAAc,cAAC,GAAD,CAAoBnb,MAAOkb,IAC/C,GAA+B,IAA3BD,EAAoB,GAAU,CAChC,IAAMI,EAAiB,EAAK5B,oBAAoB0B,GAChD,EAAKR,qBAAqBU,GAC1B1hB,EAAMyM,gBAAgBM,UAAY0T,SAASa,EAAoB,IAC/DthB,EAAK,2BACAA,GADA,IAEHyM,gBAAgB,2BACXzM,EAAMyM,iBADI,IAEbE,eAAgB3P,EAAa0U,MAC7B7E,+BAAgC7M,EAAMyM,gBAAgBG,iBAAmB5M,EAAMyM,gBAAgBM,UAAY/M,EAAMyM,gBAAgBK,YAAc,EAAI9M,EAAMyM,gBAAgBK,aAE3Kd,WAAYhM,EAAMyM,gBAAgBG,iBAAmB5M,EAAMyM,gBAAgBM,UAAY/M,EAAMyM,gBAAgBK,YAAc,EAAI9M,EAAMyM,gBAAgBM,YAEvJ,IAAM8U,EAAgC,EAAK1T,qBAAqB,EAAK6R,eAAe7I,+BACpF,EAAK6J,qBAAqBa,OAEvB,CACH,IAAMQ,EAAmB,EAAKlU,qBAC5B,EAAK6R,eAAezL,kBAEhB6N,EAAuB,EAAKjU,qBAAqB,EAAK6R,eAAe/I,sBAC3E,EAAK+J,qBAAqBqB,GAC1B,EAAKrB,qBAAqBoB,GAE5B,OAAO,EAAKxB,YAAY5gB,OAjR1B,KAqRFyR,2BAA6B,SAAC8Q,GAC5B,EAAKtiB,UAAS,SAACD,GACb,IAAMshB,EAAsB3G,GAAe4H,GACrChB,EAAyBxH,GAA6BuH,EAAoB,IAC1EE,EAAc,cAAC,GAAD,CAAoBnb,MAAOkb,IAC/C,GAA+B,IAA3BD,EAAoB,GAAU,CAChC,IAAMI,EAAiB,EAAK5B,oBAAoB0B,GAWhD,GAVA,EAAKR,qBAAqBU,IAC1B1hB,EAAK,2BACAA,GADA,IAEHyM,gBAAgB,2BACXzM,EAAMyM,iBADI,IAEbE,eAAgB3P,EAAa0U,MAC7B7E,8BAA+B7M,EAAMyM,gBAAgBG,iBAAmB6T,SAAS8B,KAEnFvW,UAAWyU,SAAS8B,MAEZ9V,gBAAgBI,8BAAgC,EAAG,CAC3D,IAAMgV,EAAgC,EAAK1T,qBAAqB,EAAK6R,eAAe7I,+BACpF,EAAK6J,qBAAqBa,QAGzB,CACH,IAAMQ,EAAmB,EAAKlU,qBAC5B,EAAK6R,eAAezL,kBAEhB0N,EAAuB,EAAK9T,qBAAqB,EAAK6R,eAAe9I,sBAC3E,EAAK8J,qBAAqBqB,GAC1B,EAAKrB,qBAAqBiB,GAE5B,OAAO,EAAKrB,YAAY5gB,OAnT1B,KAuTF4R,4BAA8B,SAAC4Q,GAC7B,EAAKviB,UAAS,SAACD,GACb,IAAMyiB,EAAoBD,EAC1B,GAAsC,KAAlCA,EAAsC,CACxC,IAAME,EAAqB,EAAKC,gBAAgBF,EAAmBziB,GACnEA,EAAM6L,OAAS6W,EACf1iB,EAAM8L,SAAS5C,uBAAyBwZ,EAAmB/Z,IAC3D3I,EAAM8L,SAAStB,kBAAkBhC,GAAoBoa,gBAAiBF,GACtE,IAAMG,EAA2B/J,GAAOW,UAAUiJ,EAAmB/Z,IAAK3I,EAAMqM,YAChFwW,EAAyB5J,WAAY,EACrC,IAAM6J,EAA6B,EAAK3U,qBAAqB,EAAK6R,eAAe5I,4BACjF,EAAK4J,qBAAqB8B,GAC1B9iB,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcqH,oBACtBC,eAAgBrH,EAAa0H,MAC7BwH,YAAawW,IAGf,IAAMK,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe3I,kBAAkBwL,EAAyB7J,cAGjE,OADA,EAAKgI,qBAAqB+B,GACnB,EAAKnC,YAAY5gB,GAGxB,IAAMgjB,EAAuB,EAAK7U,qBAChC,EAAK6R,eAAerL,qBACpB,EAAKqL,eAAelM,oBAQxB,OANE9T,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAc+H,eAExB,EAAKkc,qBAAqBgC,GAErB,EAAKpC,YAAY5gB,OA3V1B,KA6YF6E,eAAiB,SAACuP,GAChB,EAAKnU,UAAS,SAACD,GAIb,GAHAA,EAAM6L,OAAS7L,EAAM8L,SACrB9L,EAAMkM,YAAclM,EAAM8L,SAC1B,EAAK2N,UAAUzZ,EAAM6L,OAAOlD,IAAK3I,EAAMqM,YAAY8M,UAAY/E,EAC3DA,EAAgB,CAClB,IAAM6O,EAA2B,EAAK9U,qBACpC,EAAK6R,eAAenL,yBACpB,EAAKmL,eAAelM,oBAQtB,OANA9T,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAciI,mBAExB,EAAKgc,qBAAqBiC,GAEnB,EAAKrC,YAAY5gB,GAG1B,IAAMgjB,EAAuB,EAAK7U,qBAChC,EAAK6R,eAAerL,qBACpB,EAAKqL,eAAelM,oBAStB,OAPA9T,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAc+H,eAExB,EAAKkc,qBAAqBgC,GAGnB,EAAKpC,YAAY5gB,OA3a1B,KAgbF+E,mBAAqB,SAACD,GACpB,EAAK7E,UAAS,SAACD,GAEb,GAAI8E,EAAc,CAChB9E,EAAMgE,OAASjH,EAAcgV,WAE7B,IAAMmR,EAAiB,EAAK/U,qBAC1B,EAAK6R,eAAepL,gBAEtB,EAAKoM,qBAAqBkC,OAGvB,CACH,IAAMpX,EAAWgN,GAAOW,UAAUzZ,EAAM6L,OAAOlD,IAAK3I,EAAMqM,YAE1D,GAAKP,EAASqN,gBAAiC3N,IAApBM,EAASuN,OAQ/B,CACHrZ,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcmI,cACtBb,eAAgBrH,EAAa0H,QAE/B,IAAMqe,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe3I,kBAAkBvL,EAASkN,cAEjD,EAAKgI,qBAAqB+B,OAjB8B,CACxD/iB,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAciI,mBAExB,IAAMie,EAA2B,EAAK9U,qBAAqB,EAAK6R,eAAenL,yBAA0B,EAAKmL,eAAelM,oBAC7H,EAAKkN,qBAAqBiC,IAc9B,OAAO,EAAKrC,YAAY5gB,OAnd1B,KAudFgS,kBAAoB,SAACmR,GAMnB,IAAMC,EAAWD,EACjB,EAAKljB,UAAS,SAACD,GACb,IAAM8L,EAAWgN,GAAOW,UAAUzZ,EAAM6L,OAAOlD,IAAK3I,EAAMqM,YACpDgX,EAAY,EAAKV,gBAAgBS,EAAUpjB,GAGjD,GAFAA,EAAM6L,OAAO7C,QAAUqa,EAAU1a,IACjC3I,EAAM6L,OAAOrB,kBAAkBhC,GAAoB6Q,OAAQgK,GACvDrjB,EAAMgM,WACR,EAAKyL,qBAAqBQ,uCAM1B,OALAjY,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcumB,mBAExB,EAAKvB,mBACE,EAAKnB,YAAY5gB,GAG1BA,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcmI,cACtBb,eAAgBrH,EAAa0H,QAE/B,IAAMqe,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe3I,kBAAkBvL,EAASkN,cAGjD,OADA,EAAKgI,qBAAqB+B,GACnB,EAAKnC,YAAY5gB,OAtf1B,KA2fFiF,uBAAyB,SAACse,GACxB,EAAKtjB,UAAS,SAACD,GAEb,GAAIujB,EAA0B,CAC5BvjB,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAckV,iBAExB,IAAMuR,EAAqB,EAAKrV,qBAC9B,EAAK6R,eAAelL,oBAEtB,EAAKkM,qBAAqBwC,OAGvB,CACHxjB,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcmI,cACtBb,eAAgBrH,EAAa0H,QAE/B,IAAMoH,EAAWgN,GAAOW,UAAUzZ,EAAM6L,OAAOlD,IAAK3I,EAAMqM,YACpD0W,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe3I,kBAAkBvL,EAASkN,cAEjD,EAAKgI,qBAAqB+B,GAE5B,OAAO,EAAKnC,YAAY5gB,OArhB1B,KAyhBFkS,sBAAwB,SAACuR,GAOvB,IAAMC,EAAeD,EACrB,EAAKxjB,UAAS,SAACD,GACb,IAAM8L,EAAWgN,GAAOW,UAAUzZ,EAAM6L,OAAOlD,IAAK3I,EAAMqM,YACpDsX,EAAgB,EAAKhB,gBAAgBe,EAAc1jB,GAIzD,GAHAA,EAAM6L,OAAO5C,YAAc0a,EAAchb,IACzC3I,EAAM6L,OAAOrB,kBAAkBhC,GAAoBgR,WAAYmK,GAE3D3jB,EAAMgM,WACR,EAAKyL,qBAAqBQ,uCAM1B,OALAjY,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcumB,mBAExB,EAAKvB,mBACE,EAAKnB,YAAY5gB,GAE1BA,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcmI,cACtBb,eAAgBrH,EAAa0H,QAE/B,IAAMqe,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe3I,kBAAkBvL,EAASkN,cAGjD,OADA,EAAKgI,qBAAqB+B,GACnB,EAAKnC,YAAY5gB,OAzjB1B,KA0mBF8Q,qBAAuB,SAAC8S,GACtB,IAAMC,EAAaD,EACnB,EAAK3jB,UAAS,SAACD,GACb,IAAM8jB,EAAU9jB,EAAMkM,YAAY6X,0BAClC,GAAID,EAAS,CAAC,IAAD,EACLra,EAAQ,EAAKyB,QAAQ4Y,EAAS9jB,EAAM+K,SACtB,EAAK0O,UAAUqK,EAAS9jB,EAAMqM,YACtC2M,YAAc6K,EAC1B7jB,EAAK,2BACAA,GADA,IAEHqE,eAAgBrH,EAAasH,MAC7B6H,WAAY1C,IAGd,IAAMua,EAAa,UAAGlL,GAAOW,UAAUhQ,EAAMd,IAAK3I,EAAMqM,mBAArC,aAAG,EAA+C2M,YAC/DiL,EAAgB,EAAK9V,qBACzB,EAAK6R,eAAe3K,cAAc2O,GAClC,EAAKhE,eAAelM,oBAItB,OAFA,EAAKkN,qBAAqBiD,GAEnB,EAAKrD,YAAY5gB,GAGxByF,QAAQC,IAAI,kCAloBhB,KAwoBFnB,uBAAyB,SAAC2f,GACxB,EAAKjkB,UAAS,SAACD,GACb,IAAMyJ,EAAQzJ,EAAMmM,WACdgY,EAAc,EAAK1K,UAAUhQ,EAAMd,IAAK3I,EAAMqM,YAE9CY,EAAwBjN,EAAMiN,sBACpC,IAAIiX,EAGG,CAGL,GADAC,EAAYlL,WAAY,EACpBjZ,EAAMgE,SAAWjH,EAAcuI,gBAEjC,GAAwB,IADAmE,EAAM2a,qBAG5B,OADA,EAAKC,sBAAsBrkB,EAAOiN,GAC3B,EAAK2T,YAAY5gB,GAG5BA,EAAK,2BACAA,GADA,IAEHqE,eAAgBrH,EAAa0H,MAC7BwH,YAAazC,IAEf,IAAMsZ,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe3I,kBAAkB8M,EAAYnL,cAGpD,OADA,EAAKgI,qBAAqB+B,GACnB,EAAKnC,YAAY5gB,GAE1B,OAvBEmkB,EAAYlL,WAAY,EACxB,EAAKoL,sBAAsBrkB,EAAOiN,GAsB7B,EAAK2T,YAAY5gB,OAtqB1B,KA0qBFqkB,sBAAwB,SAACrkB,EAAyBiN,GAChD,IAAMqX,EAAcrX,EAAsBA,EAAsB3J,OAAS,GAAG,GAC5E,IAAIghB,EAmDF,MAAM,IAAIha,MAAM,uBAlDhB,GAAItK,EAAMkM,YAAY9C,YAAckb,EAAa,CAC/CrX,EAAsBA,EAAsB3J,OAAS,GAAG,GAAKghB,EAAc,EAE3EtkB,EAAMqE,eAAiBrH,EAAa6T,MACpC,IAAM0T,EAAgB,EAAKC,2BAA2BxkB,EAAMkM,YAAYnD,UAAW/I,GAC7E+iB,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe9K,sBAAsB,EAAKuE,UAAUzZ,EAAMkM,YAAYvD,IAAK3I,EAAMqM,YAAY2M,YAAauL,IAGjH,OADA,EAAKvD,qBAAqB+B,GACnB,EAAKnC,YAAY5gB,GACnB,GAAIA,EAAMkM,YAAY9C,cAAgBkb,EAqC3C,MAAM,IAAIha,MAAM,oDA/BhB,IAJA,IAAIma,EAAkBzkB,EAAMkM,YAAYvD,IACpC3B,EAAgByB,GAAWyC,QAAQuZ,EAAiBzkB,EAAM+K,SAE1D2Z,GAAoB,EACjBzX,EAAsBA,EAAsB3J,OAAS,GAAG,KAAO0D,EAAcoC,aAAa,CAC/F6D,EAAsB1J,MAEtB,IAAMohB,EAAY3d,EAAc4d,YAAY5kB,EAAM+K,SAClD,IAAI4Z,EAGG,CACLD,GAAoB,EACpB,MAJAD,EAAkBE,EAClB3d,EAAgByB,GAAWyC,QAAQuZ,EAAiBzkB,EAAM+K,SAO9D,GAAK2Z,EAGE,CACLzX,EAAsBA,EAAsB3J,OAAS,GAAG,GAAK2J,EAAsBA,EAAsB3J,OAAS,GAAG,GAAK,EAE1HtD,EAAMkM,YAAclF,EACpB,IAAM6d,EAAsB,EAAKpL,UAAUgL,EAAiBzkB,EAAMqM,YAClErM,EAAMqE,eAAiBrH,EAAa6T,MACpC,IAAM0T,EAAgB,EAAKC,2BAA2Bxd,EAAc+B,UAAW/I,GACzE+iB,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe9K,sBAAsB2P,EAAoB7L,YAAauL,IAG7E,OADA,EAAKvD,qBAAqB+B,GACnB,EAAKnC,YAAY5gB,GAZxB,EAAK8kB,kBAAkB9kB,IA5sB7B,KAmuBF2E,yBAA2B,SAACogB,GAC1B,EAAK9kB,UAAS,SAACD,GACb,GAAI+kB,EAAoB,CACtB,IAAM7Y,EAAclM,EAAMkM,YAC1BlM,EAAK,2BACAA,GADA,IAEHwE,YAAaxH,EAAa6T,QAE5B,IAAMmU,EAAe,EAAKR,2BAA2BtY,EAAYpD,SAAU9I,GACrEilB,EAAqB,EAAKxL,UAAUvN,EAAYvD,IAAK3I,EAAMqM,YAC3D6Y,EAAoB,EAAK/W,qBAC7B,EAAK6R,eAAerK,oBAClBsP,EAAmBjM,YACnBgM,IAGJ,EAAKhE,qBAAqBkE,QAGtBllB,EAAMgE,SAAWjH,EAAcuI,gBACjC,EAAK6f,iCAAgC,GAErC,EAAKC,sCAAqC,GAI9C,OAAOplB,MA7vBT,KAiwBF2R,mBAAqB,SAAC0T,GACpB,IAAMC,EAAiBD,EACvB,EAAKplB,UAAS,SAACD,GACb,IAAMulB,EAAc,EAAK5C,gBAAgB2C,EAAgBtlB,IACzDA,EAAK,2BACAA,GADA,IAEHwE,YAAaxH,EAAasH,MAC1B8H,YAAamZ,KAGTrZ,YAAYlC,WAAWub,GAAa,GAE1C,IAAMtB,EAAgB,EAAK9V,qBACzB,EAAK6R,eAAe3K,cAAcyD,GAAOW,UAAU8L,EAAY5c,IAAK3I,EAAMqM,YAAY2M,aACtF,EAAKgH,eAAelM,oBAItB,OAFA,EAAKkN,qBAAqBiD,GAEnB,EAAKrD,YAAY5gB,OAnxB1B,KAuxBFyE,wBAA0B,SAACyf,GACzB,EAAKjkB,UAAS,SAACD,GACb,IAAMoM,EAAcpM,EAAMoM,YACpBoZ,EAAqB1M,GAAOW,UAAUrN,EAAYzD,IAAK3I,EAAMqM,YACnE,IAAK6X,EAAO,CACVsB,EAAmBvM,WAAY,EAC/BjZ,EAAK,2BACAA,GADA,IAEHkM,YAAaE,EACb/H,eAAgBrH,EAAa0H,QAE/B0H,EAAY/C,sBAAwB,EACpC,IAAMkb,EAAgB,EAAKC,2BAA2BpY,EAAYrD,UAAW/I,GACvE+iB,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAe1I,0BAA0BkO,EAAmBxM,YAAauL,IAGhF,OADA,EAAKvD,qBAAqB+B,GACnB,EAAKnC,YAAY5gB,GAU1B,OAPEwlB,EAAmBvM,WAAY,EAC3BjZ,EAAMgE,SAAWjH,EAAcuI,gBACjC,EAAK6f,kCAEL,EAAKC,uCAGF,EAAKxE,YAAY5gB,OAlzB1B,KAuzBFylB,iBAAmB,WACjB,EAAKxlB,UAAS,SAACD,GAEb,IAAM0lB,EAAejd,GAAWyC,QAAQlL,EAAM6L,OAAOlD,IAAK3I,EAAM+K,SAC3D/K,EAAMsM,uBAAsBtM,EAAMsM,qBAAuB,IAHrB,qBAKjBoZ,EAAa5c,UALI,IAKzC,2BAA+C,CAAC,IAArCqB,EAAoC,QAC7C,GAAI2O,GAAOW,UAAUtP,EAAWnK,EAAMqM,YAAY4M,UAE7B,IADA,EAAKmE,kDAAkD3U,GAAWyC,QAAQf,EAAWnK,EAAM+K,SAAU/K,GAAO,KAExHA,EAAMsM,qBAAqBnB,SAAShB,IACvCnK,EAAMsM,qBAAqBzJ,KAAKsH,KAVC,8BAczC,GAA0C,IAAtCnK,EAAMsM,qBAAqBhJ,OAAc,CAC3C,IAAM4I,EAAc,EAAKhB,QAAQlL,EAAMsM,qBAAqB,GAAItM,EAAM+K,SAChEka,EAAqB,EAAKxL,UAAUzZ,EAAMsM,qBAAqB,GAAItM,EAAMqM,YAC/ErM,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcuI,gBACtBd,YAAaxH,EAAa6T,MAC1B3E,YAAaA,EACb7H,eAAgBrH,EAAaiP,kBAE/B,IAAMiZ,EAAoB,EAAK/W,qBAC7B,EAAK6R,eAAevK,oBAAoBwP,EAAmBjM,cAE7D,EAAKgI,qBAAqBkE,QAG1Bzf,QAAQC,IAAI,sCACZ,EAAKqc,mBAEP,OAAO,EAAKnB,YAAY5gB,OAz1B1B,KA41BF2lB,sBAAwB,WACtB,EAAK1lB,UAAS,SAACD,GACb,GAA0C,IAAtCA,EAAMsM,qBAAqBhJ,OAAc,CAC3C,IAAM4I,EAAc,EAAKhB,QAAQlL,EAAMsM,qBAAqB,GAAItM,EAAM+K,SAChEka,EAAqB,EAAKxL,UAAUzZ,EAAMsM,qBAAqB,GAAItM,EAAMqM,YAC/ErM,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcuI,gBACtBd,YAAaxH,EAAa6T,MAC1B3E,YAAaA,EACb7H,eAAgBrH,EAAaiP,kBAE/B,IAAMiZ,EAAoB,EAAK/W,qBAC7B,EAAK6R,eAAevK,oBAAoBwP,EAAmBjM,cAE7D,EAAKgI,qBAAqBkE,QAG1B,EAAKnD,mBAEP,OAAO,EAAKnB,YAAY5gB,OAh3B1B,KAq3BFqF,qBAAuB,SAACugB,GACtB,EAAK3lB,UAAS,SAACD,GAQb,OAPI4lB,GACF,EAAKxM,WAAWpZ,EAAM6L,OAAO/C,SAAS,GAAI9I,EAAM6L,OAAO/C,SAAS,IAAI,GACpE,EAAKiZ,oBAGL,EAAK0D,mBAEA,EAAK7E,YAAY5gB,OA93B1B,KAk4BFwF,oBAAsB,SAACqgB,GACrB,EAAK5lB,UAAS,SAACD,GACb,GAAI6lB,EAAa,CACf,IAAMC,EAAyB,IAAI9H,GAAuBhe,EAAM6L,OAAOlD,IAAK,EAAM3I,GAClF8lB,EAAuBtG,4BAA4Bxf,EAAM8L,SAASnD,KAClElD,QAAQC,IAAIogB,GAIZrgB,QAAQC,IAAI,oCAGZD,QAAQC,IAAI,SAEd,OAAO,EAAKkb,YAAY5gB,OAh5B1B,KAo5BF+lB,yBAA2B,SAACvZ,GAC1B,EAAKvM,UAAS,SAACD,GAMb,OALAA,EAAK,2BACAA,GADA,IAEHwM,qBAAsBA,IAExB,EAAKuV,mBACE,EAAKnB,YAAY5gB,OA35B1B,KA+5BF8kB,kBAAoB,SAAC9kB,GACnB,OAAQA,EAAMgE,QACZ,KAAKjH,EAAcmI,cACjB,EAAK8gB,mCACL,MACF,KAAKjpB,EAAcoI,YACjBnF,EAAMkM,YAAclM,EAAM6L,OAC1B,EAAKsZ,kCACL,MACF,KAAKpoB,EAAcqH,oBACjBpE,EAAMkM,YAAclM,EAAM6L,OACrB7L,EAAMkN,kBAGT,EAAKiY,kCAFL,EAAKa,mCAMP,MACF,KAAKjpB,EAAcuI,gBACjBtF,EAAMkM,YAAc,EAAKhB,QAAQlL,EAAMsM,qBAAqB,GAAItM,EAAM+K,SACtE,EAAKqa,yCAp7BT,KAy7BFY,iCAAmC,WACjC,EAAK/lB,UAAS,SAACD,GACb,IAAM8L,EAAW9L,EAAM6L,OACjBoa,EAAiBnN,GAAOW,UAAU3N,EAASnD,IAAK3I,EAAMqM,YACtD6Z,EAAsB,EAAK9I,kDAAkDpd,EAAM8L,SAAU9L,GAAO,GAE1G,GAAIA,EAAM6L,SAAW7L,EAAM8L,UAAY9L,EAAM8L,SAAS5C,uBAAwB,CAC5E,IAAMid,EAA8B,EAAK/I,kDAAkD,EAAKlS,QAAQlL,EAAM8L,SAASnD,IAAK3I,EAAM+K,SAAU/K,GAAO,GACnJ,IAAMkmB,GAA+C,IAAxBA,EAA4B,CACvDlmB,EAAK,2BACAA,GADA,IAEHwE,YAAaxH,EAAa6T,MAC1BxM,eAAgBrH,EAAaiP,gBAC7BiB,mBAAmB,IAErB,IAAMgY,EAAoB,EAAK/W,qBAC7B,EAAK6R,eAAevK,oBAAoBwQ,EAAejN,cAGzD,OADA,EAAKgI,qBAAqBkE,GACnB,EAAKtE,YAAY5gB,GAO1B,QALoCwL,IAAhC2a,IACFnmB,EAAMgM,UAAYhM,EAAMgM,UAAYhM,EAAMyM,gBAAgBI,8BAC1D7M,EAAMyM,gBAAgBI,8BAAgC,KAGpD7M,EAAMgM,WAAa,GAGlB,CACHhM,EAAMgE,OAASjH,EAAc6H,aAC7B,IAAMkd,EAAmB,EAAK3T,qBAC5B,EAAK6R,eAAexL,iBACpB,EAAKwL,eAAelM,oBAGtB,OADA,EAAKkN,qBAAqBc,GACnB,EAAKlB,YAAY5gB,GATxB,EAAK+hB,mBAaT,GAA4B,IAAxBmE,EAQF,OAPAlmB,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcumB,mBAIxB,EAAKvB,mBACE,EAAKnB,YAAY5gB,GAG1B,GAAyB,OAArB8L,EAAS9C,SAAoBhJ,EAAMgM,WAAa,EAAKyL,qBAAqBU,sCAE5E,OADA,EAAK4J,mBACE,EAAKnB,YAAY5gB,GAG1B,GAA6B,OAAzB8L,EAAS7C,aAAwBjJ,EAAMgM,WAAa,EAAKyL,qBAAqBc,0CAEhF,OADA,EAAKwJ,mBACE,EAAKnB,YAAY5gB,GAE1BA,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcoI,YACtBX,YAAaxH,EAAa6T,MAC1B3E,YAAalM,EAAM8L,SACnBzH,eAAgBrH,EAAaiP,kBAE/B,IAAMiZ,EAAoB,EAAK/W,qBAC7B,EAAK6R,eAAevK,oBAAoBwQ,EAAejN,cAGzD,OADA,EAAKgI,qBAAqBkE,GACnB,EAAKtE,YAAY5gB,OAhgC1B,KAogCFwkB,2BAA6B,SAAC4B,EAA2BpmB,GACvD,OAAO,8CAAeomB,EAAW/mB,KAAI,SAACuK,GAAD,OAAckP,GAAOW,UAAU7P,EAAU5J,EAAMqM,YAAY2M,eAAa9V,QAAO,SAAAzE,GAAI,MAAa,KAATA,KAAa4nB,KAAK,MAAvI,UArgCP,KAwgCFtE,iBAAmB,WACjB,EAAK9hB,UAAS,SAACD,GACbA,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcwI,YAExB,IAAM+gB,EAAgB,EAAKnY,qBAAqB,EAAK6R,eAAexJ,cAAe,EAAKwJ,eAAelM,oBAEvG,OADA,EAAKkN,qBAAqBsF,GACnB,EAAK1F,YAAY5gB,OAhhC1B,KAqhCFmlB,gCAAkC,WAAyB,IAAxBoB,IAAuB,yDACxD,EAAKtmB,UAAS,SAACD,GACb,GAAIumB,GAAevmB,EAAMkM,YAAYpD,SAASxF,OAAS,EAAG,CAExDtD,EAAMqE,eAAiBrH,EAAaiP,gBACpCjM,EAAMwE,YAAcxH,EAAa0H,MACjC,IAAM8hB,EAAa,EAAK/M,UAAUzZ,EAAMkM,YAAYvD,IAAK3I,EAAMqM,YAAY2M,YACrEyN,EAA6B,EAAKtY,qBACtC,EAAK6R,eAAetK,8BAApB,UAAqD8Q,IAAe,EAAKxG,eAAelM,oBAG1F,OADA,EAAKkN,qBAAqByF,GACnB,EAAK7F,YAAY5gB,GAG1B,GAA6B,OAAzBA,EAAM6L,OAAO7C,QAEf,OADA,EAAK+Y,mBACE,EAAKnB,YAAY5gB,GAE1B,IAAM0mB,EAAa,EAAKtJ,kDAAkDpd,EAAM6L,OAAQ7L,GAAO,GACzF2mB,EAAuI,IAA/G3mB,EAAM6L,OAAO/C,SAAS5F,QAAO,SAAA0jB,GAAU,OAAO9N,GAAOW,UAAUmN,EAAM5mB,EAAMqM,YAAY4M,aAAa3V,OAC5H4Z,EAAepE,GAAOW,UAAUzZ,EAAM6L,OAAOlD,IAAK3I,EAAMqM,YAG9D,GAAIrM,EAAM6L,SAAW7L,EAAM8L,UAAsD,OAA1C9L,EAAM8L,SAAS5C,uBAAiC,CAOrF,QALoCsC,IADA,EAAK4R,kDAAkD,EAAKlS,QAAQlL,EAAM8L,SAAS5C,uBAAwBlJ,EAAM+K,SAAU/K,GAAO,KAEpKA,EAAMgM,UAAYhM,EAAMgM,UAAYhM,EAAMyM,gBAAgBI,8BAC1D7M,EAAMyM,gBAAgBI,8BAAgC,GAGpD7M,EAAMgM,WAAa,EAErB,OADA,EAAK+V,mBACE/hB,EAGPA,EAAMgE,OAASjH,EAAc6H,aAC7B,IAAMkd,EAAmB,EAAK3T,qBAC5B,EAAK6R,eAAexL,iBACpB,EAAKwL,eAAelM,oBAGtB,OADA,EAAKkN,qBAAqBc,GACnB,EAAKlB,YAAY5gB,GAG5B,GAAqC,IAAjCA,EAAM6L,OAAO/C,SAASxF,QAAgBqjB,GAAwC,IAAfD,EAAkB,CACnF,IAAMG,EAAgB/N,GAAOW,UAAUzZ,EAAM6L,OAAO/C,SAAS,GAAI9I,EAAMqM,YACjEya,EAAgBhO,GAAOW,UAAUzZ,EAAM6L,OAAO/C,SAAS,GAAI9I,EAAMqM,YACvE,IAAK6Q,EAAa/D,UAEhB,OADA,EAAK4I,mBACE,EAAKnB,YAAY5gB,GAE1B,GAAqC,IAAjCA,EAAM6L,OAAO/C,SAASxF,OAExB,OADA,EAAKye,mBACE,EAAKnB,YAAY5gB,GAG1B,GAAI6mB,EAAc5N,UAAW,CAC3BjZ,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcqI,qBAExB,IAAM2hB,EAAmB,EAAK5Y,qBAAqB,EAAK6R,eAAelK,gBAAgB+Q,EAAc7N,YAAa8N,EAAc9N,cAEhI,OADA,EAAKgI,qBAAqB+F,GACnB,EAAKnG,YAAY5gB,GAGxBA,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAcqI,qBAExB,IAAM2hB,EAAmB,EAAK5Y,qBAAqB,EAAK6R,eAAe7J,gBAAgB0Q,EAAc7N,YAAa8N,EAAc9N,cAEhI,OADA,EAAKgI,qBAAqB+F,GACnB,EAAKnG,YAAY5gB,GAK1B,OADA,EAAKylB,mBACE,EAAK7E,YAAY5gB,OAlmC5B,KAymCFolB,qCAAuC,WAAyB,IAAxBmB,IAAuB,yDAC7D,EAAKtmB,UAAS,SAACD,GACb,GAAIumB,GAAevmB,EAAMkM,YAAYpD,SAASxF,OAAS,EAAG,CAExDtD,EAAMqE,eAAiBrH,EAAaiP,gBACpCjM,EAAMwE,YAAcxH,EAAa0H,MAEjC,IAAM+hB,EAA6B,EAAKtY,qBACtC,EAAK6R,eAAetK,8BAApB,UAAqD1V,EAAMkM,YAAYvD,MAAQ,EAAKqX,eAAelM,oBAGrG,OADA,EAAKkN,qBAAqByF,GACnB,EAAK7F,YAAY5gB,GAI1B,OAFAA,EAAMsM,qBAAuBtM,EAAMsM,qBAAqBpJ,QAAO,SAAA5D,GAAI,OAAIA,IAASU,EAAMsM,qBAAqB,MAC3G,EAAKqZ,wBACE3lB,MAxnCT,KA8nCFghB,qBAAuB,SAAC5T,GACtB,EAAKnN,UAAS,SAACD,GASb,OARIqC,MAAM2kB,QAAQ5Z,GAChBpN,EAAMoN,SAAN,uBAAqBpN,EAAMoN,UAA3B,aAAwCA,IAGxCpN,EAAMoN,SAAN,uBAAqBpN,EAAMoN,UAA3B,CAAqCA,IAIhC,EAAKwT,YAAY5gB,OAxoC1B,KA4oCFinB,cAAgB,WACd,IAAMxkB,EAAU,EAAK0L,qBAAqB,EAAK6R,eAAetJ,YAAa,CACzE1C,YAAY,IAGd,EAAKgN,qBAAqBve,IAjpC1B,KAopCFkgB,gBAAkB,SAAC9I,EAAkB7Z,GACnC,IAAMknB,EAAY,IAAIpO,GAAOe,EAAU,EAAKsN,eAAennB,EAAMrB,KACjEqB,EAAMqM,WAAWmQ,IAAI0K,EAAUve,IAAKue,GACpC,IAAME,EAAU,IAAI3e,GAAWye,EAAUve,IAAK,GAE9C,OADA3I,EAAM+K,QAAQyR,IAAI4K,EAAQze,IAAKye,GACxBA,GAzpCP,KA2pCFC,gBAAkB,SAACrnB,EAAYrB,GAC7B,IAAMuoB,EAAY,IAAIpO,GAAO,GAAIna,GACjCqB,EAAMqM,WAAWmQ,IAAI0K,EAAUve,IAAKue,GACpC,IAAME,EAAU,IAAI3e,GAAWye,EAAUve,IAAK,GAE9C,OADA3I,EAAM+K,QAAQyR,IAAI4K,EAAQze,IAAKye,GACxBA,GAhqCP,KAkqCFrG,eAAiB,SAAClH,EAAkB7Z,GAClC,IAAMknB,EAAY,IAAIpO,GAAOe,EAAU,EAAKsN,eAAennB,EAAMrB,KACjEuoB,EAAUjO,WAAY,EACtBjZ,EAAMqM,WAAWmQ,IAAI0K,EAAUve,IAAKue,GACpC,IAAME,EAAU,IAAI3e,GAAWye,EAAUve,IAAK,GAG9C,OAFAye,EAAQve,MAAMhG,KAAK,CAAC2F,GAAoBsD,SAAUob,EAAUve,MAC5D3I,EAAM+K,QAAQyR,IAAI4K,EAAQze,IAAKye,GACxBA,GAzqCP,KA4qCF3N,UAAY,SAAC9a,EAAY+a,GACvB,IAAM7N,EAA6B6N,EAAUnO,IAAI5M,GACjD,QAAc6M,GAAVK,EACF,MAAM,IAAIvB,MAAM,kCAAoC3L,GAEtD,OAAOkN,GAjrCP,KAorCFX,QAAU,SAACvM,EAAYoM,GACrB,IAAMO,EAA+BP,EAAQQ,IAAI5M,GACjD,QAAY6M,GAARF,EACF,MAAM,IAAIhB,MAAM,gCAAkC3L,GAEpD,OAAO2M,GAzrCP,KA4rCF6b,eAAiB,SAACxoB,GAKhB,OAJA,EAAKsB,UAAS,SAACD,GAEb,OADAA,EAAMrB,GAAKqB,EAAMrB,GAAK,EACf,EAAKiiB,YAAY5gB,MAEnBrB,GAjsCP,KAosCFya,WAAa,SAACkO,EAAwBC,EAAyB7d,GAC7D,EAAKzJ,UAAS,SAACD,GAKb,OAJAyI,GAAWyC,QAAQoc,EAAgBtnB,EAAM+K,SAAS/B,QAAUue,EACxD7d,IACFjB,GAAWyC,QAAQqc,EAAiBvnB,EAAM+K,SAAS/B,QAAUse,GAExD,EAAK1G,YAAY5gB,OA1sC1B,KAgtCFwnB,6BAA+B,SAAClc,EAAkBtL,GAIhD,IAA6B,IAHF8Y,GAAOW,UAAUnO,EAAK3C,IAAK3I,EAAMqM,YAG7C4M,UAAqB,OAAO,EACtC,GAA8B,IAA1B3N,EAAKvC,UAAUzF,OAAnB,CAEH,IADG,EACGmkB,EAAoC,GADvC,eAEoBnc,EAAKvC,WAFzB,IAEH,2BAAuC,CAAC,IAA7Ba,EAA4B,QAC/B8d,EAAO,EAAKF,6BAA6B/e,GAAWyC,QAAQtB,EAAU5J,EAAM+K,SAAU/K,QAChFwL,GAARkc,GACFD,EAAmB5kB,KAAK,EAAI6kB,IAL7B,8BAQH,OAAkC,IAA9BD,EAAmBnkB,YAAc,EACzBmc,KAAKC,IAAL,MAAAD,KAAYgI,KA/tC1B,KAmuCFrK,kDAAoD,SAACsI,EAA0B1lB,GAI7E,IAAM2nB,EAAW,EAAKH,6BAA6B9B,EAAc1lB,GACjE,QAAiBwL,IAAbmc,EAAwB,MAAO,CAAC,EAAGA,GAClC,GAAoC,GAAhCjC,EAAa5c,SAASxF,OAAa,MAAO,MAACkI,OAAWA,GAE7D,IADG,EACGoc,EAAiD,GADpD,eAEqBlC,EAAa5c,UAFlC,IAEH,2BAA+C,CAAC,IAArCqB,EAAoC,QAC7Cyd,EAAa/kB,KACX,EAAKua,kDAAkD3U,GAAWyC,QAAQf,EAAWnK,EAAM+K,SAAU/K,KAJtG,8BAQH4nB,EAAaC,MAAK,SAACrhB,EAAGshB,GACpB,YAAYtc,GAARhF,EAAE,SAA2BgF,GAARsc,EAAE,GAAwBthB,EAAE,GAAKshB,EAAE,QAChDtc,GAARhF,EAAE,SAA2BgF,GAARsc,EAAE,GAAwB,GAC3C,KAEV,kBACEF,EAAa,GADf,GAAOG,EAAP,KAAkCC,EAAlC,KAGA,YAAiCxc,GAA7Buc,EACK,MAACvc,OAAWA,GAEd,CAACuc,EAA4B,EAAGC,IA7vCzC,KAgwCFC,MAAQ,WACN,IAAMC,EAAO,EACT,EAAK/H,YACP,EAAKD,WAAaiI,aAAY,WACL,OAAnBD,EAAK9H,YACP8H,EAAK/H,WAAY,EACjB3d,EAAsC,CAAE4lB,OAAQF,EAAK9H,YAErD8H,EAAK9H,UAAY,KACjBiI,cAAc,EAAKnI,eAEpB,OA3wCL,KA8wCFU,YAAc,SAAC5gB,GAGb,OAFA,EAAKioB,QACL,EAAK7H,UCxzCM,SAAuBpgB,GACpC,MAAO,CACL+K,QAAS/K,EAAM+K,QACfsB,WAAYrM,EAAMqM,WAClBP,SAAU9L,EAAM8L,UDozCCwc,CAActoB,GACxBA,GAjxCP,KAmxCF6P,iBAAmB,SAAC7C,GAClB,EAAK/M,UAAS,SAACD,GACb,OAAIgN,GAAwC,IAAxBA,EAAa1J,QAC/BtD,EAAMoN,SAAWJ,EACVhN,GAEFA,MAzxCT,KA4xCF6H,aAAe,WACb,EAAK5H,UAAS,SAACD,GAIb,OAHAA,EAAQmN,GACR1H,QAAQC,IAAIyH,IAEL,EAAKyT,YAAY5gB,MAE1B,IAAMiM,EAAkB,EAAKkC,qBAAqB,EAAK6R,eAAepM,kBACtE,EAAKoN,qBAAqB/U,IAnyC1BpB,KAAKsD,qBAAuBA,EAC5BtD,KAAK5K,SAAW4f,EAChBhV,KAAKiV,oBAAsBA,EAC3BjV,KAAKmV,eAAiB,IAAIA,GAC1BnV,KAAK4M,qBAAuB,IAAIA,GAChC5M,KAAKoV,OAAS,IAAItG,GAClB9O,KAAKkV,SAAWA,E,uDAOlB,WAAsB,IAAD,OAEnBvd,KAEA,IAAMI,EAAeJ,IAAqCgO,WAAU,SAAA/N,GAClE,EAAKgO,iBAEPjO,GAAuCI,K,6BA2UzC,SAAgB2lB,GAAiC,IAAD,OAM9C1d,KAAK5K,UAAS,SAACD,GACb,IAAMmhB,EAAoB,EAAKhT,qBAC7B,EAAK6R,eAAe1L,mBAEhBgN,EAAsB3G,GAAe4N,GACrChH,EAAyBxH,GAA6BuH,EAAoB,IAC1EE,EAAc,cAAC,GAAD,CAAoBnb,MAAOkb,IAC/C,GAA+B,IAA3BD,EAAoB,GAAU,CAChC,IAAMQ,EAAmB,EAAK3T,qBAC5B,EAAK6R,eAAexL,iBACpB,EAAKwL,eAAelM,oBAEhB4N,EAAiB,EAAK5B,oBAAoB0B,GAChD,EAAKR,qBAAqBU,IAE1B1hB,EAAK,2BACAA,GADA,IAEHgE,OAAQjH,EAAc6H,aACtBoH,UAAWyU,SAASa,EAAoB,OAEhCtV,WAAa,GACrB,EAAK+V,mBAEP,EAAKf,qBAAqBc,OACrB,CACL,IAAMO,EAAmB,EAAKlU,qBAC5B,EAAK6R,eAAezL,kBAGtB,EAAKyM,qBAAqBqB,GAC1B,EAAKrB,qBAAqBG,GAI5B,OAAO,EAAKP,YAAY5gB,Q,kCAqL5B,SAAqByC,GAAwB,IAAD,OACpC+lB,EAAiB/H,SAAShe,GAChCoI,KAAK5K,UAAS,SAACD,GAEb,GADAA,EAAMkM,YAAY9C,YAAcof,EACT,IAAnBA,EAAsB,CACxB,IAAMC,EAAWzoB,EAAMkM,YAAY0Y,YAAY5kB,EAAM+K,SACrD,GAAI0d,EAAU,CACZ,IAAMxe,EAAS,EAAKiB,QAAQud,EAAUzoB,EAAM+K,SAC5C/K,EAAMkM,YAAcjC,EACpB,IAAMgD,EAAwBjN,EAAMiN,sBACpC,EAAKoX,sBAAsBrkB,EAAOiN,QAElC,EAAK6X,kBAAkB9kB,GAEzB,OAAO,EAAK4gB,YAAY5gB,GAK1B,IAFA,IAAM0oB,EAAsD,IAAvC1oB,EAAMkM,YAAYnD,UAAUzF,OAC7CqlB,EAAS3oB,EAAMrB,GACV0M,EAAI,EAAGA,EAAIrL,EAAMkM,YAAY9C,YAAaiC,IAAK,CACtD,IAAM5B,EAAQ,EAAK4d,gBAAgBrnB,EAAO2oB,KAC1C3oB,EAAMkM,YAAY1C,UAAUC,GAAO,GAErCzJ,EAAMrB,GAAKgqB,EAC+E,IAAtF3oB,EAAMiN,sBAAsB/J,QAAO,SAAA0lB,GAAC,OAAIA,EAAE,KAAO5oB,EAAMkM,YAAYtD,UAAQtF,QAC7EtD,EAAMiN,sBAAsBpK,KAAK,CAAC7C,EAAMkM,YAAYtD,OAAQ,IAG9D5I,EAAMqE,eAAiBrH,EAAa6T,MACpC,IAAM2V,EAAa,EAAK/M,UAAUzZ,EAAMkM,YAAYvD,IAAK3I,EAAMqM,YAAY2M,YAC3E,GAAI0P,EAAc,CAChB,IAAM3F,EAAuB,EAAK5U,qBAChC,EAAK6R,eAAejL,sBAAsByR,IAE5C,EAAKxF,qBAAqB+B,OAEvB,CACH,IAAMwB,EAAgB,EAAKC,2BAA2BxkB,EAAMkM,YAAYnD,UAAW/I,GAC7E+iB,EAAuB,EAAK5U,qBAAqB,EAAK6R,eAAe9K,sBAAsBsR,EAAYjC,IAC7G,EAAKvD,qBAAqB+B,GAG5B,OAAO,EAAKnC,YAAY5gB,U,KAmsBfke,M,SEl1CT2K,G,cAQJ,WACElqB,EACAmqB,EACAhmB,EACAiF,EACAghB,GACC,0BAbHpqB,QAaE,OAZFmqB,UAYE,OAXFhmB,UAWE,OAVFiF,cAUE,OATFghB,YASE,OARFC,WAAY,EAQV,KAPFC,aAAc,EAQZpe,KAAKlM,GAAKA,EACVkM,KAAKie,KAAOA,EACZje,KAAK/H,KAAOA,EACZ+H,KAAK9C,SAAWA,EAChB8C,KAAKke,OAASA,KAGLG,GAAb,cAUE,WAAY7iB,EAAevD,GAAa,0BATxCuD,MAAQ,GAS+B,KARvC8iB,gBAQuC,OAPvCC,SAOuC,EACrCve,KAAKxE,MAAQA,EACbwE,KAAKue,IAAMtmB,EACX+H,KAAKse,YAAa,KAGPN,MCtCTQ,G,cAWJ,WACE1qB,EACAmqB,EACAQ,EACAviB,EACAV,GAGC,IAFDkjB,EAEA,uDAFe,GACfC,EACA,uDADe,GACf,0BAlBF7qB,QAkBE,OAjBFmqB,KAAO,aAiBL,KAhBFQ,YAgBE,OAfFviB,YAeE,OAdFV,WAcE,OAbFojB,UAAW,EAaT,KAXFF,kBAWE,OAVFC,kBAUE,EACA3e,KAAKlM,GAAKA,EACVkM,KAAKie,KAAOA,EACZje,KAAKye,OAASA,EACdze,KAAK9D,OAASA,EACd8D,KAAKxE,MAAQA,EACbwE,KAAK0e,aAAeA,EACpB1e,KAAK2e,aAAeA,KAITH,MC9BFK,GAAb,cAGE,WAAYC,EAAyB1f,GAAkB,0BAFvDA,YAEsD,OADtD0f,cACsD,EACpD9e,KAAK8e,SAAWA,EAChB9e,KAAKZ,OAASA,KPGd2f,IAAY,OAAQC,GAAW,OAC7BC,GAAc,CAAC,CAAC,GAAI,EAAE,EAAG,GAAI,EAAE,EAAG,EAAG,GAAI,EAAE,GAAI,EAAG,EAAG,IACvDC,GAAe,IAAIxgB,IACnBygB,GAAiB,IAAI3nB,MAGnB4nB,GAAW,IA2BXC,GAAY,SAACC,EAAyCpf,GAGxD,IAFA,IAAMqf,EAAiB,IAAI/nB,MAElBgJ,EAAIue,GAAUve,GAAKwe,GAAUxe,IAAK,CACvC,IAAMgf,EAAyBF,EAAS5e,IAAIF,GAE5C,QAA+BG,IAA3B6e,EAAsC,CAAC,IAAD,iBACnBA,GADmB,yBAC3B/e,EAD2B,QAG7B8e,EAAejf,SAASG,EAAK3M,KAC9ByrB,EAAevnB,KAAKyI,EAAK3M,IAE7B,IAAM2rB,EAAc7hB,GAAWyC,QAAQuV,SAASnV,EAAK3M,IAAKoM,GAE1D,GAAIM,IAAMue,GAAU,CAChB,IAAIW,EAAY,EACVC,EAAqBF,EAAYxhB,SACvC0hB,EAAmBnrB,KAAI,SAAC8K,GACpB,IAAMsgB,EAAIV,GAAaxe,IAAIpB,QACjBqB,IAANif,IACAF,GAAaE,EAAE1B,WAGW,IAA9ByB,EAAmBlnB,SACnBgI,EAAKyd,OAASwB,EAAYC,EAAmBlnB,QAErD,IAAMonB,EAAgBJ,EAAYthB,QAAUshB,EAAYthB,QAAUshB,EAAYrhB,YAAcqhB,EAAYrhB,YAAc,KACtH,GAAsB,OAAlByhB,EAAwB,CACnBN,EAAejf,SAAf,UAA2Buf,KAC5BN,EAAevnB,KAAf,UAAuB6nB,IAG3B,IAAMC,EAAmBC,GAAa,GAAD,OAAIF,IACpCC,EAAiB7nB,KAAKsmB,MACvBuB,EAAiB7nB,KAAKsmB,IAAM,IAE3B9d,EAAKxI,KAAKsmB,MACX9d,EAAKxI,KAAKsmB,IAAM,IAEftN,GAAsBO,IAAIhR,IAC3ByQ,GAAsBU,IAAInR,EAAG,IAAIhJ,OAErC,IAAMwoB,EAAqB/O,GAAsBvQ,IAAIF,GAErD,GAAIif,EAAYphB,wBASZ,GARI2hB,IACKA,EAAmB1f,SAASuf,IAC7BG,EAAmBhoB,KAAK6nB,EAAeJ,EAAY3hB,MAG3DgiB,EAAiB5B,OAASzd,EAAKyd,OAAS,IACxC4B,EAAiB7nB,KAAKsmB,IAAI0B,MAAQ,QAClCxf,EAAKxI,KAAKsmB,IAAI2B,KAAO,OAGP,IAFVf,GAAe9mB,QAAO,SAAA8nB,GACtB,OAAOA,EAAUrsB,KAAV,WAAqB+rB,EAArB,YAAsCJ,EAAY3hB,QAC1DrF,OAAc,CACb,IAAM2nB,EAAe,IAAI5B,GAAJ,WAAuBqB,EAAvB,YAAwCJ,EAAY3hB,KAAO,WAA3D,UAA0E+hB,GAA1E,UAA8FJ,EAAY3hB,KAAO,GAAI,UAAW,UACrJqhB,GAAennB,KAAKooB,SAWxB,GARIJ,IACKA,EAAmB1f,SAASuf,IAC7BG,EAAmBhoB,KAAKynB,EAAY3hB,IAAK+hB,IAGjDC,EAAiB5B,OAASzd,EAAKyd,OAAS,IACxC4B,EAAiB7nB,KAAKsmB,IAAI2B,KAAO,OACjCzf,EAAKxI,KAAKsmB,IAAI0B,MAAQ,QAGR,IAFVd,GAAe9mB,QAAO,SAAA8nB,GACtB,OAAOA,EAAUrsB,KAAV,WAAqB2rB,EAAY3hB,IAAjC,YAAwC+hB,MAChDpnB,OAAc,CACb,IAAM2nB,EAAe,IAAI5B,GAAJ,WAAuBiB,EAAY3hB,IAAnC,YAA0C+hB,GAAiB,WAA3D,UAA0EJ,EAAY3hB,KAAtF,UAAgG+hB,GAAiB,GAAI,UAAW,UACrJV,GAAennB,KAAKooB,IAShC,GAA2C,OAAvCX,EAAYphB,uBAAiC,CACxCkhB,EAAejf,SAAf,UAA2Bmf,EAAYphB,0BACxCkhB,EAAevnB,KAAf,UAAuBynB,EAAYphB,yBAEvC,IAAMyhB,EAAmBC,GAAa,GAAD,OAAIN,EAAYphB,yBAChDyhB,EAAiB7nB,KAAKsmB,MACvBuB,EAAiB7nB,KAAKsmB,IAAM,IAE3B9d,EAAKxI,KAAKsmB,MACX9d,EAAKxI,KAAKsmB,IAAM,IAEftN,GAAsBO,IAAIhR,IAC3ByQ,GAAsBU,IAAInR,EAAG,IAAIhJ,OAErC,IAAMwoB,EAAqB/O,GAAsBvQ,IAAIF,GAarD,GAZIwf,IACKA,EAAmB1f,SAASmf,EAAYphB,0BACpC2hB,EAAmB1f,SAASmf,EAAY3hB,MACzCkiB,EAAmBhoB,KAAKynB,EAAY3hB,KAGxCkiB,EAAmBhoB,KAAKynB,EAAYphB,0BAG5CyhB,EAAiB5B,OAASzd,EAAKyd,OAAS,IACxC4B,EAAiB7nB,KAAKsmB,IAAI2B,KAAO,OACjCzf,EAAKxI,KAAKsmB,IAAI0B,MAAQ,QAGR,IAFVd,GAAe9mB,QAAO,SAAA8nB,GACtB,OAAOA,EAAUrsB,KAAV,WAAqB2rB,EAAY3hB,IAAjC,YAAwC2hB,EAAYphB,2BAC5D5F,OAAc,CACb,IAAM2nB,EAAe,IAAI5B,GAAJ,WAAuBiB,EAAY3hB,IAAnC,YAA0C2hB,EAAYphB,wBAA0B,WAAhF,UAA+FohB,EAAY3hB,KAA3G,UAAqH2hB,EAAYphB,wBAA0B,GAAI,UAAW,UAC/L8gB,GAAennB,KAAKooB,IAO5B,IADA,IAAMC,EAAkBZ,EAAYzhB,MAhHF,WAiHzBsiB,GACL,GAAID,EAAgBC,GAAG,KAAO3iB,GAAoBsD,WAC7Cof,EAAgBC,EAAI,GAAG,KAAO3iB,GAAoB6Q,QAC/C6R,EAAgBC,EAAI,GAAG,KAAO3iB,GAAoBgR,YAClD0R,EAAgBC,EAAI,GAAG,KAAO3iB,GAAoBoa,iBACtD,cAEJwH,EAAevnB,KAAKqoB,EAAgBC,GAAG,GAAGxK,YAC1C,IAAI2I,EAAS,GAAIviB,EAAS,GACtBmkB,EAAgBC,EAAI,GAAG,IAAMD,EAAgBC,GAAG,IAAOD,EAAgBC,EAAI,GAAG,KAAO3iB,GAAoBiB,OAASyhB,EAAgBC,GAAG,KAAO3iB,GAAoBsD,UAChKwd,EAAS4B,EAAgBC,GAAG,GAAGxK,WAC/B5Z,EAASmkB,EAAgBC,EAAI,GAAG,GAAGxK,aAGnC2I,EAAS4B,EAAgBC,EAAI,GAAG,GAAGxK,WACnC5Z,EAASmkB,EAAgBC,GAAG,GAAGxK,YAGnC,IAAMyK,EAAaR,GAAatB,GAC3B8B,EAAWtoB,KAAKsmB,MACjBgC,EAAWtoB,KAAKsmB,IAAM,IAE1BgC,EAAWtoB,KAAKsmB,IAAIiC,OAAS,SAC7B,IAAMC,EAAaV,GAAa7jB,GAMhC,GALKukB,EAAWxoB,KAAKsmB,MACjBkC,EAAWxoB,KAAKsmB,IAAM,IAE1BkC,EAAWxoB,KAAKsmB,IAAImC,IAAM,MAIZ,IAFVvB,GAAe9mB,QAAO,SAAA8nB,GACtB,OAAOA,EAAUrsB,KAAV,WAAqB2qB,EAArB,YAA+BviB,MACvCzD,OAAc,CACb,IAAM2nB,EAAe,IAAI5B,GAAJ,WAAuBC,EAAvB,YAAiCviB,GAAU,WAAYuiB,EAAQviB,EAAQ,GAAI,WAAY,SAC5GijB,GAAennB,KAAKooB,KAjCnBE,EAAID,EAAgB5nB,OAAS,EAAG6nB,GAAK,EAAGA,IAAK,gBAA7CA,GAKD,QArHZ,2BAA4C,IADN,kCA+J5CK,GAAc,SAAC1oB,GACjB,IAAMqnB,EAAW,IAAI5gB,IAoBrB,OAlBAzG,EAAKiI,QAAQtH,SAAQ,SAAU6H,EAAkBhK,GAAc,IAAD,EACpDmqB,EAAc3S,GAAOW,UAAUnO,EAAK3C,IAAK7F,EAAKuJ,YAEhDf,EAAK1C,OAASghB,KACdA,GAAWte,EAAK1C,QAEhB0C,EAAK1C,OAASihB,KACdA,GAAWve,EAAK1C,QAEfuhB,EAAS9N,IAAI/Q,EAAK1C,SACnBuhB,EAAS3N,IAAIlR,EAAK1C,OAAQ,IAAIvG,OAElC,IAAMqpB,EAAYD,EAAYxS,UAAZ,iBAAkCwS,EAAYzS,aAAgByS,EAAYzS,YACtFoO,EAAU,IAAIyB,GAAUvd,EAAK3C,IAAIgY,WAAY,cAAe,IAAIuI,GAASwC,GAAa,CAAEnhB,EAAG,EAAGohB,EAAG,GAAK,GAC5G,UAAAxB,EAAS5e,IAAID,EAAK1C,eAAlB,SAA2B/F,KAAKukB,GAChC2C,GAAavN,IAAIlR,EAAK3C,IAAKye,MAGxB+C,GAILyB,GAAkB,SAACzB,EAAyCpf,GAE9D,IADA,IAAI8gB,EAAO,EACFxgB,EAAIue,GAAUve,GAAKwe,GAAUxe,IAAK,CACvC,IAAMgf,EAAyBF,EAAS5e,IAAIF,GAE5C,QAA+BG,IAA3B6e,EAAsC,CACtC,IAAMyB,EAAuBzB,EAAuBxC,MAAK,SAACrhB,EAAGshB,GAAJ,OAAUthB,EAAEuiB,QAAUjB,EAAEiB,OAAS,GAAK,KAEzFgD,EAAUC,GAAkBF,EAAsBhQ,GAAsBvQ,IAAIF,GAAIN,GAEtFkhB,GAAeF,EAASF,GAE5BA,GAAQhQ,KAIVoQ,GAAiB,SAACF,EAAwBF,GAC5C,IAD6D,EACzDK,EAAQ,EACNC,EAAOvQ,GAAQqO,GACjBmC,GAAkB,IAHuC,eAKxCL,GALwC,IAK7D,2BAA8B,CAAC,IAApBM,EAAmB,QAEpB5B,EAAI4B,EAAO1C,SAASrmB,OAC1B,GAAI+oB,EAAOpiB,OAAQ,CAGf,IAAMqiB,EAAkB1B,GAAayB,EAAOpiB,OAAO0W,YAC/C4L,EAAgBD,EAAgBvkB,SAASwC,EAAI0f,MAAgBQ,EAAIR,IAAYQ,EAAI,GAAK0B,GAAQ,EAC5FK,EAAiBF,EAAgBvkB,SAASwC,EAAI0f,MAAgBQ,EAAIR,IAAYQ,EAAI,GAAK0B,GAAQ,EAEjGC,EAAiBG,IACjBA,EAAgBH,GAEpBA,EAAiBI,EAAiBL,EAVnB,qBAWKE,EAAO1C,UAXZ,IAWf,2BAAqC,CAAC,IAA3B8C,EAA0B,QACjB7B,GAAa6B,EAAM9L,YAC3B5Y,SAAW,CAAEwC,EAAGgiB,EAAeZ,EAAGE,GAE1CK,EADAK,GAAiB3Q,IAdN,mCAkBZ,CAGHwQ,EADuBF,EAAQzB,EAAK7O,GAFjC,qBAIiByQ,EAAO1C,UAJxB,IAIH,2BAAqC,CAAC,IAA3B8C,EAA0B,QACjB7B,GAAa6B,EAAM9L,YAC3B5Y,SAAW,CAAEwC,EAAG2hB,EAAOP,EAAGE,GAClCK,GAAStQ,IAPV,iCA1BkD,gCAsC3DoQ,GAAoB,SAACU,EAA8BC,EAA0C5hB,GAC/F,IADgH,EAC1GghB,EAAU,IAAI1pB,MAChBuqB,GAAqB,EAFuF,eAGxFF,GAHwF,yBAGrGG,EAHqG,QAItGvhB,EAAO7C,GAAWyC,QAAQuV,SAASoM,EAAUluB,IAAKoM,GAGxD,GAAI4hB,GAAiBA,EAAcxhB,SAASG,EAAK3C,KAAM,CACnD,GAAIikB,EACA,iBAGJ,IAAIE,EADJF,GAAqB,EAErB,IANmD,EAM/CG,GAAmB,EAN4B,eAO7BJ,GAP6B,yBAOxCjiB,EAPwC,QAQzCsiB,EAAcvkB,GAAWyC,QAAQR,EAASK,GAC1CkiB,EAAkBlB,EAAQ7oB,QAAO,SAAAmpB,GACnC,QAAIA,EAAOpiB,QACA+iB,EAAYlkB,SAASqC,SAASkhB,EAAOpiB,WAIpD,GAA+B,IAA3BgjB,EAAgB3pB,OAIhB,OAFA2pB,EAAgB,GAAGtD,SAAWsD,EAAgB,GAAGtD,SAASjP,OAAOiS,GACjEI,GAAmB,EACnB,QAEoC,IAAhCC,EAAYlkB,SAASxF,SACrBwpB,EAAgBE,EAAYlkB,SAAS,KAfjD,2BAAqC,kBAY7B,OAnB2C,8BAyB9CikB,GACDhB,EAAQlpB,KAAK,IAAI6mB,GAAOiD,EAAeG,QAExC,CACH,IAMIT,EANEa,EAAiBnB,EAAQ7oB,QAAO,SAAAmpB,GAClC,QAAIA,EAAOpiB,QACAqB,EAAKxC,SAASqC,SAASkhB,EAAOpiB,WAKf,IAA1BijB,EAAe5pB,QACf+oB,EAASa,EAAe,IACjBvD,SAAS9mB,KAAKyI,EAAK3C,MAEM0jB,EAAH,IAAzB/gB,EAAKxC,SAASxF,OAAuB,IAAIomB,GAAO,CAACpe,EAAK3C,KAAM2C,EAAKxC,SAAS,IAChE,IAAI4gB,GAAO,CAACpe,EAAK3C,MAC/BojB,EAAQlpB,KAAKwpB,MA9CzB,2BAAoC,IAH4E,8BAyDhH,OAAON,GAELoB,GAA6B,SAACpiB,GAChC,IAAMqiB,EAAa,IAAI/qB,MAMvB,OAJA0nB,GAAatmB,SAAQ,SAAC8J,EAAOjM,GAC4C,IAAjEmH,GAAWyC,QAAQuV,SAASlT,EAAM5O,IAAKoM,GAASlC,MAAMvF,QACtD8pB,EAAWvqB,KAAK0K,MAEjB6f,EAAW1S,OAAOsP,KAGvBqD,GAAuB,SAACC,GAE1B,IADA,IAAMC,EAAgBzD,GAAYwD,EAAUhqB,OAAS,GAC5C+H,EAAI,EAAGA,EAAIiiB,EAAUhqB,OAAQ+H,IAClCiiB,EAAUjiB,GAAG0d,OAASwE,EAAcliB,IAItCuf,GAAe,SAACjsB,GAClB,IAAMkuB,EAAmC9C,GAAaxe,IAAIkV,SAAS9hB,IACnE,QAAiB6M,GAAbqhB,EACA,MAAM,IAAIviB,MAAM,kCAAoC3L,GAExD,OAAOkuB,G,8BC1WN9Q,K,gBAAAA,E,iBAAAA,Q,KAKL,IAAMyR,GAAmB,CACvB,CACE1E,KAAM,SACN/gB,SAAU0lB,KAASC,MACnB/uB,GAAI,UACJ0C,MAAO,CAAEkqB,IAAK,MAAO/jB,WAAY,SAEnC,CACEshB,KAAM,SACN/gB,SAAU0lB,KAASE,OACnBhvB,GAAI,WACJ0C,MAAO,CAAE0pB,KAAM,MAAOvjB,WAAY,SAEpC,CACEshB,KAAM,SACN/gB,SAAU0lB,KAASG,KACnBjvB,GAAI,SACJ0C,MAAO,CAAEkqB,IAAK,MAAO/jB,WAAY,SAEnC,CACEshB,KAAM,SACN/gB,SAAU0lB,KAASI,IACnBlvB,GAAI,QACJ0C,MAAO,CAAE0pB,KAAM,MAAOvjB,WAAY,UAIhCsmB,GAAoB,CACxBtmB,WAAY,OACZnK,MAAO,OACPQ,QAAS,MACTkwB,MAAO,OACPvuB,OAAQ,SACRwuB,aAAc,MACdC,YAAa,eACbC,YAAa,QACbC,YAAa,MACbC,cAAe,QACfC,WAAY,IACZvoB,QAAS,QAsCLmiB,GAAQ,SAACnlB,EAAWsmB,GACxB,SAAItmB,GACFA,EAAKioB,OAAS3B,GACdtmB,EAAKgoB,QAAU1B,GACftmB,EAAKyoB,MAAQnC,GACbtmB,EAAKuoB,SAAWjC,IAOdkF,GAAoB,SAACC,GAQzB,OAAOA,GAIMC,GA1DI,SAACC,GAClB,IAAM3rB,EAAO2rB,EAAU3rB,KAEjB4rB,EAAgB5rB,EAAK4rB,cAErBC,EAAUnB,GAAiBnuB,KAAI,SAACuvB,EAAGC,GACvC,GAAI5G,GAAMnlB,EAAKsmB,IAAKwF,EAAE7mB,UACpB,OACE,cAAC,KAAD,CAEE+gB,KAAiB,WAAX8F,EAAE9F,KAAoB/M,GAAWuN,OAASvN,GAAWhV,OAC3DgB,SAAU6mB,EAAE7mB,SACZpJ,GAAIiwB,EAAEjwB,GACN0C,MAAOutB,EAAEvtB,MACTqtB,cAAeA,GALVE,EAAEjwB,OAUTmwB,EAAcR,GAAkBxrB,EAAKuD,OAC3C,OACE,gCACE,sBAAK1H,GAAE,iBAAY8vB,EAAU9vB,IAAM0C,MAAOysB,GAA1C,UACE,qBAAKzsB,MAAO,CAAE0sB,MAAO,SAAUjoB,QAAS,YAAxC,SAAsD,cAAC,WAAD,CAASzE,MAAO,CAAE0tB,OAAQ,OAAQhB,MAAO,SAAUhwB,UAAW,UAAY4hB,IAAK,GAAIqP,KAAK,SAASC,sBAAsB,EAAvH,SAA+HH,MAEpLH,KAEH,cAACO,GAAA,EAAD,CAAQ7tB,MAAO,CAAE0G,SAAU,WAAYjC,QAAShD,EAAKqmB,WAAa,QAAU,QAC1EnoB,KAAM8B,EAAKqmB,WACXzW,SAAU9M,SAASC,eAAT,iBAAkC4oB,EAAU9vB,KAFxD,8BAGgBmE,EAAKuD,aOhFrB8oB,GAAqB,IAAIjtB,IACzBktB,GAAiC,IAAI/sB,MAC9BgtB,GAEW,SAAC5sB,GAAD,OAAkB0sB,GAAmBzsB,KAAKD,IAFrD4sB,GAKU,kBAAMF,GAAmBxsB,gBALnC0sB,GAOQ,SAACzsB,GAAD,OAAgCwsB,GAA+BvsB,KAAKD,IAP5EysB,GAUa,WAClBD,GAA+B3rB,SAAQ,SAACb,GACpCA,EAAac,kBCJnB4rB,GAAa,CAAE9vB,OAAQ,OAAQuuB,MAAO,OACxCwB,IAAiB,EAmGNC,GAlGM,WAEnB,MAA4B3vB,mBAAS,CAAEkL,QAAS,IAAIxB,IAAOmQ,UAAW,IAAInQ,IAAOuC,SAAU,OAA3F,mBAAO2jB,EAAP,KAAeC,EAAf,KACA,EAAwC7vB,mBAAS,IAAjD,mBAAO8vB,EAAP,KAAqBC,EAArB,KACMC,EAAuBpd,kBAAO,GAC9Bqd,EAAsBC,eAQ5B7vB,qBAAU,WACR,OAAO,WACL2vB,EAAqBpc,SAAU,KAEhC,IACHvT,qBAAU,WACRmvB,KACA,IAAMzsB,EAAeysB,KAAiD7e,WAAU,SAAC1N,GAAD,OAAe4sB,EAAU5sB,MACzGusB,GAA6CzsB,GACzCitB,EAAqBpc,SACvB4b,OAED,CAAC,IACJnvB,qBAAU,WACR8vB,YAAW,WApBaL,EAAalsB,SAAQ,SAACwsB,GAE1CA,aAAqBpH,IACvBiH,EAAoBG,EAAUtxB,SAmB7B,OAEF,CAACgxB,IACJzvB,qBAAU,WACR0vB,ET/BuB,SAAC9sB,GACxB8mB,IAAY,OAAQC,GAAW,OAC/BE,GAAe,IAAIxgB,IACnBygB,GAAiB,IAAI3nB,MACrByZ,GAAwB,IAAIvS,IAC5BqS,GAAQ,IACRC,GAAQ,IAGR,IAAMsO,EAAWqB,GAAY1oB,GACvBotB,EAAe/F,EAAS5e,IAAIqe,IAClC,OAA4B,IAAxB9mB,EAAKiI,QAAQzH,aAAiCkI,IAAjB0kB,EACtB,IAEX7C,GAAqB6C,GACrBhG,GAAUC,EAAUrnB,EAAKiI,SACzB6gB,GAAgBzB,EAAUrnB,EAAKiI,SACxBoiB,GAA2BrqB,EAAKiI,UScvBolB,CAAYV,IAC5BF,IAAiB,IAChB,CAACE,IACJ,IAAQW,EAAYC,eAAZD,QACFE,EAAY,CAChBC,YAAa/B,IAsCf,OAlCAtuB,qBAAU,WACJqvB,IACFa,OAiCF,qBAAKzxB,GAAG,iBAAiB0C,MAAO,CAAE7B,OAAQ,OAAQgxB,WAAY,QAA9D,SACE,eAAC,KAAD,CACE7G,SAAUgG,EACVtuB,MAAOiuB,GACPgB,UAAWA,EACXG,kBAAkB,EAClBC,cAAc,EACdC,mBAAmB,EACnBC,oBAAoB,EACpBC,gBAAgB,EARlB,UAYE,cAAC,KAAD,CAAYpzB,QAASqzB,KAAkBC,KAAMC,IAAK,EAAGnwB,KAAM,IAC3D,cAAC,KAAD,UCzGO,I,OAAA,IAA0B,8CCqGnCowB,GAAgB,WAKpB,IAAMC,EAAoBtrB,SAASyK,uBACjC,qCACA,GACI8gB,EAASvrB,SAASwrB,cAAc,OACtCD,EAAOxyB,GAAK,sBACZwyB,EAAOphB,UAAY,UACnBohB,EAAO9vB,MAAMrD,gBAAkB,MAC/BmzB,EAAO9vB,MAAM0G,SAAW,WACxBopB,EAAO9vB,MAAMgqB,OAAS,SACtB8F,EAAO9vB,MAAM0sB,MAAQ,OACrBoD,EAAO9vB,MAAMyE,QAAU,OACvBorB,EAAkBG,QAAQF,IAGtBG,GAA8B,WACX1rB,SAASyK,uBAC9B,gCACA,GACa9P,iBAAiB,SAAS,WACvC,IAAMoF,EAAaC,SAASC,eAAe,uBACvCF,GAC+B,UAA7BA,EAAWtE,MAAMyE,UACnBH,EAAWtE,MAAMyE,QAAU,YAKpByrB,GAxHmB,WAChC,IAAIC,EAAO,QACkB/e,kBAAO,GACpCvS,qBAAU,WACRsC,KACA,IAAMI,EAAeJ,KAElBgO,WAAU,YAAiB,IAAd4X,EAAa,EAAbA,OACZiH,GAAgDjH,MAMpD5lB,GAAuCI,GACvCquB,KAEAK,OACC,CAAC,IA2BJ,OACE,sBAAK3yB,GAAG,4BAA4B0C,MAAO,CAAE7B,OAAQ,QAArD,UACE,cAAChC,EAAA,EAAD,CAAYC,QAAQ,KAAKmE,MAAM,SAA/B,oCAGA,cAAC,KAAD,UACE,cAAC,GAAD,MAGA,qBAAKlE,UAAU,mBAAf,SACE,cAAC,UAAD,CACEkQ,OAAQ6jB,GACR5tB,eAAgBqa,GAChBwT,cAAezhB,OAIrB,wBAAQvS,UAAU,sBAAsBkD,QA7B1B,WAChB,IAAM+wB,EAAa/rB,SAASyK,uBAC1B,oCACA,GACW,UAATmhB,GACFG,EAAWtwB,MAAMyE,QAAU,OAC3B0rB,EAAO,SAEPG,EAAWtwB,MAAMyE,QAAU,QAC3B0rB,EAAO,UAoBP,SACE,qBAAKI,IAAKC,W,SC9DZC,GAAY,WAChB,OACE,eAACt0B,EAAA,EAAD,CAAYC,QAAQ,QAAQJ,MAAM,gBAAgBuE,MAAM,SAAxD,UACG,kBACD,cAACV,EAAA,EAAD,CAAM7D,MAAM,UAAUiB,KAAK,2BAA3B,qBAEQ,KACP,IAAIyzB,MAAOC,cACX,QAKD/0B,GAAYC,aAAW,iBAAO,CAClC+0B,OAAQ,CAENp0B,QAASq0B,eAAW5f,QAAQ,GAC5BtU,gBAAiB,cAuCNm0B,GAnCA,SAAC/zB,GACd,IAAMb,EAAUN,KACRm1B,EAAuBh0B,EAAvBg0B,YAAaxzB,EAAUR,EAAVQ,MAErB,OACE,eAACyzB,EAAA,EAAD,CAAO30B,UAAWH,EAAQ00B,OAA1B,UACE,cAACz0B,EAAA,EAAD,CAAYC,QAAQ,KAAKmE,MAAM,SAAS0wB,cAAY,EAApD,SACG1zB,IAEH,cAACpB,EAAA,EAAD,CACEC,QAAQ,YACRmE,MAAM,SACNvE,MAAM,gBACN8D,UAAU,IAJZ,SAMGixB,IAEH,cAAC,GAAD,QCzCSG,GARO,WACpB,OACE,cAAC/0B,EAAA,EAAD,CAAYC,QAAQ,KAAKmE,MAAM,SAA/B,4B,UCHE4wB,GAAe7mB,GAWN8mB,GATQ,WAAmC,IAAlCzyB,EAAiC,uDAAzBwyB,GAAcE,EAAW,uCACvD,MACO,mBADCA,EAAO5J,KAEJ4J,EAAOC,QAEP3yB,GCLE4yB,GADDC,aAAYJ,I,UC6BpBtgB,GAAQ2gB,cACR71B,GAAYC,YAAW,CAC3BC,KAAM,CAKJqC,OAAQ,SAEVuzB,UAAW,CACTC,UAAW,OACXC,UAAW,QACXzrB,WACE,mFACF0rB,QAAS,OAIPC,GACJ,eAAC,IAAD,WACE,cAAC,IAAD,CAAO50B,OAAK,EAACM,KAAK,IAAIsC,UAAWY,IACjC,cAAC,IAAD,CAAOlD,KAAK,SAASsC,UAAWa,IAChC,cAAC,IAAD,CAAOnD,KAAK,cAAcsC,UAAWowB,KACrC,cAAC,IAAD,CAAO1yB,KAAK,aAAasC,UAAWoxB,QAwDzBa,GApDH,WACV,IAAM71B,EAAUN,KAEVo2B,EAAe3lB,GAsBrB,OAEE,cAAC4lB,EAAA,EAAD,CAAsBC,aAAW,EAAjC,SACE,cAACC,EAAA,EAAD,CAAerhB,MAAOA,GAAtB,SACE,eAAC,IAAD,CAAc1E,OA3BP,QA2BqBL,SAAUimB,EAAtC,UAEE,eAAChB,EAAA,EAAD,CACEoB,KAAK,MAEL,aAAW,oCAHb,UAKE,cAAC,EAAD,IACA,cAAC,KAAD,CAAUb,MAAOA,GAAjB,SACE,cAACP,EAAA,EAAD,CAAO30B,UAAWH,EAAQw1B,UAA1B,SAAsCI,UAI1C,cAAC,GAAD,CAAQf,YAAY,UAAUxzB,MAAM,oB,SC1F9C80B,kBAEE,cAAC,IAAD,UACE,cAAC,GAAD,MAGF9tB,SAASC,eAAe,S","file":"static/js/main.04045484.chunk.js","sourcesContent":["export enum ChatStepTypes {\r\n  initalStep = \"\",\r\n  testatorStep = \"testatorStep\",\r\n  undividedEstateStep = \"undividedEstateStep\",\r\n  netWealthStep = \"netWealthStep\",\r\n  underAgeStep = \"underAgeStep\",\r\n  spouseChoice = \"spouseChoice\",\r\n  spouseStep = \"spouseStep\",\r\n  cohabitantChoice = \"cohabitantChoice\",\r\n  cohabitantStep = \"cohabitantStep\",\r\n  successorStep = \"successorStep\",\r\n  parentsStep = \"parentsStep\",\r\n  rearChildrenStep = \"rearChildrenStep\",\r\n  marriedParentsStep = \"marriedParentsStep\",\r\n  grandParentStep = \"grandParentStep\",\r\n  finalStep = \"finalStep\",\r\n  secondParentChoice = \"secondParentChoice\",\r\n}\r\n\r\nexport enum QuestionType {\r\n  part1 = \"part1\",\r\n  part2 = \"part2\",\r\n  part3 = \"part3\",\r\n  part4 = \"part4\",\r\n  part5 = \"part5\",\r\n  part6 = \"part6\",\r\n  initialQuestion = \"none\",\r\n}\r\n","import { ReactElement } from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\n\r\nconst root = {\r\n  fontFamily: '\"Abril Fatface\", serif',\r\n  color: \"#016196\",\r\n};\r\n\r\nconst useStyles = makeStyles({ root });\r\nconst HeaderTitle = (): ReactElement => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Typography variant=\"h2\" className={classes.root} noWrap>\r\n      ARVEBOT\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default HeaderTitle;\r\n","// import classes from \"./MenuLink.module.css\";\r\nimport { ReactElement } from \"react\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\ninterface propsTypes {\r\n  href: string;\r\n  name: ReactElement;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    fontFamily: '\"Work Sans\", sans-serif',\r\n    // fontWeight: \"300\",\r\n    fontSize: \"1.3rem\",\r\n    color: \"#4151C9\",\r\n    padding: \"0 20px\",\r\n    textDecoration: \"none\",\r\n    textAlign: \"center\",\r\n    \"&:hover\": {\r\n      color: \"#FFF5EE\",\r\n      backgroundColor: \"#87AFC7\",\r\n      fontWeight: \"bold\",\r\n    },\r\n  },\r\n  rootActive: {\r\n    backgroundColor: \"#FFCBA4\",\r\n    color: \"#2B3856\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#FCCABD\",\r\n      color: \"#2B3856\",\r\n    },\r\n  },\r\n});\r\n\r\nconst MenuLink = (props: propsTypes): ReactElement => {\r\n  const classes = useStyles(props);\r\n  return (\r\n    <NavLink\r\n      to={props.href}\r\n      className={classes.root}\r\n      exact\r\n      activeClassName={classes.rootActive}\r\n    >\r\n      {props.name}\r\n    </NavLink>\r\n  );\r\n};\r\n\r\nexport default MenuLink;\r\n","const navLinks = [\r\n  {\r\n    id: 0,\r\n    title: \"Menu.Home\",\r\n    path: \"/\",\r\n  },\r\n  {\r\n    id: 1,\r\n    title: \"Menu.Calculator\",\r\n    path: \"/calculator\",\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Menu.About\",\r\n    path: \"/about\",\r\n  },\r\n  {\r\n    id: 3,\r\n    title: \"Menu.Resources\",\r\n    path: \"/resources\",\r\n  },\r\n];\r\n\r\nexport default navLinks;\r\n","import { Grid } from \"@mui/material\";\r\nimport MenuLink from \"./MenuLink/MenuLink\";\r\nimport NavLinks from \"./NavLinks\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { ReactElement } from \"react\";\r\n\r\nconst HeaderMenu = (): ReactElement => {\r\n  return (\r\n    <Grid\r\n      container\r\n      direction=\"row\"\r\n      justifyContent=\"space-evenly\"\r\n      alignItems=\"center\"\r\n    >\r\n      {NavLinks.map(({ id, title, path }) => {\r\n        return (\r\n          <Grid item key={id}>\r\n            <MenuLink name={<FormattedMessage id={`${title}`} />} href={path} />\r\n          </Grid>\r\n        );\r\n      })}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default HeaderMenu;\r\n","import { useState, useEffect, ReactElement } from \"react\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Grid,\r\n  IconButton,\r\n  Drawer,\r\n  Link,\r\n  MenuItem,\r\n} from \"@mui/material\";\r\nimport MenuIcon from \"@mui/icons-material/Menu\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport HeaderTitle from \"./HeaderTitle/HeaderTitle\";\r\nimport HeaderMenu from \"./HeaderMenu/HeaderMenu\";\r\nimport NavLinks from \"../../Generic/Header/HeaderMenu/NavLinks\";\r\n\r\nconst useStyles = makeStyles({\r\n  header: {\r\n    backgroundColor: \"white\",\r\n    height: \"5rem\",\r\n  },\r\n  \"@media (max-width: 900px)\": {\r\n    paddingLeft: 0,\r\n  },\r\n  drawerContainer: {\r\n    padding: \"20px 30px\",\r\n  },\r\n  menuIconRoot: {\r\n    color: \"#4151C9\",\r\n  },\r\n});\r\n\r\nconst getDrawerChoices = () => {\r\n  return NavLinks.map(({ id, title, path }) => {\r\n    return (\r\n      <Link\r\n        {...{\r\n          component: RouterLink,\r\n          to: path,\r\n          color: \"inherit\",\r\n          style: { textDecoration: \"none\" },\r\n          key: id,\r\n        }}\r\n      >\r\n        <MenuItem>{title}</MenuItem>\r\n      </Link>\r\n    );\r\n  });\r\n};\r\nconst displayDesktop = () => {\r\n  return (\r\n    <Toolbar>\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justifyContent=\"flex-start\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item sm={6}>\r\n          <HeaderTitle />\r\n        </Grid>\r\n        <Grid item sm={6}>\r\n          <HeaderMenu />\r\n        </Grid>\r\n      </Grid>\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nconst Header = (): ReactElement => {\r\n  const [state, setState] = useState({\r\n    mobileView: false,\r\n    drawerOpen: false,\r\n  });\r\n  const { mobileView, drawerOpen } = state;\r\n  useEffect(() => {\r\n    const setResponsiveness = () => {\r\n      return window.innerWidth < 900\r\n        ? setState((prevState) => ({ ...prevState, mobileView: true }))\r\n        : setState((prevState) => ({ ...prevState, mobileView: false }));\r\n    };\r\n    setResponsiveness();\r\n    window.addEventListener(\"resize\", () => setResponsiveness());\r\n  }, []);\r\n\r\n  const classes = useStyles();\r\n\r\n  const displayMobile = () => {\r\n    const handleDrawerOpen = () =>\r\n      setState((prevState) => ({ ...prevState, drawerOpen: true }));\r\n    const handleDrawerClose = () =>\r\n      setState((prevState) => ({ ...prevState, drawerOpen: false }));\r\n\r\n    return (\r\n      <Toolbar>\r\n        <MenuIcon className={classes.menuIconRoot} />\r\n        <IconButton edge=\"start\" color=\"inherit\" onClick={handleDrawerOpen} size=\"large\" />\r\n        <Drawer anchor=\"left\" open={drawerOpen} onClose={handleDrawerClose}>\r\n          <div className={classes.drawerContainer}>{getDrawerChoices()}</div>\r\n        </Drawer>\r\n        <HeaderTitle />\r\n      </Toolbar>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <AppBar className={classes.header}>\r\n      {mobileView ? displayMobile() : displayDesktop()}\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { ReactElement } from \"react\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { Box, Typography } from \"@mui/material\";\r\nimport Typed from 'react-typed';\r\n// import Typed from \"typed.js\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    padding: \"10rem 20rem\",\r\n    color: \"white\",\r\n    fontFamily: '\"Work Sans\", sans-serif',\r\n  },\r\n  highLightText: {\r\n    fontFamily: '\"Abril Fatface\", serif',\r\n    fontSize: \"4rem\",\r\n    color: \"yellow\",\r\n  },\r\n});\r\n\r\nconst HomeDetail = (): ReactElement => {\r\n  const classes = useStyles();\r\n  const textLines = [\"hjelper deg å finne løsningen og relevant rettsgrunnlag.\"]\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\" align=\"center\" className={classes.root}>\r\n        Lurer du på hvem som arver Peder Ås når han dør? <br />\r\n        Hvor mye får kona og barna? Hva med stesønnen? <br />\r\n        Og hvor mye kan han testamentere til Lilleviks fuglekikkerforening?{\" \"}\r\n        <br /> <br />\r\n        <span className={classes.highLightText}>BeregnArv</span> <Typed typeSpeed={50} strings={textLines}></Typed>\r\n      </Typography>\r\n    </Box >\r\n  );\r\n};\r\n\r\nexport default HomeDetail;\r\n","import { ReactElement } from \"react\";\r\nimport HomeDetail from \"../Components/HomeComponents/HomeDetail/HomeDetail\";\r\n\r\nconst HomePage = (): ReactElement => {\r\n  return (\r\n    // <Typography variant=\"h2\" align=\"center\">\r\n    //   HomePage\r\n    // </Typography>\r\n    <HomeDetail />\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import { Typography } from \"@mui/material\";\r\nimport { ReactElement } from \"react\";\r\nconst AboutPage = (): ReactElement => {\r\n\r\n  return (\r\n    <Typography variant=\"h2\" align=\"center\">\r\n      About Page\r\n    </Typography>\r\n  )\r\n};\r\n\r\nexport default AboutPage;","import { Subject, Subscription } from 'rxjs';\r\nimport _ from \"lodash\";\r\n\r\nconst inSubject = new Subject();\r\nconst outSubject = new Subject();\r\nconst internalSubscriptionList = new Array<Subscription>()\r\nconst externalSubscriptionList = new Array<Subscription>()\r\nconst previousStates = new Array<any>();\r\nexport const messageService = {\r\n\r\n    sendMessageToChatbot: (message: any) => inSubject.next(message),\r\n\r\n    sendMessageFromChatbot: (message: any) => outSubject.next(message),\r\n\r\n    getMessageInChatbot: () => inSubject.asObservable(),\r\n\r\n    getMessageOutChatbot: () => outSubject.asObservable(),\r\n\r\n    addInternalSubscription: (subscription: Subscription) => internalSubscriptionList.push(subscription),\r\n\r\n    addExternalSubscription: (subscription: Subscription) => externalSubscriptionList.push(subscription),\r\n\r\n    addPreviousState: (data: any) => {\r\n        const stateCopy = _.cloneDeep(data)\r\n        if (previousStates.filter(previousState => Object.entries(previousState) == Object.entries(stateCopy)).length === 0) {\r\n            previousStates.push(stateCopy)\r\n        }\r\n    },\r\n\r\n    removePreviousState: () => {\r\n        if (previousStates.length === 0) {\r\n            return null;\r\n        }\r\n        return previousStates.pop()\r\n    },\r\n\r\n    getPreviousStates: () => previousStates,\r\n\r\n    getPreviousState: (reverseCount: number) => {\r\n        if (previousStates.length === 0) return null;\r\n        return previousStates[previousStates.length - 1 - reverseCount]\r\n    },\r\n\r\n    clearAllInternalSubscription: () => {\r\n        internalSubscriptionList.forEach((subscription: Subscription) => {\r\n            subscription.unsubscribe();\r\n        })\r\n    },\r\n\r\n    clearAllExternalSubscription: () => {\r\n        externalSubscriptionList.forEach((subscription: Subscription) => {\r\n            subscription.unsubscribe();\r\n        })\r\n    }\r\n};\r\n","import \"./OptionSelector.scss\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { ReactElement } from \"react\";\r\nimport { ChatbotInterface } from \"../../../Generics\";\r\nimport { ChatStepTypes, QuestionType } from \"../../../Helper/Enums/ChatStepTypes\";\r\nimport { messageService } from \"../../../services/ChatbotCommunicator\";\r\n\r\n\r\nconst OptionSelector = (props: any): ReactElement => {\r\n  const { actionProvider, setState } = props;\r\n  const setOption = (option: boolean) => {\r\n    handleOptions(option, actionProvider, setState);\r\n  };\r\n\r\n  const onClickHandler = (e: any): void => {\r\n    // const thisButton = e.target as HTMLButtonElement\r\n    // const nextButton = (thisButton).nextElementSibling as HTMLButtonElement\r\n    // const prevButton = (thisButton).previousElementSibling as HTMLButtonElement\r\n    // const otherButton = nextButton ? nextButton : prevButton\r\n    // thisButton.style.pointerEvents = \"none\"\r\n    // thisButton.style.background = \"darkolivegreen\";\r\n    // thisButton.disabled = true;\r\n    // otherButton.style.pointerEvents = \"none\"\r\n    // otherButton.disabled = true;\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"option-selector-button-container\">\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(true)\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.Yes\" />\r\n        </button>\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(false)\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.No\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nconst handleOptions = (option: boolean, actionProvider: any, setState: any) => {\r\n  hideWarning();\r\n  setState((state: ChatbotInterface) => {\r\n    messageService.addPreviousState({ ...state })\r\n    const curStep = state.stepID;\r\n    state.yesNoClickedFlag = true;\r\n    switch (curStep) {\r\n      case ChatStepTypes.testatorStep: {\r\n        actionProvider.handleUndividedEstateChoice(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.undividedEstateStep: {\r\n        if (state.successor_flag === QuestionType.part2) {\r\n          actionProvider.handleChildAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part2) {\r\n          actionProvider.handleParentAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part3) {\r\n          actionProvider.handleSecondParentExists(option);\r\n          break;\r\n        }\r\n        break;\r\n      }\r\n      case ChatStepTypes.underAgeStep: {\r\n        actionProvider.handleUnderAge(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.spouseChoice: {\r\n        actionProvider.handleSpouseChoice(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.cohabitantChoice: {\r\n        actionProvider.handleCohabitantChoice(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.successorStep: {\r\n        state.successor_flag = QuestionType.part2\r\n        actionProvider.handleChildAliveOption(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.parentsStep: {\r\n        if (state.successor_flag === QuestionType.part2) {\r\n          actionProvider.handleChildAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part2) {\r\n          actionProvider.handleParentAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part3) {\r\n          actionProvider.handleSecondParentExists(option);\r\n          break;\r\n        }\r\n        break;\r\n      }\r\n      case ChatStepTypes.marriedParentsStep: {\r\n        actionProvider.handleMarriedParents(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.grandParentStep: {\r\n        if (state.successor_flag === QuestionType.part2) {\r\n          actionProvider.handleChildAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part2) {\r\n          actionProvider.handleParentAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part3) {\r\n          actionProvider.handleSecondParentExists(option);\r\n          break;\r\n        }\r\n        break;\r\n      }\r\n      case ChatStepTypes.finalStep: {\r\n        actionProvider.handleFinalQuestion(option)\r\n        break;\r\n      }\r\n      default: {\r\n        console.log(\"fix this. state: \", state);\r\n      }\r\n    }\r\n    return state;\r\n  });\r\n}\r\nconst hideWarning = () => {\r\n  const warningDiv = document.getElementById(\"chatbot-warning-div\");\r\n  if (warningDiv) {\r\n    warningDiv.style.display = \"none\";\r\n    return;\r\n  }\r\n}\r\nexport default OptionSelector;\r\n// function toggleInputField() {\r\n//   const chatInputField = document.querySelectorAll(\r\n//     \".react-chatbot-kit-chat-input\"\r\n//   ) as NodeListOf<HTMLElement>;\r\n//   if (chatInputField)\r\n//     chatInputField[0]. = !chatInputField.disabled;\r\n// }\r\n\r\n","import { Box } from \"@mui/material\";\r\nimport PropTypes, { InferProps } from 'prop-types';\r\nimport './InfoMessagesWidget.scss'\r\n\r\nconst InfoMessageTypes = {\r\n  label: PropTypes.string\r\n}\r\ntype InfoMessageTypes = InferProps<typeof InfoMessageTypes>\r\n\r\nconst InfoMessagesWidget = ({ label }: InfoMessageTypes) => {\r\n  return <Box\r\n    display=\"flex\"\r\n    justifyContent=\"center\"\r\n    alignItems=\"center\"\r\n    component=\"span\"\r\n    className=\"InfoMessage\"\r\n    sx={{ backgroundColor: \"#FFCBA4\" }}\r\n  >\r\n    Amount Entered: {label}\r\n  </Box>\r\n};\r\n// color: #FFCBA4\r\n\r\nexport default InfoMessagesWidget;","import { ReactElement } from \"react\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport \"./RearChildrenOptionSelector.scss\";\r\n\r\nconst RearChildrenOptionSelector = (props: any): ReactElement => {\r\n  const { setState, actionProvider } = props;\r\n\r\n  const setOption = async (option: any) => {\r\n    setState((state: any) => ({\r\n      ...state,\r\n      // stepID: 5,\r\n      rearChildren: option,\r\n    }));\r\n\r\n    actionProvider.handleRearChildrenOptionWidget(option);\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"option-selector-button-container\">\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={() => setOption(true)}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.Yes\" />\r\n        </button>\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={() => setOption(false)}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.No\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RearChildrenOptionSelector;\r\n","import \"./UndividedEstateWidget.scss\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { ReactElement } from \"react\";\r\n\r\n\r\nconst UndividedEstateWidget = (props: any): ReactElement => {\r\n  const { actionProvider } = props;\r\n\r\n  const setOption = (option: string) => {\r\n    actionProvider.handleOwnershipResponse(option);\r\n  };\r\n\r\n  const onClickHandler = (e: any): void => {\r\n    const thisButton = e.target as HTMLButtonElement;\r\n    const currentParent = thisButton.parentElement;\r\n    if (currentParent?.hasChildNodes) {\r\n      const allCurrentButtons = Object.values(currentParent.childNodes) as HTMLButtonElement[];\r\n      for (const childEl of allCurrentButtons) {\r\n        childEl.style.pointerEvents = \"none\";\r\n        childEl.disabled = true;\r\n      }\r\n      thisButton.style.background = \"darkolivegreen\";\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"option-selector-button-container\">\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(\"FELLESEIE\")\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE1\" />\r\n        </button>\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(\"DELVIS SÆREIE\")\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE2\" />\r\n        </button>\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(\"FULLT SÆREIE\")\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE3\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UndividedEstateWidget;\r\n","import { useState } from \"react\";\r\nimport AppBar from \"@mui/material/AppBar\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Toolbar from \"@mui/material/Toolbar\";\r\nimport { RestartAlt } from \"@mui/icons-material\";\r\nimport { Button, Typography } from \"@mui/material\";\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\nexport default function ChatHeader(props: any) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleCloseNo = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleCloseYes = () => {\r\n    restartBot();\r\n    setOpen(false);\r\n  }\r\n\r\n  const restartBot = () => {\r\n    props.actionProvider.resetChatbot();\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ flexGrow: 1 }}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n            Conversation with ArveBot\r\n          </Typography>\r\n          <Button onClick={handleClickOpen} style={{ backgroundColor: \"rgb(92, 204, 157)\" }}>\r\n            <RestartAlt fontSize=\"large\" />\r\n          </Button>\r\n          <Dialog\r\n            open={open}\r\n            onClose={handleCloseNo}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle id=\"alert-dialog-title\">\r\n              Restart ChatBot?\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText id=\"alert-dialog-description\">\r\n                Do you really want to finish current session and start over?\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleCloseNo}>No</Button>\r\n              <Button onClick={handleCloseYes} autoFocus>\r\n                Yes\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </Box>\r\n  );\r\n}\r\n","export enum ParentChildSelector {\r\n  child = 0,\r\n  parent = 1,\r\n  testator = -1,\r\n  grandParent = 2,\r\n  spouse = 3,\r\n  cohabitant = 4,\r\n  undividedSpouse = 5,\r\n}\r\n","import { ParentChildSelector } from \"../Enums/ParentChildSelector\";\r\n\r\nexport class NodeEntity {\r\n  _id: number;\r\n  _level: number;\r\n  _path: Array<[number, number]>;\r\n  _parents: Array<number>;\r\n  _children: Array<number>;\r\n  _spouse: number | null;\r\n  _cohabitant: number | null;\r\n  _undividedEstateSpouse: number | null;\r\n  _relationshipMap: Map<string, string>;\r\n  _childCount: number;\r\n  _processChildNodePos: number;\r\n  constructor(id: number, level: number) {\r\n    this._id = id;\r\n    this._level = level;\r\n    this._path = [];\r\n    this._parents = [];\r\n    this._children = [];\r\n    this._spouse = null;\r\n    this._cohabitant = null;\r\n    this._undividedEstateSpouse = null;\r\n    this._relationshipMap = this._getRelationshipMap();\r\n    this._childCount = 0;\r\n    this._processChildNodePos = 0;\r\n  }\r\n  _getRelationshipMap = (): Map<string, string> => {\r\n    return new Map<string, string>([\r\n      [\"0\", \"child\"],\r\n      [\"00\", \"grandchild\"],\r\n      [\"1\", \"parent\"],\r\n      [\"10\", \"brother/sister\"],\r\n      [\"100\", \"nephew/niece\"],\r\n      [\"1000\", \"grandniece\"],\r\n      [\"12\", \"grandparent\"],\r\n      [\"120\", \"uncle/aunt\"],\r\n      [\"1200\", \"cousin\"],\r\n      [\"\", \"\"],\r\n    ]);\r\n    return new Map<string, string>();\r\n  };\r\n  setPath(prevPath: Array<[number, number]>) {\r\n    this._path = prevPath;\r\n  }\r\n  getParentId(nodeMap: Map<number, NodeEntity>) {\r\n    if (this._path.length - 2 < 0) {\r\n      return null;\r\n    }\r\n    const currId = this._path[this._path.length - 2][1];\r\n    const currNode = NodeEntity.getNode(currId, nodeMap);\r\n    if (\r\n      !(\r\n        this._children.includes(this._path[this._path.length - 2][1]) ||\r\n        currNode._undividedEstateSpouse === this._id\r\n      )\r\n    )\r\n      return this._path[this._path.length - 2][1];\r\n    return null;\r\n  }\r\n  getGenerationCount() {\r\n    let parentCount = 0;\r\n    if (this._path.length - 2 < 0) {\r\n      return 0;\r\n    }\r\n    for (let i = this._path.length - 2; i >= 0; i--) {\r\n      if (this._path[i][0] === ParentChildSelector.grandParent) {\r\n        parentCount += 1;\r\n        break;\r\n      } else {\r\n        parentCount += 1;\r\n      }\r\n    }\r\n    return parentCount;\r\n  }\r\n\r\n  add_child = (child: NodeEntity, add_for_both = true): void => {\r\n    const children_array = this._children;\r\n    const child_id = child._id;\r\n    if (!children_array.find((obj) => obj === child_id)) {\r\n      this._children.push(child_id);\r\n    }\r\n    child._path = [...this._path];\r\n    child._path.push([ParentChildSelector.child, child_id]);\r\n    child._level = this.getLevel(child._path);\r\n    if (add_for_both) {\r\n      if (!child._parents.find((obj) => obj === this._id)) {\r\n        child._parents.push(this._id);\r\n      }\r\n    }\r\n  };\r\n  /* eslint-disable @typescript-eslint/no-unused-vars */\r\n  add_parent = (\r\n    parent: NodeEntity,\r\n    add_for_both = true,\r\n    grandParent = false\r\n  ): void => {\r\n    const parents_array = this._parents;\r\n    const parent_id = parent._id;\r\n    if (!parents_array.find((obj) => obj === parent_id)) {\r\n      this._parents.push(parent_id);\r\n    }\r\n    parent._path = [...this._path];\r\n\r\n    parent._path.push([ParentChildSelector.parent, parent_id]);\r\n    parent._level = this.getLevel(parent._path);\r\n    if (parent._level === 2) {\r\n      parent._path[parent._path.length - 1][0] =\r\n        ParentChildSelector.grandParent;\r\n    }\r\n    if (add_for_both) {\r\n      if (!parent._children.find((obj) => obj === this._id)) {\r\n        parent._children.push(this._id);\r\n      }\r\n    }\r\n  };\r\n\r\n  getLatestPathKey = () => {\r\n    if (this._path.length == 0) {\r\n      throw new Error(\"Invalid Case\");\r\n    }\r\n    return this._path[this._path.length - 1][0];\r\n  };\r\n\r\n  getLevel = (path: Array<[number, number]>) => {\r\n    let level = 0;\r\n    path.map((x) => {\r\n      if (x[0] === ParentChildSelector.child) {\r\n        level = level - 1;\r\n      } else if (\r\n        x[0] === ParentChildSelector.parent ||\r\n        x[0] === ParentChildSelector.grandParent\r\n      ) {\r\n        level = level + 1;\r\n      } else {\r\n        level = level + 0;\r\n      }\r\n    });\r\n    return level;\r\n  };\r\n\r\n  static getNode = (id: number, nodeMap: Map<number, NodeEntity>) => {\r\n    const node: NodeEntity | undefined = nodeMap.get(id);\r\n    if (node == undefined) {\r\n      throw new Error(\"Node not found with given id:\" + id);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  setPathforPartner = (partnerSelector: number, partner: NodeEntity) => {\r\n    partner._path = [...this._path];\r\n    partner._path.push([partnerSelector, partner._id]);\r\n  };\r\n  getChildUnprocessedNode() {\r\n    if (this._processChildNodePos < this._children.length) {\r\n      return this._children[this._processChildNodePos++];\r\n    }\r\n  }\r\n\r\n  has_surviving_spouse = () => {\r\n    return true;\r\n  };\r\n\r\n  has_surviving_cohabitant = () => {\r\n    if (this._cohabitant !== null) return true;\r\n    return false;\r\n  };\r\n}\r\n","import Person from \"../ChatbotComponent/Helper/Classes/Person\";\r\nimport { NodeEntity } from \"./Helper/Classes/NodeEntity\";\r\nimport { ChatStepTypes, QuestionType } from \"./Helper/Enums/ChatStepTypes\";\r\nexport interface ChatbotInterface {\r\n  stepID: string;\r\n  person: NodeEntity;\r\n  testator: NodeEntity;\r\n  caseName: string;\r\n  netWealth: number;\r\n  successor_flag: string;\r\n  parent_flag: string;\r\n  temp_person: NodeEntity;\r\n  temp_child: NodeEntity;\r\n  temp_parent: NodeEntity;\r\n  personsMap: Map<number, Person>;\r\n  nodeMap: Map<number, NodeEntity>;\r\n  id: number;\r\n  deceasedParentsArray: Array<number>;\r\n  grandParent_flag: string;\r\n  rearChildrenResponse: boolean;\r\n  undividedEstate: {\r\n    undividedEstateChoice: boolean;\r\n    undivided_flag: string;\r\n    totalEstateValue: number;\r\n    undividedEstateSeparateWealth: number;\r\n    temp_first: number;\r\n    temp_last: number;\r\n  };\r\n  tempMessages: any;\r\n  successorProcessArray: Array<[number, number]>;\r\n  isUndividedParent: boolean;\r\n  yesNoClickedFlag: boolean;\r\n}\r\n\r\nexport const ChatbotState: ChatbotInterface = {\r\n  stepID: ChatStepTypes.initalStep,\r\n  person: new NodeEntity(0, 0),\r\n  testator: new NodeEntity(0, 0),\r\n  caseName: \"\",\r\n  netWealth: 0,\r\n  successor_flag: QuestionType.initialQuestion,\r\n  parent_flag: QuestionType.initialQuestion,\r\n  temp_person: new NodeEntity(0, 0),\r\n  temp_child: new NodeEntity(0, 0),\r\n  temp_parent: new NodeEntity(0, 0),\r\n  personsMap: new Map(),\r\n  nodeMap: new Map(),\r\n  id: 1,\r\n  deceasedParentsArray: [],\r\n  grandParent_flag: QuestionType.initialQuestion,\r\n  rearChildrenResponse: false,\r\n  undividedEstate: {\r\n    undividedEstateChoice: false,\r\n    undivided_flag: QuestionType.initialQuestion,\r\n    totalEstateValue: 0,\r\n    undividedEstateSeparateWealth: 0,\r\n    temp_first: 0,\r\n    temp_last: 0,\r\n  },\r\n  tempMessages: [],\r\n  successorProcessArray: [],\r\n  isUndividedParent: false,\r\n  yesNoClickedFlag: false,\r\n};\r\n\r\nexport const InitialChatbotState: any = {\r\n  stepID: ChatStepTypes.initalStep,\r\n  person: new NodeEntity(0, 0),\r\n  testator: new NodeEntity(0, 0),\r\n  caseName: \"\",\r\n  netWealth: 0,\r\n  successor_flag: QuestionType.initialQuestion,\r\n  parent_flag: QuestionType.initialQuestion,\r\n  temp_person: new NodeEntity(0, 0),\r\n  temp_child: new NodeEntity(0, 0),\r\n  temp_parent: new NodeEntity(0, 0),\r\n  personsMap: new Map(),\r\n  nodeMap: new Map(),\r\n  id: 1,\r\n  deceasedParentsArray: [],\r\n  grandParent_flag: QuestionType.initialQuestion,\r\n  rearChildrenResponse: false,\r\n  undividedEstate: {\r\n    undividedEstateChoice: false,\r\n    undivided_flag: QuestionType.initialQuestion,\r\n    totalEstateValue: 0,\r\n    undividedEstateSeparateWealth: 0,\r\n    temp_first: 0,\r\n    temp_last: 0,\r\n  },\r\n  tempMessages: [],\r\n  successorProcessArray: [],\r\n  messages: [],\r\n};\r\n","export enum ValidationType {\r\n  emptyValue = 0,\r\n  invalidAmount = 1,\r\n  onlyDigit = 2,\r\n  incorrectValueForBoolean = 3,\r\n}\r\nexport enum DefaultWarningMessage {\r\n  emptyValueMessage = \"The field cannot be empty\",\r\n  onlyDigitMessage = \"Please enter only number.\",\r\n  errorForBooleanMessage = \"Please choose correct value or write 'yes/ja', 'no/nei'\",\r\n}\r\n","import { createChatBotMessage } from \"react-chatbot-kit\";\r\nimport OptionSelector from \"./Custom/Widgets/OptionSelector/OptionSelector\";\r\nimport InfoMessageWidget from \"./Custom/Widgets/InfoMessagesWidget/InfoMessagesWidget\";\r\nimport RearChildrenOptionSelector from \"./Custom/Widgets/RearChildrenOptionSelector/RearChildrenOptionSelector\";\r\nimport UndividedEstateWidget from \"./Custom/Widgets/UndividedEstateWidget/UndividedEstateWidget\";\r\nimport \"react-chatbot-kit/build/main.css\";\r\nimport \"../chatbot.scss\";\r\nimport ChatHeader from \"../OtherComponent/ChatHeader/ChatHeader\";\r\nimport { ChatbotState } from \"./Generics\";\r\nimport Norsk from \"../../../languages/translationNO.json\";\r\nimport { createIntl, createIntlCache } from \"react-intl\";\r\nconst cache = createIntlCache();\r\nconst intl = createIntl({ locale: \"nb-NO\", messages: Norsk }, cache);\r\n\r\nconst botName = \"Arvebot\";\r\nconst value = intl.formatMessage({ id: \"Chatbot.TESTATOR_QUESTION\" });\r\nconst config = {\r\n  botName: botName,\r\n  lang: \"no\",\r\n  customStyles: {\r\n    botMessageBox: {\r\n      backgroundColor: \"#376B7E\",\r\n    },\r\n    chatButton: {\r\n      backgroundColor: \"#5ccc9d\",\r\n    },\r\n  },\r\n  state: ChatbotState,\r\n  initialMessages: [createChatBotMessage(value, {})],\r\n  customComponents: {\r\n    header: (actionProvider) => <ChatHeader actionProvider={actionProvider} />,\r\n  },\r\n\r\n  widgets: [\r\n    {\r\n      widgetName: \"optionSelectorWidget\",\r\n      widgetFunc: (props) => <OptionSelector {...props} />,\r\n    },\r\n    {\r\n      widgetName: \"RearChildrenSelectorWidget\",\r\n      widgetFunc: (props) => <RearChildrenOptionSelector {...props} />,\r\n    },\r\n    {\r\n      widgetName: \"InfoMessage\",\r\n      widgetFunc: (props) => <InfoMessageWidget {...props} />,\r\n    },\r\n    {\r\n      widgetName: \"undividedEstateWidget\",\r\n      widgetFunc: (props) => <UndividedEstateWidget {...props} />,\r\n    },\r\n  ],\r\n};\r\nexport default config;\r\n","export enum BinaryAnswerTypeYes {\r\n  \"yes\",\r\n  \"ja\",\r\n}\r\n\r\nexport enum BinaryAnswerTypeNo {\r\n  \"no\",\r\n  \"nei\",\r\n}\r\n","import ActionProvider from \"../../ActionProvider\";\r\nimport { BinaryAnswerTypeNo, BinaryAnswerTypeYes } from \"../Enums/BinaryAnswerTypes\";\r\nimport { DefaultWarningMessage, ValidationType } from \"../Enums/ValidationType\";\r\nimport _ from \"lodash\";\r\n\r\nexport class ChatbotValidation {\r\n    constructor(private actionProvider: ActionProvider, private chatbotState: any) { }\r\n    validate = (message: string, validationTypes: Array<number>, warningMessage?: string): boolean => {\r\n\r\n        for (const validationType of validationTypes) {\r\n            if (warningMessage === undefined) {\r\n                warningMessage = this.getDefaultWarningMessage(validationType);\r\n            }\r\n            let validationResult = false;\r\n            switch (validationType) {\r\n                case ValidationType.emptyValue:\r\n                    validationResult = this.validateEmpty(message);\r\n                    break\r\n                case ValidationType.invalidAmount:\r\n                    validationResult = this.validateAmount(message);\r\n                    break\r\n                case ValidationType.onlyDigit:\r\n                    validationResult = this.validateDigit(message);\r\n                    break\r\n                case ValidationType.incorrectValueForBoolean:\r\n                    validationResult = this.validateValueForBoolean(message);\r\n                    break;\r\n                default:\r\n                    console.error(\"Invalid Validation type\")\r\n                    return false;\r\n            }\r\n            if (!validationResult && this.chatbotState) {\r\n                this.showWarning(warningMessage)\r\n                const messageCopy = _.cloneDeep(this.chatbotState.messages)\r\n                this.actionProvider.handleValidation(messageCopy);\r\n                return false;\r\n            } else {\r\n                this.hideWarning();\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    validateEmpty = (message: string) => {\r\n        //\r\n        if (message.length === 0) {\r\n            // remove last message\r\n            return false\r\n        }\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line\r\n    validateAmount = (message: string) => {\r\n        return false\r\n    }\r\n\r\n    validateDigit = (message: string) => {\r\n        const checkNatural = /^(0|([1-9]\\d*))$/\r\n        if (checkNatural.test(message)) return true\r\n        return false\r\n    }\r\n\r\n    validateValueForBoolean = (message: string) => {\r\n        if (((message in BinaryAnswerTypeYes) || (message in BinaryAnswerTypeNo)) && !(message in [0, 1])) {\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private showWarning = (warningMessage: string) => {\r\n        const warningDiv = document.getElementById(\"chatbot-warning-div\");\r\n        if (warningDiv) {\r\n            warningDiv.innerHTML = warningMessage\r\n            warningDiv.style.display = \"block\";\r\n            return;\r\n        }\r\n    }\r\n    private hideWarning = () => {\r\n        const warningDiv = document.getElementById(\"chatbot-warning-div\");\r\n        if (warningDiv) {\r\n            warningDiv.style.display = \"none\";\r\n            return;\r\n        }\r\n    }\r\n    getDefaultWarningMessage(validationType: ValidationType) {\r\n        switch (validationType) {\r\n            case ValidationType.emptyValue:\r\n                return DefaultWarningMessage.emptyValueMessage;\r\n            case ValidationType.incorrectValueForBoolean:\r\n                return \"error boolean message\"\r\n            // return DefaultWarningMessage.errorForBooleanMessage;\r\n            default:\r\n                return \"Improve error message in ChatbotType.ts\";\r\n        }\r\n    }\r\n\r\n\r\n}","import ActionProvider from \"./ActionProvider\";\r\nimport { ChatbotInterface } from \"./Generics\";\r\nimport { ChatStepTypes, QuestionType } from \"./Helper/Enums/ChatStepTypes\";\r\nimport { ValidationType } from \"./Helper/Enums/ValidationType\";\r\nimport { ChatbotValidation } from \"./Helper/Methods/ChatbotValidation\";\r\nimport { messageService } from \"./services/ChatbotCommunicator\";\r\nimport { BinaryAnswerTypeYes, BinaryAnswerTypeNo } from \"../ChatbotComponent/Helper/Enums/BinaryAnswerTypes\"\r\n\r\nclass MessageParser {\r\n  actionProvider: ActionProvider;\r\n  state: any;\r\n  chatbotValidator: ChatbotValidation;\r\n  constructor(actionProvider: ActionProvider, state: any) {\r\n    this.actionProvider = actionProvider;\r\n    this.state = state;\r\n    this.chatbotValidator = new ChatbotValidation(actionProvider, state);\r\n    // this.setRevertListeners();\r\n  }\r\n\r\n  parse(message: string): ReturnType<() => void> {\r\n\r\n\r\n    message = message.trim();\r\n\r\n    const curState = this.state;\r\n    curState.yesNoClickedFlag = false;\r\n\r\n    // initialStep\r\n    if (curState.stepID === ChatStepTypes.initalStep) {\r\n      if (this.chatbotValidator.validate(message, [ValidationType.emptyValue])) {\r\n        return this.actionProvider.handleTestator(message);\r\n      }\r\n      return;\r\n    }\r\n\r\n    //testatorStep\r\n    if (curState.stepID === ChatStepTypes.testatorStep) {\r\n      message = message.toLowerCase();\r\n      if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons()\r\n          return this.actionProvider.handleUndividedEstateChoice(true)\r\n\r\n        }\r\n        else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleUndividedEstateChoice(false)\r\n        }\r\n        else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // undividedEstateStep\r\n    if (curState.stepID === ChatStepTypes.undividedEstateStep) {\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleTotalEstateValueResponse(message)\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part2) {\r\n        return this.actionProvider.handleOwnershipResponse(message)\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part3) {\r\n        return this.actionProvider.handleDelvisFirstResponse(message)\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part4) {\r\n        return this.actionProvider.handleDelvisSecondResponse(message)\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part5) {\r\n        return this.actionProvider.handleFulltSaereieResponse(message);\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part6) {\r\n        if (curState.successor_flag === QuestionType.part1) {\r\n          return this.actionProvider.handleSuccessorInput(message);\r\n        } else if (curState.successor_flag === QuestionType.part2) {\r\n          message = message.toLowerCase();\r\n          if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n            if (message in BinaryAnswerTypeYes) {\r\n              this.disableButtons()\r\n              return this.actionProvider.handleChildAliveOption(true)\r\n            }\r\n            else if (message in BinaryAnswerTypeNo) {\r\n              this.disableButtons();\r\n              return this.actionProvider.handleChildAliveOption(false)\r\n            }\r\n            else {\r\n              alert(\"check for error\");\r\n            }\r\n          }\r\n        }\r\n        else if (curState.successor_flag === QuestionType.part3) {\r\n          if (this.chatbotValidator.validate(message, [ValidationType.emptyValue, ValidationType.onlyDigit])) {\r\n            return this.actionProvider.handleSuccessorCount(message);\r\n          } else {\r\n            // remove last message and update stepid\r\n            // return this.actionProvider.handleValidation();\r\n          }\r\n        }\r\n        if (curState.parent_flag === QuestionType.part1) {\r\n          return this.actionProvider.handleParentsInput(message);\r\n        }\r\n        else if (curState.parent_flag == QuestionType.part2) {\r\n          message = message.toLowerCase();\r\n          if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n            if (message in BinaryAnswerTypeYes) {\r\n              this.disableButtons()\r\n              return this.actionProvider.handleParentAliveOption(true)\r\n            }\r\n            else if (message in BinaryAnswerTypeNo) {\r\n              this.disableButtons();\r\n              return this.actionProvider.handleParentAliveOption(false)\r\n            }\r\n            else {\r\n              alert(\"check for error\");\r\n            }\r\n          }\r\n        }\r\n        return this.actionProvider.handleUndividedEstateSpouse(message)\r\n      }\r\n      else {\r\n        return this.actionProvider.handleNetWealth(message);\r\n      }\r\n\r\n    }\r\n\r\n    // netWealthStep\r\n    if (curState.stepID === ChatStepTypes.netWealthStep) {\r\n      return this.actionProvider.handleNetWealth(message)\r\n    }\r\n\r\n    // underAgeStep\r\n    if (curState.stepID === ChatStepTypes.underAgeStep) {\r\n      message = message.toLowerCase();\r\n      if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons()\r\n          return this.actionProvider.handleUnderAge(true)\r\n\r\n        }\r\n        else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleUnderAge(false)\r\n        }\r\n        else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // spouse start\r\n    if (curState.stepID === ChatStepTypes.spouseChoice) {\r\n      message = message.toLowerCase();\r\n      if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons()\r\n          return this.actionProvider.handleSpouseChoice(true)\r\n        }\r\n        else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleSpouseChoice(false)\r\n        }\r\n        else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n    if (curState.stepID === ChatStepTypes.spouseStep) {\r\n      if (this.chatbotValidator.validate(message, [ValidationType.emptyValue])) {\r\n        return this.actionProvider.handleSpouseInput(message);\r\n      }\r\n    }\r\n    // spouse end\r\n\r\n\r\n    // cohabitant start\r\n    if (curState.stepID === ChatStepTypes.cohabitantChoice) {\r\n      message = message.toLowerCase();\r\n      if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons()\r\n          return this.actionProvider.handleCohabitantChoice(true)\r\n        }\r\n        else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleCohabitantChoice(false)\r\n        }\r\n        else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (curState.stepID === ChatStepTypes.cohabitantStep) {\r\n      return this.actionProvider.handleCohabitantInput(message); //set stepID = 7\r\n    }\r\n\r\n    //  cohabitant end\r\n\r\n\r\n    // successorStep\r\n    if (curState.stepID === ChatStepTypes.successorStep) {\r\n      if (curState.successor_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleSuccessorInput(message);\r\n      } else if (curState.successor_flag === QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons()\r\n            return this.actionProvider.handleChildAliveOption(true)\r\n          }\r\n          else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(false)\r\n          }\r\n          else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      }\r\n      else if (curState.successor_flag === QuestionType.part3) {\r\n        if (this.chatbotValidator.validate(message, [ValidationType.emptyValue, ValidationType.onlyDigit])) {\r\n          return this.actionProvider.handleSuccessorCount(message);\r\n        } else {\r\n          return;\r\n          // remove last message and update stepid\r\n          // return this.actionProvider.handleValidation();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    //  parentsStep\r\n    if (curState.stepID === ChatStepTypes.parentsStep) {\r\n      if (curState.successor_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleSuccessorInput(message);\r\n      } else if (curState.successor_flag === QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons()\r\n            return this.actionProvider.handleChildAliveOption(true)\r\n          }\r\n          else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(false)\r\n          }\r\n          else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      }\r\n      else if (curState.successor_flag === QuestionType.part3) {\r\n        if (this.chatbotValidator.validate(message, [ValidationType.emptyValue, ValidationType.onlyDigit])) {\r\n          return this.actionProvider.handleSuccessorCount(message);\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n      if (curState.parent_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleParentsInput(message);\r\n      }\r\n      else if (curState.parent_flag == QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons()\r\n            return this.actionProvider.handleParentAliveOption(true)\r\n          }\r\n          else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleParentAliveOption(false)\r\n          }\r\n          else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // marriedParentsStep\r\n    if (curState.stepID === ChatStepTypes.marriedParentsStep) {\r\n      message = message.toLowerCase();\r\n      if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons()\r\n          return this.actionProvider.handleMarriedParents(true)\r\n\r\n        }\r\n        else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleMarriedParents(false)\r\n        }\r\n        else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    // grandParentStep\r\n    if (curState.stepID === ChatStepTypes.grandParentStep) {\r\n      if (curState.successor_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleSuccessorInput(message);\r\n      } else if (curState.successor_flag === QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons()\r\n            return this.actionProvider.handleChildAliveOption(true)\r\n\r\n          }\r\n          else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(false)\r\n          }\r\n          else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      }\r\n      else if (curState.successor_flag === QuestionType.part3) {\r\n        if (this.chatbotValidator.validate(message, [ValidationType.emptyValue, ValidationType.onlyDigit])) {\r\n          return this.actionProvider.handleSuccessorCount(message);\r\n        } else {\r\n          return;\r\n          // remove last message and update stepid\r\n          // return this.actionProvider.handleValidation();\r\n        }\r\n      }\r\n      if (curState.parent_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleParentsInput(message);\r\n      }\r\n      else if (curState.parent_flag == QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons()\r\n            return this.actionProvider.handleParentAliveOption(true)\r\n          }\r\n          else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleParentAliveOption(false)\r\n          }\r\n          else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    // finalStep\r\n    if (curState.stepID === ChatStepTypes.finalStep) {\r\n      console.log(curState)\r\n      message = message.toLowerCase();\r\n      if (this.chatbotValidator.validate(message, [ValidationType.incorrectValueForBoolean])) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons()\r\n          return this.actionProvider.handleFinalQuestion(true)\r\n\r\n        }\r\n        else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleFinalQuestion(false)\r\n        }\r\n        else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n      // return this.actionProvider.handleFinalQuestion(message)\r\n    }\r\n    // else {\r\n    //   return this.actionProvider.handleDefault();\r\n    //   return;\r\n    // }\r\n  }\r\n\r\n  disableButtons = () => {\r\n    const buttonElements: any = document.getElementsByClassName(\"option-selector-button\");\r\n    for (let i = 0; i < buttonElements.length; i++) {\r\n      const currentElement = buttonElements[i];\r\n      if (!currentElement.disabled)\r\n        currentElement.disabled = true\r\n      currentElement.style.pointerEvents = \"none\"\r\n    }\r\n  }\r\n\r\n  setRevertListeners = () => {\r\n    messageService.clearAllInternalSubscription();\r\n    /* eslint-disable @typescript-eslint/no-unused-vars */\r\n    const subscription = messageService.getMessageInChatbot().subscribe(message => {\r\n      this.revertState();\r\n    })\r\n    messageService.addInternalSubscription(subscription);\r\n  }\r\n  revertState = () => {\r\n\r\n\r\n    const lastState = messageService.removePreviousState();\r\n    console.log('setting state:');\r\n    console.log(lastState);\r\n\r\n    const previousStates: any = messageService.getPreviousStates();\r\n    console.log('previous States:');\r\n    console.log(previousStates);\r\n\r\n    if (lastState) {\r\n      this.actionProvider.setState((state: any) => {\r\n        state = lastState\r\n        console.log('final state');\r\n        console.log(state);\r\n\r\n\r\n        return state;\r\n      });\r\n    }\r\n  }\r\n  flagSwitch = (curState: ChatbotInterface, message: any) => {\r\n    if (curState.successor_flag === QuestionType.part1) {\r\n      return this.actionProvider.handleSuccessorInput(message);\r\n    } else if (curState.successor_flag === QuestionType.part2)\r\n      return this.actionProvider.handleChildAliveOption(message);\r\n    else if (curState.successor_flag === QuestionType.part3) {\r\n      if (this.chatbotValidator.validate(message, [ValidationType.emptyValue, ValidationType.onlyDigit])) {\r\n        return this.actionProvider.handleSuccessorCount(message);\r\n      } else {\r\n        // remove last message and update stepid\r\n        // return this.actionProvider.handleValidation();\r\n      }\r\n    }\r\n    return null\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\nexport default MessageParser;\r\n// function dispatch(arg0: { type: string; payload: any; }) {\r\n//   throw new Error(\"Function not implemented.\");\r\n// }\r\n\r\n","import { ReactElement, useRef, useState } from \"react\";\r\nimport Popover from \"@mui/material/Popover\";\r\nimport \"./ShowInfoWidget.scss\";\r\nimport LiveHelpIcon from '@mui/icons-material/LiveHelp';\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { FormattedMessage } from \"react-intl\";\r\n// import { Typography } from \"@mui/material\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  popover: {\r\n    pointerEvents: \"none\",\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(1),\r\n    backgroundColor: \"#e8e4c9\",\r\n  },\r\n}));\r\n\r\nconst ShowInfoWidget = (props: any): ReactElement => {\r\n  const classes = useStyles();\r\n  /*\r\n   used reference to parent element for correcting the scrollbar conflict issue on popover show.\r\n   https://stackoverflow.com/questions/53985436/material-ui-unblock-scrolling-when-popover-is-opened\r\n  */\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const handlePopoverOpen = (event: any) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handlePopoverClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  return (\r\n    <div className=\"infoDiv\" ref={containerRef}>\r\n      <LiveHelpIcon\r\n        className=\"InfoWidgetIcon\"\r\n        onMouseEnter={handlePopoverOpen}\r\n        onMouseLeave={handlePopoverClose}\r\n        aria-owns={open ? \"mouse-over-popover\" : undefined}\r\n        aria-haspopup=\"true\"\r\n      />\r\n\r\n      <Popover\r\n        id=\"mouse-over-popover\"\r\n        className={classes.popover}\r\n        classes={{\r\n          paper: classes.paper,\r\n        }}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"right\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"left\",\r\n        }}\r\n        onClose={handlePopoverClose}\r\n        disableRestoreFocus\r\n        container={containerRef.current}\r\n      >\r\n        <FormattedMessage id={props.text} />\r\n      </Popover>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShowInfoWidget;\r\n","import { ReactElement } from \"react\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport ShowInfoWidget from \"../../Custom/Widgets/ShowInfoWidget/ShowInfoWidget\";\r\n\r\nclass QuestionConstants {\r\n\r\n  TestatorQuestion = (<FormattedMessage id=\"Chatbot.TESTATOR_QUESTION\" />);\r\n\r\n  UndividedEstateQuestion = (\r\n    <FormattedMessage id=\"Chatbot.UNDIVIDED_ESTATE_QUESTION\" />\r\n  );\r\n\r\n  YesNoWidgetOptions = {\r\n    widget: \"optionSelectorWidget\",\r\n    withAvatar: true,\r\n    loading: true,\r\n    terminateLoading: true,\r\n  };\r\n\r\n  UndividedEstateResultText = (selectedOption: string): ReactElement => {\r\n    const undividedEstateResultText = (selectedOption === \"true\")\r\n      ? \"Chatbot.Yes\"\r\n      : \"Chatbot.No\";\r\n    return <FormattedMessage id={undividedEstateResultText} />;\r\n  };\r\n\r\n  NetWealthQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.NET_WEALTH_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.NET_WEALTH_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  NetWealthWarning = (<FormattedMessage id=\"Chatbot.NET_WEALTH_WARNING\" />);\r\n\r\n  UnderAgeQuestion = (<FormattedMessage id=\"Chatbot.UNDER_AGE_QUESTION\" />);\r\n\r\n  UnderAgeResultText = (selectedOption: boolean): ReactElement => {\r\n    const underAgeResultText = selectedOption\r\n      ? \"Chatbot.UnderAge\"\r\n      : \"Chatbot.NotUnderAge\";\r\n\r\n    return <FormattedMessage id={underAgeResultText} />;\r\n  };\r\n\r\n\r\n  SpouseChoiceQuestion = (<FormattedMessage id=\"Chatbot.SPOUSE_EXIST_QUESTION\" />);\r\n\r\n\r\n  SpouseQuestion = (<FormattedMessage id=\"Chatbot.SPOUSE_QUESTION\" />);\r\n\r\n\r\n  CohabitantChoiceQuestion = (<FormattedMessage id=\"Chatbot.COHABITANT_EXIST_QUESTION\" />);\r\n\r\n  CohabitantQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.COHABITANT_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.COHABITANT_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  addSuccessorQuestion1 = (person_id: string): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addSuccessorQn1\"\r\n          values={{ person_ID: <strong>{person_id}</strong> }}\r\n        />\r\n        <ShowInfoWidget text=\"Chatbot.CHILD_EXTRA_INFO\" />\r\n      </div>\r\n    );\r\n  };\r\n  addSuccessorQuestion2 = (\r\n    person_id: string,\r\n    child_id_string: ReactElement\r\n  ): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addSuccessorQn2\"\r\n          values={{ person_ID: <strong>{person_id}</strong>, children_IDs: child_id_string }}\r\n        />\r\n        <ShowInfoWidget text=\"Chatbot.CHILD_EXTRA_INFO\" />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  AliveQuestion = (child_id: string): ReactElement => {\r\n    return (\r\n      <FormattedMessage\r\n        id=\"Chatbot.ALIVE_CHILD\"\r\n        values={{ child_ID: child_id }}\r\n      />\r\n    );\r\n  };\r\n\r\n  AliveResultText = (selectedOption: string): ReactElement => {\r\n    const aliveResultText = selectedOption ? \"Chatbot.Yes\" : \"Chatbot.No\";\r\n\r\n    return <FormattedMessage id={aliveResultText} />;\r\n  };\r\n\r\n\r\n  addParentsQuestion1 = (person_id: string): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addParentsQn1\"\r\n          values={{ person_ID: <strong>{person_id}</strong> }}\r\n        />\r\n        <ShowInfoWidget text=\"Chatbot.PARENT_EXTRA_INFO\" />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  askSecondParentChoiceQuestion = (person_id: string): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage id=\"Chatbot.SecondParentChoice\" values={{ person_ID: <strong>{person_id}</strong> }} />\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n  addParentsQuestion2 = (\r\n    person_id: string,\r\n    parent_id_string: ReactElement\r\n  ): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addParentsQn2\"\r\n          values={{ person_ID: <strong>{person_id}</strong>, parents_IDs: parent_id_string }}\r\n        />\r\n        <ShowInfoWidget text=\"Chatbot.PARENT_EXTRA_INFO\" />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  MarriedParents1 = (\r\n    first_parent_id: string,\r\n    second_parent_id: string\r\n  ): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.marriedParents1\"\r\n          values={{ parent1_ID: <strong>{first_parent_id}</strong>, parent2_ID: <strong>{second_parent_id}</strong> }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  MarriedParents2 = (\r\n    first_parent_id: string,\r\n    second_parent_id: string\r\n  ): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.marriedParents2\"\r\n          values={{ parent1_ID: <strong>{first_parent_id}</strong>, parent2_ID: <strong>{second_parent_id}</strong> }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n  addGrandParentsQuestion1 = (parent_id: string): ReactElement => {\r\n    return (<div>\r\n      <FormattedMessage\r\n        id=\"Chatbot.addGrandParentQn1\"\r\n        values={{ parent_id: <strong>{parent_id}</strong> }}\r\n      />\r\n    </div>)\r\n  }\r\n\r\n\r\n  addGrandParentsQuestion2 = (parent_id: string, grandparent_id_string: ReactElement): ReactElement => {\r\n    return (<div>\r\n      <FormattedMessage\r\n        id=\"Chatbot.addGrandParentQn2\"\r\n        values={{ parent_id: <strong>{parent_id}</strong>, grandParents_IDs: grandparent_id_string }}\r\n      />\r\n    </div>)\r\n  }\r\n\r\n  FinalQuestion = (<FormattedMessage id=\"Chatbot.FINAL_QUESTION\" />);\r\n\r\n  EmptyQuestion = <p></p>\r\n  DefaultText = (<FormattedMessage id=\"Chatbot.DEFAULT_TEXT\" />);\r\n\r\n\r\n\r\n  // UndividedEstateStart\r\n\r\n  TotalEstateNetValueQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.TOTAL_ESTATE_NET_VALUE_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.TOTAL_ESTATE_NET_VALUE_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  TotalEstateNetValueWarning = (<FormattedMessage id=\"Chatbot.NET_WEALTH_WARNING\" />);\r\n\r\n\r\n  OwnershipTypeQuestion = (<FormattedMessage id=\"Chatbot.FELLESEIE_QUESTION\" />)\r\n\r\n  OwnershipQuestionWidgetOptions = {\r\n    widget: \"undividedEstateWidget\",\r\n    withAvatar: true,\r\n    loading: true,\r\n    terminateLoading: true,\r\n  }\r\n\r\n  OwnershipTypeWarning = <FormattedMessage id=\"Chatbot.OptionChoiceWrongWarning\" />\r\n\r\n  DelvisFirstQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.DELVIS_SAEREIE_FIRST_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.DELVIS_SAEREIE_FIRST_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  DelvisSecondQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.DELVIS_SAEREIE_LAST_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.DELVIS_SAEREIE_LAST_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  FulltSaereieQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.FULLT_SAEREIE_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.FULLT_SAEREIE_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  UndividedEstateSpouseQuestion = (<div>\r\n    <FormattedMessage id=\"Chatbot.UNDIVIDED_SPOUSE_QUESTION\" />\r\n  </div>)\r\n\r\n  TextBeforeSucsrUndvdSpouse = (<div><FormattedMessage id=\"Chatbot.TextBeforeSucsrUndvdSpouse\" /></div>)\r\n\r\n  // UndividedEstateEnd\r\n  addSuccessorCount = (person_id: string): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addSuccessorCount\"\r\n          values={{ person_ID: <strong>{person_id}</strong> }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  addSuccessorOfParentCount = (person_id: string, existing_child_id: ReactElement): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage id=\"Chatbot.addSuccessorCountExistingParent\"\r\n          values={{ person_ID: <strong>{person_id}</strong>, existing_child_ID: <strong>{existing_child_id}</strong> }} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default QuestionConstants;\r\n","export default class InheritanceConstants {\r\n  DESC_COHABITANT_WITHOUT_COMMON_CHILD =\r\n    \"Arvelater har ikke felles barn med samboer og vedkommende har ikke krav på arv (MED MINDRE DE VENTER FELLES BARN!).\";\r\n  DESC_NO_SPOUSE_OR_COHABITANT =\r\n    \"Arvelater etterlater hverken ektefelle eller samboer.\";\r\n  DESC_COHABITANT_NO_CLOSE_RELATIVES_2 =\r\n    \"Arvelaters nærmeste gjenlevende slektning er i tredje arvegangsklasse, men etterkommer av barnebarn av arvelaters besteforeldre. Hele arven går da til gjenlevende samboer med felles barn.\";\r\n  DESC_COHABITANT_NO_CLOSE_RELATIVES =\r\n    \"Arvelater har ingen gjenlevende slektninger i de tre første arvegangsklassene. Hele arven går da til gjenlevende samboer med felles barn.\";\r\n  DESC_SPOUSE_NO_CLOSE_RELATIVES_2 =\r\n    \"Arvelaters nærmeste gjenlevende slektning er i andre arvegangsklasse, men etterkommer av barnebarn av arvelaters besteforeldre. Hele arven går da til gjenlevende ektefellep.\";\r\n  DESC_SPOUSE_NO_CLOSE_RELATIVES =\r\n    \"Arvelater har ingen gjenlevende slektninger i de to første arvegangsklassene. Hele arven går da til gjenlevende ektefelle.\";\r\n\r\n  G = 101351;\r\n  MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN = 4 * this.G;\r\n  FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN = 1 / 4;\r\n  MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS = 6 * this.G;\r\n  FRACTION_INHERITANCE_SPOUSE_VS_PARENTS = 1 / 2;\r\n  MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN = 4 * this.G;\r\n  FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN = 0;\r\n  MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS = 4 * this.G;\r\n  FRACTION_INHERITANCE_COHABITANT_VS_PARENTS = 0;\r\n  FRACTION_PLIKTDEL = 2 / 3;\r\n  LINE_MAXIMUM_PLIKTDEL = 15 * this.G;\r\n\r\n  LAW_LINKS = {\r\n    1: \"https://lovdata.no/NL/lov/1972-03-03-5/§1\",\r\n    2: \"https://lovdata.no/NL/lov/1972-03-03-5/§2\",\r\n    3: \"https://lovdata.no/NL/lov/1972-03-03-5/§3\",\r\n    4: \"https://lovdata.no/NL/lov/1972-03-03-5/§4\",\r\n    6: \"https://lovdata.no/NL/lov/1972-03-03-5/§6\",\r\n    28: \"https://lovdata.no/NL/lov/1972-03-03-5/§28\",\r\n    36: \"https://lovdata.no/NL/lov/1972-03-03-5/§36\",\r\n    46: \"https://lovdata.no/NL/lov/1972-03-03-5/§46\",\r\n    KapittelVI: \"https://lovdata.no/pro/NL/lov/1972-03-03-5/KAPITTEL_1-7\",\r\n  };\r\n\r\n  CODE_PARAGRAPHS = {\r\n    \"1 første og annet ledd\":\r\n      \"Næraste slektsarvingar er avkomet (livsarvingane) til arvelataren.\\n\\nBarna til arvelataren arvar likt dersom ikkje anna går fram av særskilde lovreglar. Er eit barn død, går arvelotten til livsarvingane etter barnet, med lik part på kvar grein.\",\r\n    \"2 første, andre og tredje ledd\":\r\n      \"Har arvelataren ikkje livsarving, går arven til foreldra hans.\\n\\nForeldre arvar likt. Er far eller mor død, går arvelotten til hans eller hennar livsarvingar, med lik part på kvar grein.\\n\\nEr ein av foreldra død, og er det ikkje livsarving etter han, går heile arven til den andre av foreldra eller til hans eller hennar livsarvingar. Døyr arvelataren før fylte 18 år, går likevel halve arven til besteforeldra på den døde fars eller mors side eller til deira livsarvingar i samsvar med § 3, dersom foreldra ikkje var gifte med kvarandre då den første døydde eller det låg føre omstende som nemnt i § 8. Er det heller ingen slike arvingar i live, gjeld reglane i første punktum.\",\r\n    \"3 første ledd, andre punktum\":\r\n      \"Fjernare slektningar enn barnebarn til besteforeldre har likevel ikkje arverett etter loven.\",\r\n    \"3 første og annet ledd\":\r\n      \"Har arvelataren ikkje livsarving eller ektemake, og lever ikkje far eller mor, eller livsarving etter far eller mor, går arven til besteforeldra hans eller til livsarvingar etter dei, slik at reglane i § 2 andre ledd gjeld tilsvarande. Fjernare slektningar enn barnebarn til besteforeldre har likevel ikkje arverett etter loven.\\n\\nEr ein av besteforeldra død utan barn eller barnebarn i live, går arvelotten hans til den andre av besteforeldra på same side eller til barn eller barnebarn til denne. Er det ikkje arvingar på den eine sida, går heile arven til arvingane på den andre sida.\",\r\n    4: \"Arverett etter kapitlet her gjeld berre morskap eller farskap som følgjer av reglane i barnelova.​\\n\\nFaren og farsslekta tar ikkje arv etter barnet dersom det er avla med ei handling som er brotsverk mot noka føresegn i straffelovas​ §§ 291, 292 bokstav a og d, 293, 294, 295, 296, 299 bokstav a, 300 bokstav a og d, 301, 302 første punktum, 303, 312 og 314 bokstav a og som faren er dømd til fengselsstraff for utan vilkår. Dette gjeld likevel ikkje arvelott som i verdi svarar til arv eller gåve barnet har fått frå faren eller nokon i farsslekta\",\r\n    \"6 første ledd\":\r\n      \"Ektemaken har rett til fjerdeparten av arven når det er livsarvinger etter arvelateren. Minstearven skal likevel tilsvare 4 ganger grunnbeløpet i folketrygda ved dødsfallet. Er dei næraste slektsarvingane til arvelateren foreldra hans eller avkom etter desse, har ektemaken rett til halvparten av arven, likevel minst 6 ganger grunnbeløpet i folketrygda ved dødsfallet.\",\r\n    \"6 første og annet ledd\":\r\n      \"Ektemaken har rett til fjerdeparten av arven når det er livsarvinger etter arvelateren. Minstearven skal likevel tilsvare 4 ganger grunnbeløpet i folketrygda ved dødsfallet. Er dei næraste slektsarvingane til arvelateren foreldra hans eller avkom etter desse, har ektemaken rett til halvparten av arven, likevel minst 6 ganger grunnbeløpet i folketrygda ved dødsfallet.\\n\\nEr det ikkje arvingar som nemnt i første ledd, arvar ektemaken alt.\",\r\n    \"28 b første ledd\":\r\n      \"Den som var sambuar med den avdøde ved dødsfallet og har, har hatt eller ventar barn med den avdøde, har rett til arv svarande til 4 gonger grunnbeløpet i folketrygda ved dødsfallet, jamvel om det er livsarvingar etter arvelataren. Same retten til arv utan omsyn til livsarvingar har også den som har vore sambuar med den avdøde i minst dei siste fem åra før dødsfallet, dersom den avdøde har fastsett det i testament.\",\r\n    36: \"Barn av arvelataren som ikkje har fått oppfostringa si fullenda på den tid arvelataren døyr, har krav på ein sum av buet som forlott til å sikre livsopphald og utdanning dersom dette er rimeleg etter tilhøva. Storleiken av summen skal avpassast etter tilhøva. Ved avgjerda skal det m.a. takast omsyn til den arvelotten det uforsytte barnet elles får, om barnet har eigen formue, om barnet er sikra oppfostring på annan måte, og kva utgifter arvelataren har hatt til utdanning av dei andre barna sine. Er det fleire barn utan forsyting, skal kvart barn ha så mykje som er rimelig når det blir tatt omsyn til kva dei treng og til tilhøva elles.​\\n\\nHeimeverande barn som utan rimeleg vederlag har gjort særleg mykje for arvelataren, kan ved arveoppgjeret krevje å få ein sum av buet som forlott dersom dette er rimeleg etter tilhøva. Storleiken av summen skal avpassast etter tilhøva. Ved avgjerda skal det m.a. takast omsyn til den innsats barnet har gjort, dei utsikter det har i arbeidslivet, kor stor arvelott barnet elles vil få og den økonomiske stoda i det heile til barnet​ og dei andre arvingane\",\r\n    \"46 første ledd, første punktum\":\r\n      \"Har avdøde ikkje slektningar, ektemake eller sambuar som arvar han, og har han ikkje gjort testament om arven, skal nettoformuen fordelast til frivillig verksemd til fordel for barn og unge.\",\r\n  };\r\n}\r\n","export default class Person {\r\n  _id: number;\r\n  _personName = \"\";\r\n  _undividedEstateSpouse: Person | undefined;\r\n  _deceased = false;\r\n  _spouse: Person | undefined;\r\n  _cohabitant: Person | undefined;\r\n  _childrenRearing: boolean | undefined;\r\n  _underAge: boolean | undefined;\r\n\r\n  constructor(personid: string, id = 1) {\r\n    this._personName = personid;\r\n    this._id = id;\r\n  }\r\n\r\n  get person_id(): string {\r\n    return this._personName;\r\n  }\r\n\r\n  set person_id(value: string) {\r\n    this._personName = value;\r\n  }\r\n\r\n  get deceased(): boolean {\r\n    return this._deceased;\r\n  }\r\n\r\n  set deceased(value: boolean) {\r\n    this._deceased = value;\r\n  }\r\n\r\n  get undividedEstateSpouse(): Person | undefined {\r\n    return this._undividedEstateSpouse;\r\n  }\r\n\r\n  set undividedEstateSpouse(value: Person | undefined) {\r\n    this._undividedEstateSpouse = value;\r\n  }\r\n\r\n  get spouse(): Person | undefined {\r\n    return this._spouse;\r\n  }\r\n\r\n  set_spouse = (spouse: Person, add_for_both = true): void => {\r\n    if (!this._spouse) console.log(this._spouse == spouse);\r\n    else this._spouse = spouse;\r\n    if (add_for_both) spouse.set_spouse(this, false);\r\n  };\r\n\r\n  hasSurvivingSpouse = (): boolean => {\r\n    if (this._spouse !== undefined && !this._spouse._deceased) return true;\r\n    else return false;\r\n  };\r\n\r\n  get cohabitant(): Person | undefined {\r\n    return this._cohabitant;\r\n  }\r\n\r\n  set_cohabitant = (cohabitant: Person, add_for_both = true): void => {\r\n    if (!this._cohabitant) console.log(this._cohabitant == cohabitant);\r\n    else this._cohabitant = cohabitant;\r\n    if (add_for_both) cohabitant.set_cohabitant(this, false);\r\n  };\r\n\r\n  static getPerson = (id: number, personMap: Map<number, Person>) => {\r\n    const person: Person | undefined = personMap.get(id);\r\n    if (person == undefined) {\r\n      throw new Error(\"Person not found with given id:\" + id);\r\n    }\r\n    return person;\r\n  };\r\n\r\n  has_surviving_cohabitant(): boolean {\r\n    if (this._cohabitant && !this._cohabitant._deceased) return true;\r\n    else return false;\r\n  }\r\n}\r\n","import Person from \"./Person\";\r\n\r\nclass Family {\r\n  _person_dict: Record<string, Person>;\r\n\r\n  constructor() {\r\n    this._person_dict = {};\r\n  }\r\n\r\n  get_or_create_person(personID: string): Person {\r\n    if (personID in Object.keys(this._person_dict)) {\r\n      return this._person_dict[personID];\r\n    } else {\r\n      const person = new Person(personID);\r\n      this._person_dict[personID] = person;\r\n      return person;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Family;\r\n","\r\n// error:\r\n// 1- no digits in input error\r\n// 2- separatorCount error\r\n// 3- digitsBeforeSeparatorValue error\r\n// 4- unknown error, debug\r\n// 5- normal pass\r\n//\r\nconst checkSeparatorCount = (initialCurrencyValue: string): number => {\r\n    let checkSeparatorCount = 0;\r\n    for (const i of initialCurrencyValue) {\r\n        if (i == \",\" || i == \" \" || i == \".\") {\r\n            checkSeparatorCount += 1;\r\n        }\r\n    }\r\n    if (checkSeparatorCount == 0) {\r\n        return 0 // no separators, valid input, format it.\r\n    }\r\n    else if (checkSeparatorCount > 1) {\r\n        // more than 1 symbol in the entered value, invalid input, error\r\n        return 2\r\n    }\r\n    else {\r\n        return 1 // one separator, valid input.\r\n    }\r\n}\r\n\r\n\r\nconst checkDigitsBeforeSeparatorValue = (initialCurrencyValue: string): string => {\r\n    let digitsBeforeSymbol = 0;\r\n    for (const i of initialCurrencyValue) {\r\n        if (digitsBeforeSymbol > 3) {\r\n            // more than 3 digits before symbol\r\n            return \"incorrect\"\r\n        }\r\n        else if (i !== \",\" && i !== \" \" && i !== \".\") {\r\n            digitsBeforeSymbol += 1;\r\n        }\r\n        else {\r\n            digitsBeforeSymbol = 0;\r\n        }\r\n\r\n    }\r\n    return \"correct\"\r\n}\r\n\r\nconst removeTextFromCurrencyString = (inputCurrency: string): string => {\r\n    let beginningValue = \"\";\r\n    let endValue = \"\"\r\n\r\n    // match and remove extra text at the beginning\r\n    const matchesStart: RegExpMatchArray | null = inputCurrency.match(/^[\\D]{0,}/)\r\n    if (matchesStart) {\r\n        const matchStartResult = matchesStart[0];\r\n        beginningValue = inputCurrency.substring(matchStartResult.length,)\r\n    }\r\n\r\n    // match and remove extra text at the end\r\n    const matchesEnd: RegExpMatchArray | null = beginningValue.match(/[^\\d]{0,}$/)\r\n    if (matchesEnd) {\r\n        const matchEndResult = matchesEnd[0];\r\n        endValue = beginningValue.substring(0, beginningValue.length - matchEndResult.length)\r\n    }\r\n\r\n    return endValue.replace(\" \", \"\").replace(\".\", \"\").replace(\",\", \"\")\r\n}\r\n\r\nexport const ParseCurrencyStringForOutput = (unformattedCurrency: string): string => {\r\n    return new Intl.NumberFormat(\"no-NO\", {\r\n        style: \"currency\",\r\n        currency: \"NOK\",\r\n        currencyDisplay: \"narrowSymbol\",\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0,\r\n    }).format(Number(unformattedCurrency.replace(/[^0-9.-]+/g, \"\"))).replace(\"kr\", \"kr.\").concat(\",-\");\r\n\r\n}\r\n\r\nexport const validateCurrency = (inputCurrency: string): boolean => {\r\n    // const currencyMatchExpression = /^((\\d{1,3},)*\\d{3}|\\d{1,3})\\.\\d{2}$|^((\\d{1,3}\\.)*\\d{3}|\\d{1,3})$/;\r\n    const currencyMatchExpression = /^\\d+$/;\r\n    if (inputCurrency.match(currencyMatchExpression)) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const CurrencyOutput = (inputCurrency: string): [number, string] => {\r\n\r\n    if ((/\\d/).test(inputCurrency)) {\r\n        const initialCurrencyValue: string = removeTextFromCurrencyString(inputCurrency)\r\n\r\n        let digitsBeforeSeparatorValue = \"correct\"\r\n        const separatorCount = checkSeparatorCount(initialCurrencyValue);\r\n        if (separatorCount !== 0) {\r\n            digitsBeforeSeparatorValue = checkDigitsBeforeSeparatorValue(initialCurrencyValue)\r\n        }\r\n        if ((separatorCount === 0 || separatorCount === 1) && digitsBeforeSeparatorValue === \"correct\") {\r\n            return [5, initialCurrencyValue]\r\n        }\r\n\r\n        else {\r\n            if (separatorCount === 2) {\r\n                return [2, \"separatorCount\"]\r\n            }\r\n            else if (digitsBeforeSeparatorValue === \"incorrect\") {\r\n                return [3, \"digitsBeforeSeparatorValue\"]\r\n            }\r\n            else {\r\n                return [4, \"unknown error, debug\"]\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // show error message and ask question again\r\n        return [1, \"\"]\r\n    }\r\n\r\n}\r\n","import { ChatbotInterface } from \"../ChatbotComponent/Generics\";\r\n\r\nexport class ReportUtils {\r\n  actionProvider: any;\r\n  state: ChatbotInterface;\r\n  constructor(actionProvider: any, state: ChatbotInterface) {\r\n    this.actionProvider = actionProvider;\r\n    this.state = state;\r\n  }\r\n\r\n  combine_duplicates = (inheritance_fraction_list: Array<any>): Array<any> => {\r\n    const combinedList = new Map<number, any>();\r\n    for (const inheritanceFraction of inheritance_fraction_list) {\r\n      if (combinedList.has(inheritanceFraction[0])) {\r\n        const x = combinedList.get(inheritanceFraction[0]);\r\n        if (x) {\r\n          x.frac += inheritanceFraction[1];\r\n          x.chains.push(inheritanceFraction[2]);\r\n        }\r\n      } else {\r\n        combinedList.set(inheritanceFraction[0], {\r\n          person: inheritanceFraction[0],\r\n          frac: inheritanceFraction[1],\r\n          chains: [inheritanceFraction[2]],\r\n        });\r\n      }\r\n    }\r\n    const resultArray = Array.from(combinedList.values());\r\n    const arrayOfObjects = [];\r\n    for (const rArray of resultArray) {\r\n      arrayOfObjects.push(rArray);\r\n    }\r\n    return arrayOfObjects;\r\n  };\r\n\r\n  split_evenly_between_lines = (\r\n    person_list: Array<number>,\r\n    maximum_distance: number | undefined = undefined,\r\n    allow_parents = false\r\n  ): any => {\r\n    let split_fraction_list = new Array<any>();\r\n    if (person_list.length === 0) {\r\n      return split_fraction_list;\r\n    }\r\n\r\n    const split_frac = 1 / person_list.length;\r\n\r\n    for (const person of person_list) {\r\n      const personDetail = this.actionProvider.getPerson(\r\n        person,\r\n        this.state.personsMap\r\n      );\r\n      const personNode = this.actionProvider.getNode(\r\n        person,\r\n        this.state.nodeMap\r\n      );\r\n      if (personDetail._deceased) {\r\n        if (maximum_distance === 0) {\r\n          // pass\r\n        } else if (\r\n          this.actionProvider.get_class_and_distance_closest_surviving_relative(\r\n            personNode,\r\n            this.state\r\n          )[1] !== 1\r\n        ) {\r\n          if (allow_parents) {\r\n            let temp_list: any = this.split_evenly_between_lines(\r\n              personNode._parents\r\n            );\r\n            let level_sum = 0;\r\n            for (const item of temp_list) {\r\n              level_sum += item[1];\r\n            }\r\n            const interm_temp_list: typeof temp_list = [];\r\n            if (level_sum !== 1) {\r\n              for (const item of temp_list) {\r\n                interm_temp_list.push[(item[0], item[1] / level_sum, item[2])];\r\n              }\r\n              temp_list = interm_temp_list;\r\n            }\r\n\r\n            const temp_split_fraction_list: typeof split_fraction_list = [];\r\n            for (const item of temp_list) {\r\n              temp_split_fraction_list.push([\r\n                item[0],\r\n                item[1] * split_frac,\r\n                item[2] + [personDetail._personName],\r\n              ]);\r\n            }\r\n            split_fraction_list = split_fraction_list.concat(\r\n              temp_split_fraction_list\r\n            );\r\n          } else {\r\n            // pass\r\n          }\r\n        } else {\r\n          let temp_list: Array<any> = this.split_evenly_between_lines(\r\n            personNode._children\r\n          );\r\n          const temp_fraction_list: Array<any> = [];\r\n          let level_sum = 0;\r\n          for (const item of temp_list) {\r\n            level_sum += item[1];\r\n          }\r\n          if (level_sum !== 1) {\r\n            for (const item of temp_list) {\r\n              temp_fraction_list.push([\r\n                item[0],\r\n                item[1] / level_sum,\r\n                item[2].concat([personDetail._personName]),\r\n              ]);\r\n            }\r\n            temp_list = temp_fraction_list;\r\n          }\r\n          const temp_split_fraction_list: any = [];\r\n          for (const item of temp_list) {\r\n            temp_split_fraction_list.push([\r\n              item[0],\r\n              item[1] * split_frac,\r\n              item[2] + [personDetail._personName],\r\n            ]);\r\n          }\r\n          split_fraction_list = split_fraction_list.concat(\r\n            temp_split_fraction_list\r\n          );\r\n          console.log(split_fraction_list);\r\n        }\r\n      } else {\r\n        split_fraction_list.push([person, split_frac, []]);\r\n      }\r\n    }\r\n    let level_sum = 0;\r\n    for (const item of split_fraction_list) level_sum += item[1];\r\n\r\n    if (level_sum !== 1) {\r\n      const temp_split_fraction_list: any = [];\r\n      for (const item of split_fraction_list) {\r\n        temp_split_fraction_list.push([item[0], item[1] / level_sum, item[2]]);\r\n      }\r\n      split_fraction_list = split_fraction_list.concat(\r\n        temp_split_fraction_list\r\n      );\r\n    }\r\n    return split_fraction_list;\r\n  };\r\n\r\n  compute_default_genealogy_splits_with_chains = (person: number): any => {\r\n    const personNode = this.actionProvider.getNode(person, this.state.nodeMap);\r\n    const [class_closest, distance_closest] =\r\n      this.actionProvider.get_class_and_distance_closest_surviving_relative(\r\n        personNode\r\n      );\r\n    if (class_closest === 1) {\r\n      return this.split_evenly_between_lines(personNode._children);\r\n    } else if (class_closest === 2) {\r\n      const firstParentSpouse = this.actionProvider.getNode(\r\n        personNode._parents[0],\r\n        this.state.nodeMap\r\n      )._spouse;\r\n      if (\r\n        !personNode._underAge ||\r\n        firstParentSpouse === personNode._parents[1]\r\n      ) {\r\n        return this.split_evenly_between_lines(personNode._parents);\r\n      } else {\r\n        return this.split_evenly_between_lines(\r\n          personNode._parents,\r\n          undefined,\r\n          true\r\n        );\r\n      }\r\n    } else if (class_closest === 3) {\r\n      const grandParent_splits = [];\r\n      personNode._parents.map((parent: number) => {\r\n        const parentNode = this.actionProvider.getNode(\r\n          parent,\r\n          this.state.nodeMap\r\n        );\r\n        grandParent_splits.push(\r\n          this.split_evenly_between_lines(parentNode._parents, 2)\r\n        );\r\n      });\r\n    } else if (class_closest === undefined || class_closest > 3) return [];\r\n  };\r\n}\r\n","import ChartNode, { NodeData } from \"./Classes/ChartNode\";\r\nimport Person from \"../../ChatbotComponent/Helper/Classes/Person\";\r\nimport { ParentChildSelector } from \"../../ChatbotComponent/Helper/Enums/ParentChildSelector\";\r\nimport { NodeEntity } from \"../../ChatbotComponent/Helper/Classes/NodeEntity\";\r\nimport ChartConnector from \"./Classes/ChartConnector\";\r\nimport { Bubble } from \"./Classes/Bubble\";\r\n\r\n\r\nlet maxLevel = -999999, minLevel = 999999;\r\nconst xLevelArray = [[1], [-1, 1], [-1, 0, 1], [-2, -1, 1, 2]];\r\nlet chartNodeMap = new Map<number, ChartNode>()\r\nlet connectorArray = new Array<ChartConnector>()\r\nlet xDiff: number;\r\nlet yDiff: number;\r\nconst nodeSize = 123;\r\nlet partnerBubbleLevelMap: Map<number, Array<number>>;\r\nexport const processData = (data: any): any => {\r\n    maxLevel = -999999, minLevel = 999999;\r\n    chartNodeMap = new Map<number, ChartNode>()\r\n    connectorArray = new Array<ChartConnector>()\r\n    partnerBubbleLevelMap = new Map<number, Array<number>>();\r\n    xDiff = 180;\r\n    yDiff = 100;\r\n\r\n    // // divide nodeMap into levels\r\n    const levelMap = getLevelMap(data);\r\n    const maxLevelData = levelMap.get(maxLevel);\r\n    if (data.nodeMap.length === 0 || maxLevelData === undefined) {\r\n        return [];\r\n    }\r\n    setxLevelForMaxLevel(maxLevelData)\r\n    setxLevel(levelMap, data.nodeMap);\r\n    setNodePosition(levelMap, data.nodeMap)\r\n    return getChartNodeConnectorArray(data.nodeMap)\r\n    // const node1 = new ChartNode(\"1\", 'specialNode', new NodeData(\"a\", { right: \"right\" }), { x: 0, y: 0 }, 0)\r\n    // const node2 = new ChartNode(\"2\", 'specialNode', new NodeData(\"afasfasfas\", { left: \"left\" }), { x: 200, y: 0 }, 0)\r\n    // const connector = new ChartConnector(`1-2`, 'straight', \"1\", \"2\", '', 's_right', \"t_left\")\r\n    // return [node1, node2, connector]\r\n}\r\n\r\n\r\nconst setxLevel = (levelMap: Map<number, Array<ChartNode>>, nodeMap: Map<number, NodeEntity>) => {\r\n    const processedNodes = new Array<string>();\r\n\r\n    for (let i = maxLevel; i >= minLevel; i--) {\r\n        const currentLevelChartNodes = levelMap.get(i);\r\n\r\n        if (currentLevelChartNodes !== undefined) {\r\n            for (const node of currentLevelChartNodes) {\r\n\r\n                if (!processedNodes.includes(node.id)) {\r\n                    processedNodes.push(node.id);\r\n                }\r\n                const currentNode = NodeEntity.getNode(parseInt(node.id), nodeMap)\r\n\r\n                if (i !== maxLevel) {\r\n                    let avgXlevel = 0;\r\n                    const parentsCurrentNode = currentNode._parents;\r\n                    parentsCurrentNode.map((parent_id) => {\r\n                        const n = chartNodeMap.get(parent_id);\r\n                        if (n !== undefined) {\r\n                            avgXlevel += n.xLevel;\r\n                        }\r\n                    });\r\n                    if (parentsCurrentNode.length !== 0)\r\n                        node.xLevel = avgXlevel / parentsCurrentNode.length;\r\n                }\r\n                const partnerNodeId = currentNode._spouse ? currentNode._spouse : currentNode._cohabitant ? currentNode._cohabitant : null;\r\n                if (partnerNodeId !== null) {\r\n                    if (!processedNodes.includes(`${partnerNodeId}`)) {\r\n                        processedNodes.push(`${partnerNodeId}`);\r\n                    }\r\n\r\n                    const partnerChartNode = getChartNode(`${partnerNodeId}`);\r\n                    if (!partnerChartNode.data.pos) {\r\n                        partnerChartNode.data.pos = {};\r\n                    }\r\n                    if (!node.data.pos) {\r\n                        node.data.pos = {};\r\n                    }\r\n                    if (!partnerBubbleLevelMap.has(i)) {\r\n                        partnerBubbleLevelMap.set(i, new Array<number>())\r\n                    }\r\n                    const partnerBubbleArray = partnerBubbleLevelMap.get(i)\r\n\r\n                    if (currentNode._undividedEstateSpouse) {\r\n                        if (partnerBubbleArray) {\r\n                            if (!partnerBubbleArray.includes(partnerNodeId)) {\r\n                                partnerBubbleArray.push(partnerNodeId, currentNode._id)\r\n                            }\r\n                        }\r\n                        partnerChartNode.xLevel = node.xLevel - 0.01;\r\n                        partnerChartNode.data.pos.right = \"right\"\r\n                        node.data.pos.left = \"left\"\r\n                        if (connectorArray.filter(connector => {\r\n                            return connector.id === `e${partnerNodeId}-${currentNode._id}`\r\n                        }).length === 0) {\r\n                            const newConnector = new ChartConnector(`e${partnerNodeId}-${currentNode._id}`, 'straight', `${partnerNodeId}`, `${currentNode._id}`, '', \"s_right\", \"t_left\")\r\n                            connectorArray.push(newConnector);\r\n                        }\r\n                    } else {\r\n                        if (partnerBubbleArray) {\r\n                            if (!partnerBubbleArray.includes(partnerNodeId)) {\r\n                                partnerBubbleArray.push(currentNode._id, partnerNodeId)\r\n                            }\r\n                        }\r\n                        partnerChartNode.xLevel = node.xLevel + 0.01;\r\n                        partnerChartNode.data.pos.left = \"left\"\r\n                        node.data.pos.right = \"right\"\r\n                        if (connectorArray.filter(connector => {\r\n                            return connector.id === `e${currentNode._id}-${partnerNodeId}`\r\n                        }).length === 0) {\r\n                            const newConnector = new ChartConnector(`e${currentNode._id}-${partnerNodeId}`, 'straight', `${currentNode._id}`, `${partnerNodeId}`, '', \"s_right\", \"t_left\")\r\n                            connectorArray.push(newConnector);\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n\r\n                }\r\n\r\n                if (currentNode._undividedEstateSpouse !== null) {\r\n                    if (!processedNodes.includes(`${currentNode._undividedEstateSpouse}`)) {\r\n                        processedNodes.push(`${currentNode._undividedEstateSpouse}`);\r\n                    }\r\n                    const partnerChartNode = getChartNode(`${currentNode._undividedEstateSpouse}`);\r\n                    if (!partnerChartNode.data.pos) {\r\n                        partnerChartNode.data.pos = {};\r\n                    }\r\n                    if (!node.data.pos) {\r\n                        node.data.pos = {};\r\n                    }\r\n                    if (!partnerBubbleLevelMap.has(i)) {\r\n                        partnerBubbleLevelMap.set(i, new Array<number>())\r\n                    }\r\n                    const partnerBubbleArray = partnerBubbleLevelMap.get(i)\r\n                    if (partnerBubbleArray) {\r\n                        if (!partnerBubbleArray.includes(currentNode._undividedEstateSpouse)) {\r\n                            if (!partnerBubbleArray.includes(currentNode._id)) {\r\n                                partnerBubbleArray.push(currentNode._id)\r\n\r\n                            }\r\n                            partnerBubbleArray.push(currentNode._undividedEstateSpouse)\r\n                        }\r\n                    }\r\n                    partnerChartNode.xLevel = node.xLevel + 0.01;\r\n                    partnerChartNode.data.pos.left = \"left\"\r\n                    node.data.pos.right = \"right\"\r\n                    if (connectorArray.filter(connector => {\r\n                        return connector.id === `e${currentNode._id}-${currentNode._undividedEstateSpouse}`\r\n                    }).length === 0) {\r\n                        const newConnector = new ChartConnector(`e${currentNode._id}-${currentNode._undividedEstateSpouse}`, 'straight', `${currentNode._id}`, `${currentNode._undividedEstateSpouse}`, '', \"s_right\", \"t_left\")\r\n                        connectorArray.push(newConnector);\r\n                    }\r\n                }\r\n\r\n\r\n\r\n                const currentNodePath = currentNode._path;\r\n                for (let j = currentNodePath.length - 2; j >= 0; j--) {\r\n                    if (currentNodePath[j][0] === ParentChildSelector.testator &&\r\n                        (currentNodePath[j + 1][0] === ParentChildSelector.spouse ||\r\n                            currentNodePath[j + 1][0] === ParentChildSelector.cohabitant ||\r\n                            currentNodePath[j + 1][0] === ParentChildSelector.undividedSpouse)) {\r\n                        break;\r\n                    }\r\n                    processedNodes.push(currentNodePath[j][1].toString())\r\n                    let source = '', target = '';\r\n                    if (currentNodePath[j + 1][0] <= currentNodePath[j][0] || (currentNodePath[j + 1][0] === ParentChildSelector.child && currentNodePath[j][0] === ParentChildSelector.testator)) {\r\n                        source = currentNodePath[j][1].toString();\r\n                        target = currentNodePath[j + 1][1].toString();\r\n\r\n                    } else {\r\n                        source = currentNodePath[j + 1][1].toString();\r\n                        target = currentNodePath[j][1].toString();\r\n\r\n                    }\r\n                    const sourceNode = getChartNode(source)\r\n                    if (!sourceNode.data.pos) {\r\n                        sourceNode.data.pos = {};\r\n                    }\r\n                    sourceNode.data.pos.bottom = 'bottom'\r\n                    const targetNode = getChartNode(target)\r\n                    if (!targetNode.data.pos) {\r\n                        targetNode.data.pos = {};\r\n                    }\r\n                    targetNode.data.pos.top = 'top'\r\n\r\n                    if (connectorArray.filter(connector => {\r\n                        return connector.id === `e${source}-${target}`\r\n                    }).length === 0) {\r\n                        const newConnector = new ChartConnector(`e${source}-${target}`, 'straight', source, target, '', \"s_bottom\", \"t_top\")\r\n                        connectorArray.push(newConnector);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nconst getLevelMap = (data: any) => {\r\n    const levelMap = new Map<number, Array<ChartNode>>();\r\n    // eslint-disable-next-line\r\n    data.nodeMap.forEach(function (node: NodeEntity, key: number) {\r\n        const nodeDetails = Person.getPerson(node._id, data.personsMap)\r\n\r\n        if (node._level > maxLevel) {\r\n            maxLevel = node._level;\r\n        }\r\n        if (node._level < minLevel) {\r\n            minLevel = node._level\r\n        }\r\n        if (!levelMap.has(node._level)) {\r\n            levelMap.set(node._level, new Array<ChartNode>());\r\n        }\r\n        const nodeLabel = nodeDetails._deceased ? `\\u2020 ${nodeDetails._personName}` : nodeDetails._personName\r\n        const newNode = new ChartNode(node._id.toString(), 'specialNode', new NodeData(nodeLabel,), { x: 0, y: 0 }, 0)\r\n        levelMap.get(node._level)?.push(newNode)\r\n        chartNodeMap.set(node._id, newNode)\r\n    })\r\n\r\n    return levelMap;\r\n}\r\n\r\n\r\nconst setNodePosition = (levelMap: Map<number, Array<ChartNode>>, nodeMap: any) => {\r\n    let ypos = 0;\r\n    for (let i = maxLevel; i >= minLevel; i--) {\r\n        const currentLevelChartNodes = levelMap.get(i);\r\n        // let xpos = 0;\r\n        if (currentLevelChartNodes !== undefined) {\r\n            const sortedLevelChartNode = currentLevelChartNodes.sort((a, b) => a.xLevel >= b.xLevel ? 1 : -1)\r\n            // create bubbles\r\n            const bubbles = createLevelBubble(sortedLevelChartNode, partnerBubbleLevelMap.get(i), nodeMap);\r\n\r\n            processBubbles(bubbles, ypos)\r\n        }\r\n        ypos += yDiff;\r\n    }\r\n\r\n}\r\nconst processBubbles = (bubbles: Array<Bubble>, ypos: number) => {\r\n    let xleft = 0;\r\n    const xgap = xDiff - nodeSize\r\n    let previousXRight = -10000000;\r\n\r\n    for (const bubble of bubbles) {\r\n        //\r\n        const n = bubble.elements.length;\r\n        if (bubble.parent) {\r\n            // find relative pos with parent\r\n\r\n            const parentChartNode = getChartNode(bubble.parent.toString());\r\n            let relativeXleft = parentChartNode.position.x + nodeSize / 2 - (n * nodeSize + (n - 1) * xgap) / 2;\r\n            const relativeXRight = parentChartNode.position.x + nodeSize / 2 + (n * nodeSize + (n - 1) * xgap) / 2;\r\n\r\n            if (previousXRight > relativeXleft) {\r\n                relativeXleft = previousXRight;\r\n            }\r\n            previousXRight = relativeXRight + xgap;\r\n            for (const eleID of bubble.elements) {\r\n                const element = getChartNode(eleID.toString());\r\n                element.position = { x: relativeXleft, y: ypos };\r\n                relativeXleft += xDiff;\r\n                xleft = relativeXleft;\r\n            }\r\n\r\n        } else {\r\n            // x will start from xleft\r\n            const relativeXRight = xleft + n * (xDiff);\r\n            previousXRight = relativeXRight;\r\n            for (const eleID of bubble.elements) {\r\n                const element = getChartNode(eleID.toString());\r\n                element.position = { x: xleft, y: ypos };\r\n                xleft += xDiff;\r\n            }\r\n        }\r\n    }\r\n}\r\nconst createLevelBubble = (chartNodes: Array<ChartNode>, partnerBubble: Array<number> | undefined, nodeMap: any) => {\r\n    const bubbles = new Array<Bubble>();\r\n    let isPartnerProcessed = false;\r\n    for (const chartNode of chartNodes) {\r\n        const node = NodeEntity.getNode(parseInt(chartNode.id), nodeMap);\r\n        // check in partnerMap\r\n\r\n        if (partnerBubble && partnerBubble.includes(node._id)) {\r\n            if (isPartnerProcessed) {\r\n                continue;\r\n            }\r\n            isPartnerProcessed = true;\r\n            let partnerParent: number | undefined;\r\n            let isExistingBubble = false;\r\n            for (const partner of partnerBubble) {\r\n                const partnerNode = NodeEntity.getNode(partner, nodeMap);\r\n                const existingBubbles = bubbles.filter(bubble => {\r\n                    if (bubble.parent) {\r\n                        return partnerNode._parents.includes(bubble.parent)\r\n                    }\r\n                    return false;\r\n                });\r\n                if (existingBubbles.length !== 0) {\r\n                    // return that there is an existing bubble which will include bubble\r\n                    existingBubbles[0].elements = existingBubbles[0].elements.concat(partnerBubble);\r\n                    isExistingBubble = true;\r\n                    break;\r\n                } else {\r\n                    if (partnerNode._parents.length !== 0)\r\n                        partnerParent = partnerNode._parents[0]\r\n                }\r\n            }\r\n            if (!isExistingBubble)\r\n                bubbles.push(new Bubble(partnerBubble, partnerParent));\r\n\r\n        } else {\r\n            const existingBubble = bubbles.filter(bubble => {\r\n                if (bubble.parent) {\r\n                    return node._parents.includes(bubble.parent)\r\n                }\r\n                return false;\r\n            })\r\n            let bubble: Bubble;\r\n            if (existingBubble.length !== 0) {\r\n                bubble = existingBubble[0]\r\n                bubble.elements.push(node._id)\r\n            } else {\r\n                if (node._parents.length !== 0) bubble = new Bubble([node._id], node._parents[0]);\r\n                else bubble = new Bubble([node._id]);\r\n                bubbles.push(bubble);\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n    return bubbles;\r\n}\r\nconst getChartNodeConnectorArray = (nodeMap: Map<number, NodeEntity>): Array<ChartNode | ChartConnector> => {\r\n    const finalArray = new Array<ChartNode | ChartConnector>()\r\n    // eslint-disable-next-line\r\n    chartNodeMap.forEach((value, key) => {\r\n        if (NodeEntity.getNode(parseInt(value.id), nodeMap)._path.length !== 0)\r\n            finalArray.push(value)\r\n    })\r\n    return finalArray.concat(connectorArray)\r\n}\r\n\r\nconst setxLevelForMaxLevel = (nodeArray: Array<ChartNode>) => {\r\n    const xlevelDefault = xLevelArray[nodeArray.length - 1]\r\n    for (let i = 0; i < nodeArray.length; i++) {\r\n        nodeArray[i].xLevel = xlevelDefault[i]\r\n    }\r\n\r\n}\r\nconst getChartNode = (id: string) => {\r\n    const chartNode: ChartNode | undefined = chartNodeMap.get(parseInt(id));\r\n    if (chartNode == undefined) {\r\n        throw new Error(\"Person not found with given id:\" + id);\r\n    }\r\n    return chartNode;\r\n}\r\n\r\n","import { Popper } from \"@mui/material\";\r\nimport { Handle, Position } from \"react-flow-renderer\";\r\nimport { Textfit } from 'react-textfit';\r\n\r\nenum HandleType {\r\n  source = \"source\",\r\n  target = \"target\"\r\n}\r\n\r\nconst customHandleData = [\r\n  {\r\n    type: \"source\",\r\n    position: Position.Right,\r\n    id: \"s_right\",\r\n    style: { top: \"50%\", background: '#555' },\r\n  },\r\n  {\r\n    type: \"source\",\r\n    position: Position.Bottom,\r\n    id: \"s_bottom\",\r\n    style: { left: \"50%\", background: '#555' },\r\n  },\r\n  {\r\n    type: \"target\",\r\n    position: Position.Left,\r\n    id: \"t_left\",\r\n    style: { top: \"50%\", background: '#555' },\r\n  },\r\n  {\r\n    type: \"target\",\r\n    position: Position.Top,\r\n    id: \"t_top\",\r\n    style: { left: \"50%\", background: '#555' },\r\n  },\r\n];\r\n\r\nconst partnerNodeStyles = {\r\n  background: \"#fff\",\r\n  color: \"#000\",\r\n  padding: \"5px\",\r\n  width: \"7rem\",\r\n  height: \"1.8rem\",\r\n  borderRadius: \"3px\",\r\n  borderColor: \"midnightblue\",\r\n  borderStyle: \"solid\",\r\n  borderWidth: \"1px\",\r\n  letterSpacing: \"0.5px\",\r\n  lineHeight: 1.5,\r\n  display: \"flex\"\r\n}\r\n\r\n\r\nconst CustomNode = (totalData: any) => {\r\n  const data = totalData.data;\r\n\r\n  const isConnectable = data.isConnectable;\r\n  // eslint-disable-next-line\r\n  const handles = customHandleData.map((v, k) => {\r\n    if (check(data.pos, v.position)) {\r\n      return (\r\n        <Handle\r\n          key={v.id}\r\n          type={v.type === \"source\" ? HandleType.source : HandleType.target}\r\n          position={v.position}\r\n          id={v.id}\r\n          style={v.style}\r\n          isConnectable={isConnectable}\r\n        />\r\n      )\r\n    }\r\n  });\r\n  const labelString = deceasedFormatter(data.label)\r\n  return (\r\n    <div>\r\n      <div id={`detail_${totalData.id}`} style={partnerNodeStyles}>\r\n        <div style={{ width: \"6.8rem\", display: \"contents\" }}><Textfit style={{ margin: \"auto\", width: \"6.8rem\", textAlign: \"center\" }} max={20} mode=\"single\" forceSingleModeWidth={false}>{labelString}</Textfit></div>\r\n        {/* <Typography align=\"center\" variant=\"subtitle2\" style={{ textTransform: \"uppercase\", fontFamily: \"Helvetica\", padding: \"0 5px\" }}></Typography> */}\r\n        {handles}\r\n      </div>\r\n      <Popper style={{ position: \"absolute\", display: data.showDialog ? \"block\" : \"none\" }}\r\n        open={data.showDialog}\r\n        anchorEl={document.getElementById(`detail_${totalData.id}`)}\r\n      >{`Hi popover ${data.label}`}</Popper>\r\n    </div >\r\n  );\r\n}\r\nconst check = (data: any, pos: string): boolean => {\r\n  if (data && (\r\n    data.left === pos ||\r\n    data.right === pos ||\r\n    data.top === pos ||\r\n    data.bottom === pos\r\n  ))\r\n    return true;\r\n\r\n  return false;\r\n};\r\n\r\nconst deceasedFormatter = (personString: string) => {\r\n  // const tempArray = personString.split(\"†\");\r\n\r\n  // if (tempArray.length === 2) {\r\n  //   const spanElement = document.createElement(\"span\");\r\n  //   spanElement.innerHTML = `tempArray[0] <p style=\"color: red\">tempArray[1]</p>`\r\n  //   return spanElement\r\n  // }\r\n  return personString\r\n}\r\n\r\n\r\nexport default CustomNode","import { ChatbotInterface } from \"../ChatbotComponent/Generics\";\r\nimport { NodeEntity } from \"../ChatbotComponent/Helper/Classes/NodeEntity\";\r\nimport Norsk from \"../../../languages/translationNO.json\";\r\nimport { createIntl, createIntlCache } from \"react-intl\";\r\nimport InheritanceConstants from \"../ChatbotComponent/Helper/Methods/InheritanceConstants\";\r\nimport { ReportUtils } from \"./ReportUtils\";\r\nconst cache = createIntlCache();\r\nconst intl = createIntl({ locale: \"nb-NO\", messages: Norsk }, cache);\r\n\r\ninterface InheritanceCalculationInterface {\r\n  survivor: number | null;\r\n  survivor_type: string;\r\n  class_closest: number | undefined;\r\n  distance_closest: number | undefined;\r\n  old_surviving_reference_paragraphs: string;\r\n  surviving_reference_paragraphs: string;\r\n  minimum_surviving_inheritance: number;\r\n  surviving_fraction: number;\r\n  descriptive_text: string;\r\n  survivor_inheritance_sum: number;\r\n  genealogy_inheritance_sum: number;\r\n  splits_with_chains: [];\r\n  genealogy_inheritance: [];\r\n}\r\ninterface inheritanceFractionListType {\r\n  person: number;\r\n  frac: number;\r\n  chains: Array<any>;\r\n}\r\nexport class InheritanceCalculation implements InheritanceCalculationInterface {\r\n  state: ChatbotInterface;\r\n  ActionProvider: any;\r\n  InheritanceConstants: any;\r\n  person: NodeEntity;\r\n  survivor: number | null = null;\r\n  survivor_type = \"\";\r\n  class_closest: number | undefined;\r\n  distance_closest: number | undefined;\r\n  old_surviving_reference_paragraphs = \"\";\r\n  surviving_reference_paragraphs = \"\";\r\n  minimum_surviving_inheritance = 0;\r\n  surviving_fraction = 0;\r\n  descriptive_text = \"\";\r\n  survivor_inheritance_sum = 0;\r\n  genealogy_inheritance_sum = 0;\r\n  splits_with_chains: [] = [];\r\n  genealogy_inheritance: any = [];\r\n  genealogy_splits: [] = [];\r\n  will: string | undefined;\r\n  reportUtils: any;\r\n  constructor(\r\n    person: number,\r\n    private actionProvider: any,\r\n    state: ChatbotInterface,\r\n    will = undefined\r\n  ) {\r\n    this.state = state;\r\n    this.InheritanceConstants = InheritanceConstants;\r\n    this.person = this.actionProvider.getPerson(person, this.state);\r\n    this.will = will;\r\n    this.reportUtils = new ReportUtils(actionProvider, state);\r\n  }\r\n\r\n  computeInheritance = () => {\r\n    [this.class_closest, this.distance_closest] =\r\n      this.actionProvider.get_class_and_distance_closest_surviving_relative(\r\n        this.state.testator,\r\n        this.state\r\n      );\r\n\r\n    if (this.person.has_surviving_spouse()) {\r\n      // TODO define has_surviving_spouse in NodeEntity.ts\r\n      this.survivor = this.person._spouse;\r\n      this.survivor_type = intl.formatMessage({\r\n        id: \"REPORT.Inheritance.survivorType1\",\r\n      });\r\n\r\n      if (this.class_closest === undefined || this.class_closest > 2) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\r\n        });\r\n        this.surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.surviving_reference_paragraphs_9annet\",\r\n        });\r\n        this.minimum_surviving_inheritance = 0;\r\n        this.surviving_fraction = 1;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DESC_SPOUSE_NO_CLOSE_RELATIVES\",\r\n        });\r\n      } else if (this.class_closest === 1) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\r\n        });\r\n        this.surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_8forste\",\r\n        });\r\n        this.minimum_surviving_inheritance =\r\n          this.InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN;\r\n        this.surviving_fraction =\r\n          this.InheritanceConstants.FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveText4G\",\r\n        });\r\n      } else if (this.class_closest === 2) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\r\n        });\r\n        this.surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_9forste\",\r\n        });\r\n        this.minimum_surviving_inheritance =\r\n          this.InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS;\r\n        this.surviving_fraction =\r\n          this.InheritanceConstants.FRACTION_INHERITANCE_SPOUSE_VS_PARENTS;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveText6G\",\r\n        });\r\n      }\r\n    } else if (this.person.has_surviving_cohabitant()) {\r\n      this.survivor = this.person._cohabitant;\r\n      this.survivor_type = intl.formatMessage({\r\n        id: \"Report.Inheritance.survivorType2\",\r\n      });\r\n\r\n      if (this.class_closest === undefined || this.class_closest > 3) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n        });\r\n        this.surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n        });\r\n        this.minimum_surviving_inheritance = 0;\r\n        this.surviving_fraction = 1;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DESC_COHABITANT_NO_CLOSE_RELATIVES\",\r\n        });\r\n      } else if (this.class_closest === 1) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n        });\r\n        this.surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n        });\r\n        this.minimum_surviving_inheritance =\r\n          this.InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN;\r\n        this.surviving_fraction =\r\n          this.InheritanceConstants.FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveText_firstClass_cohab_4G\",\r\n        });\r\n      } else if (this.class_closest === 2) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n        });\r\n        this.surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n        });\r\n        this.minimum_surviving_inheritance =\r\n          this.InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS;\r\n        this.surviving_fraction =\r\n          this.InheritanceConstants.FRACTION_INHERITANCE_COHABITANT_VS_PARENTS;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveText_secondClass_cohab_4G\",\r\n        });\r\n      } else if (this.class_closest === 3) {\r\n        if (this.distance_closest && this.distance_closest <= 2) {\r\n          this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n          });\r\n          this.surviving_reference_paragraphs = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n          });\r\n          this.minimum_surviving_inheritance = 4 * this.InheritanceConstants.G;\r\n          this.surviving_fraction = 0;\r\n          this.descriptive_text = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.DescriptiveText_thirdClass_cohab_4G\",\r\n          });\r\n        } else {\r\n          this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n          });\r\n          this.surviving_reference_paragraphs = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n          });\r\n          this.minimum_surviving_inheritance = 0;\r\n          this.surviving_fraction = 1;\r\n          this.descriptive_text = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.DESC_COHABITANT_NO_CLOSE_RELATIVES_2\",\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      this.survivor = null;\r\n      this.surviving_reference_paragraphs = \"\";\r\n      this.minimum_surviving_inheritance = 0;\r\n      this.surviving_fraction = 0;\r\n      this.descriptive_text = intl.formatMessage({\r\n        id: \"REPORT.Inheritance.DESC_NO_SPOUSE_OR_COHABITANT\",\r\n      });\r\n    }\r\n  };\r\n\r\n  compute_default_genealogy_splits_with_chains = (person: number) => {\r\n    //\r\n    const personNode = this.actionProvider.getNode(person, this.state.nodeMap);\r\n    const personDetail = this.actionProvider.getPerson(\r\n      person,\r\n      this.state.personsMap\r\n    );\r\n    const [closest_class, closest_distance] =\r\n      this.actionProvider.get_class_and_distance_closest_surviving_relative(\r\n        personNode,\r\n        this.state\r\n      );\r\n    if (closest_class === 1) {\r\n      return this.reportUtils.split_evenly_between_lines(personNode._children);\r\n    } else if (closest_class === 2) {\r\n      const firstParentNode = this.actionProvider.getNode(\r\n        personNode._parents[0],\r\n        this.state.nodeMap\r\n      );\r\n      if (\r\n        !personDetail._underAge ||\r\n        firstParentNode._spouse === personNode._parents[1]\r\n      ) {\r\n        return this.reportUtils.split_evenly_between_lines(personNode._parents);\r\n      } else\r\n        return this.reportUtils.split_evenly_between_lines(\r\n          personNode._parents,\r\n          undefined,\r\n          true\r\n        );\r\n    } else if (closest_class === 3) {\r\n      const grandparent_splits = this.reportUtils.split_evenly_between_lines(\r\n        personNode._parents,\r\n        2\r\n      );\r\n      let num;\r\n      for (const a of grandparent_splits) {\r\n        if (a.length > 0) {\r\n          num = a.length;\r\n        }\r\n      }\r\n      const temp_list = [];\r\n      for (const split of grandparent_splits) {\r\n        if (split.length > 0) {\r\n          temp_list.push([split[0]]);\r\n        }\r\n      }\r\n      const resultList = [];\r\n      for (const item of temp_list) {\r\n        resultList.push([item[0], item[1] / num, item[2]]);\r\n      }\r\n      return resultList;\r\n    } else if (closest_class === undefined || closest_class > 3) {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  computeGenealogyInheritance = (person_id: number) => {\r\n    this.survivor_inheritance_sum = Math.min(\r\n      this.state.netWealth,\r\n      Math.max(\r\n        this.minimum_surviving_inheritance,\r\n        this.surviving_fraction * this.state.netWealth\r\n      )\r\n    );\r\n    // const genealogy_inheritance: any = [];\r\n    this.genealogy_inheritance_sum =\r\n      this.state.netWealth - this.survivor_inheritance_sum;\r\n    if (this.genealogy_inheritance_sum !== 0) {\r\n      this.splits_with_chains =\r\n        this.compute_default_genealogy_splits_with_chains(person_id);\r\n      const genealogy_splits = this.reportUtils.combine_duplicates(\r\n        this.splits_with_chains\r\n      );\r\n      console.log(genealogy_splits);\r\n\r\n      genealogy_splits.map((genealogy_split: any) => {\r\n        return this.genealogy_inheritance.push([\r\n          genealogy_split.person,\r\n          genealogy_split.frac * this.genealogy_inheritance_sum,\r\n          genealogy_split.chains,\r\n        ]);\r\n      });\r\n      // for (const genealogy_split of genealogy_splits) {\r\n      //   genealogy_inheritance.push([\r\n      //     genealogy_split.person,\r\n      //     genealogy_split.frac * this.genealogy_inheritance_sum,\r\n      //     genealogy_split.chains,\r\n      //   ]);\r\n      // }\r\n    } else {\r\n      this.splits_with_chains = [];\r\n      this.genealogy_splits = [];\r\n      this.genealogy_inheritance = [];\r\n    }\r\n    return this.genealogy_inheritance;\r\n  };\r\n}\r\n","import QuestionConsts from \"./Helper/Methods/QuestionConstants\";\r\nimport InheritanceConstants from \"./Helper/Methods/InheritanceConstants\";\r\nimport Person from \"./Helper/Classes/Person\";\r\nimport Family from \"./Helper/Classes/Family\";\r\nimport { ParentChildSelector } from \"./Helper/Enums/ParentChildSelector\";\r\nimport { ChatbotInterface, InitialChatbotState } from \"./Generics\";\r\nimport { ChatStepTypes, QuestionType } from \"./Helper/Enums/ChatStepTypes\";\r\nimport { ReactElement } from \"react\";\r\nimport { CurrencyOutput, ParseCurrencyStringForOutput } from \"./Helper/Methods/HandleCurrency\";\r\nimport InfoMessagesWidget from \"./Custom/Widgets/InfoMessagesWidget/InfoMessagesWidget\"\r\nimport { NodeEntity } from \"./Helper/Classes/NodeEntity\";\r\nimport chartSelector from \"../../../store/chartSelector\";\r\nimport { messageService } from \"./services/ChatbotCommunicator\";\r\nimport { InheritanceCalculation } from \"../Reports/InheritanceCalculation\";\r\n// import _ from \"lodash\";\r\n\r\nclass ActionProvider {\r\n\r\n  createChatBotMessage: (\r\n    questionElement: ReactElement,\r\n    widget?: Record<string, unknown>\r\n  ) => ReactElement;\r\n  setState: (state: unknown) => ChatbotInterface;\r\n  createClientMessage: (messageElement: ReactElement) => ReactElement<any, any>;\r\n  QuestionConsts: QuestionConsts;\r\n  InheritanceConstants: InheritanceConstants;\r\n  family: Family;\r\n  stateRef: any;\r\n  checkstate: any = null\r\n  isStarted = true;\r\n  glb_state: any = null;\r\n  GRANDCHILDREN_PATH_LIMIT = 4\r\n  constructor(\r\n    createChatBotMessage: (\r\n      questionElement: ReactElement,\r\n      widget?: Record<string, unknown>\r\n    ) => ReactElement,\r\n    setStateFunc: (state: any) => any,\r\n    createClientMessage: (messageElement: ReactElement) => any,\r\n    stateRef: any,\r\n  ) {\r\n    this.createChatBotMessage = createChatBotMessage;\r\n    this.setState = setStateFunc;\r\n    this.createClientMessage = createClientMessage;\r\n    this.QuestionConsts = new QuestionConsts();\r\n    this.InheritanceConstants = new InheritanceConstants();\r\n    this.family = new Family();\r\n    this.stateRef = stateRef;\r\n    // this.setRevertListeners()\r\n\r\n  }\r\n\r\n\r\n\r\n  setRevertListeners() {\r\n\r\n    messageService.clearAllInternalSubscription();\r\n    /* eslint-disable @typescript-eslint/no-unused-vars */\r\n    const subscription = messageService.getMessageInChatbot().subscribe(message => {\r\n      this.revertState();\r\n    })\r\n    messageService.addInternalSubscription(subscription);\r\n\r\n  }\r\n  revertState = () => {\r\n\r\n    const revertCount = localStorage.getItem(\"revertCount\");\r\n    let lastState: any;\r\n    if (revertCount) {\r\n      lastState = messageService.getPreviousState(parseInt(revertCount));\r\n    } else {\r\n      lastState = messageService.getPreviousState(0);\r\n    }\r\n\r\n\r\n    if (lastState) {\r\n      if (revertCount) {\r\n        localStorage.setItem(\"revertCount\", (parseInt(revertCount) + 1).toString())\r\n      } else {\r\n        localStorage.setItem(\"revertCount\", '1')\r\n      }\r\n      this.setState((state: any) => {\r\n        state = lastState\r\n        return this.returnState(state);\r\n      });\r\n    }\r\n  }\r\n  // setPreviousStateData = (currentState: any, lastState: any) => {\r\n  //\r\n  // }\r\n\r\n\r\n  handleTestator = (testatorResponse: string): void => {\r\n    /**\r\n     *  * function for handling personID replies.\r\n     *  * stepID is updated to 2 and then proceed to wealth question.\r\n     *  * open reply, no conditions for now.\r\n     */\r\n\r\n    const undividedEstateQuestion = this.createChatBotMessage(\r\n      this.QuestionConsts.UndividedEstateQuestion,\r\n      this.QuestionConsts.YesNoWidgetOptions\r\n    );\r\n    this.setState((state: ChatbotInterface) => ({\r\n      ...state,\r\n      stepID: ChatStepTypes.testatorStep,\r\n      testator: this.createTestator(testatorResponse, state),\r\n    }));\r\n    this.setState((state: ChatbotInterface) => ({\r\n      ...state,\r\n    }));\r\n\r\n    this.addMessageToBotState(undividedEstateQuestion);\r\n  };\r\n\r\n  handleUndividedEstateChoice = (undividedEstateChoiceResponse: boolean): void => {\r\n    // TODO: implement Yes/No conditions for undivided states.\r\n    // TODO: need to fix the values in object and correctly implement the whole algorithm\r\n    // TODO: check for correct text for the questions. (last step, the format of questions already available)\r\n    this.setState((state: ChatbotInterface) => {\r\n\r\n\r\n      // if (state.yesNoClickedFlag) {\r\n      // const undividedEstateResponseModifiedResult =\r\n      //   this.QuestionConsts.UndividedEstateResultText(`${undividedEstateChoiceResponse}`);\r\n      //   const undividedEstateClientMessage = this.createClientMessage(\r\n      //     undividedEstateResponseModifiedResult\r\n      //   );\r\n      //   this.addMessageToBotState(undividedEstateClientMessage);\r\n      // }\r\n      if (undividedEstateChoiceResponse) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.undividedEstateStep,\r\n          undividedEstate: { ...state.undividedEstate, undivided_flag: QuestionType.part1, undividedEstateChoice: undividedEstateChoiceResponse }\r\n\r\n        }\r\n        const totalEstateNetValueQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.TotalEstateNetValueQuestion\r\n        )\r\n        this.addMessageToBotState(totalEstateNetValueQuestion)\r\n        return this.returnState(state)\r\n      }\r\n\r\n      else {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.netWealthStep,\r\n          undividedEstate: { ...state.undividedEstate, undivided_flag: \"none\", undividedEstateChoice: undividedEstateChoiceResponse }\r\n        }\r\n        const netWealthQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthQuestion\r\n        );\r\n        this.addMessageToBotState(netWealthQuestion);\r\n        return this.returnState(state)\r\n      }\r\n    })\r\n  };\r\n\r\n  handleTotalEstateValueResponse = (totalEstateValueResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const totalEstateValueQuestion = this.createChatBotMessage(this.QuestionConsts.TotalEstateNetValueQuestion)\r\n      const currencyIntResponse = CurrencyOutput(totalEstateValueResponse)\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(currencyIntResponse[1])\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />\r\n      if (currencyIntResponse[0] === 5) {\r\n        const ownershipTypeQuestion = this.createChatBotMessage(this.QuestionConsts.OwnershipTypeQuestion, this.QuestionConsts.OwnershipQuestionWidgetOptions)\r\n        state = {\r\n          ...state,\r\n          undividedEstate: { ...state.undividedEstate, undivided_flag: QuestionType.part2, totalEstateValue: parseInt(currencyIntResponse[1]) }\r\n\r\n        }\r\n        const currencyCustom = this.createClientMessage(currencyJSX)\r\n        this.addMessageToBotState(currencyCustom)\r\n        this.addMessageToBotState(ownershipTypeQuestion)\r\n      }\r\n      else {\r\n        const totalEstateWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.TotalEstateNetValueWarning\r\n        );\r\n\r\n        this.addMessageToBotState(totalEstateWarning);\r\n        this.addMessageToBotState(totalEstateValueQuestion);\r\n      }\r\n\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n  handleOwnershipResponse = (ownershipResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (ownershipResponse === \"FELLESEIE\") {\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part6,\r\n            undividedEstateSeparateWealth: state.undividedEstate.totalEstateValue / 2,\r\n          },\r\n\r\n          netWealth: state.undividedEstate.totalEstateValue / 2\r\n        }\r\n        if (state.undividedEstate.undividedEstateSeparateWealth > 0) {\r\n          const undividedEstateSpouseQuestion = this.createChatBotMessage(this.QuestionConsts.UndividedEstateSpouseQuestion)\r\n          this.addMessageToBotState(undividedEstateSpouseQuestion)\r\n        }\r\n        else {\r\n          if (state.person !== state.testator && state.person._undividedEstateSpouse) {\r\n            const temp_class_undivided_spouse = this.get_class_and_distance_closest_surviving_relative(this.getNode(state.person._undividedEstateSpouse, state.nodeMap), state)[0]\r\n            if (temp_class_undivided_spouse === undefined) {\r\n              state.netWealth = state.netWealth + state.undividedEstate.undividedEstateSeparateWealth\r\n              state.undividedEstate.undividedEstateSeparateWealth = 0\r\n            }\r\n\r\n            if (state.netWealth <= 0) {\r\n              this.askFinalQuestion()\r\n            }\r\n            else {\r\n              this.setState((state: ChatbotInterface) => {\r\n                state.stepID = ChatStepTypes.underAgeStep;\r\n              });\r\n              const underAgeQuestion = this.createChatBotMessage(\r\n                this.QuestionConsts.UnderAgeQuestion,\r\n                this.QuestionConsts.YesNoWidgetOptions\r\n              );\r\n              this.addMessageToBotState(underAgeQuestion);\r\n              return this.returnState(state)\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else if (ownershipResponse === \"DELVIS SÆREIE\") {\r\n        state = {\r\n          ...state,\r\n          undividedEstate: { ...state.undividedEstate, undivided_flag: QuestionType.part3 }\r\n        }\r\n        const delvisFirstQuestion = this.createChatBotMessage(this.QuestionConsts.DelvisFirstQuestion);\r\n        this.addMessageToBotState(delvisFirstQuestion)\r\n      }\r\n      else if (ownershipResponse === \"FULLT SÆREIE\") {\r\n        state = {\r\n          ...state,\r\n          undividedEstate: { ...state.undividedEstate, undivided_flag: QuestionType.part5 }\r\n        }\r\n        const fulltSaereieQuestion = this.createChatBotMessage(this.QuestionConsts.FulltSaereieQuestion);\r\n        this.addMessageToBotState(fulltSaereieQuestion)\r\n      }\r\n      else {\r\n        const ownershipTypeWarning = this.createChatBotMessage(this.QuestionConsts.OwnershipTypeWarning);\r\n        const ownershipTypeQuestion = this.createChatBotMessage(this.QuestionConsts.OwnershipTypeQuestion, this.QuestionConsts.OwnershipQuestionWidgetOptions)\r\n        this.addMessageToBotState(ownershipTypeWarning)\r\n        this.addMessageToBotState(ownershipTypeQuestion)\r\n      }\r\n      return this.returnState(state)\r\n    });\r\n  }\r\n\r\n  handleDelvisFirstResponse = (delvisFirstResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const currencyIntResponse = CurrencyOutput(delvisFirstResponse)\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(currencyIntResponse[1])\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />\r\n      if (currencyIntResponse[0] === 5) {\r\n        const currencyCustom = this.createClientMessage(currencyJSX)\r\n        this.addMessageToBotState(currencyCustom)\r\n        state = {\r\n          ...state,\r\n          undividedEstate: { ...state.undividedEstate, undivided_flag: QuestionType.part4, temp_first: parseInt(currencyIntResponse[1]) }\r\n        }\r\n        const delvisSecondQuestion = this.createChatBotMessage(this.QuestionConsts.DelvisSecondQuestion)\r\n        this.addMessageToBotState(delvisSecondQuestion)\r\n      }\r\n      else {\r\n        const netWealthWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthWarning\r\n        );\r\n        const delvisFirstQuestion = this.createChatBotMessage(this.QuestionConsts.DelvisFirstQuestion);\r\n        this.addMessageToBotState(netWealthWarning);\r\n        this.addMessageToBotState(delvisFirstQuestion);\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n  handleDelvisSecondResponse = (delvisSecondResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const currencyIntResponse = CurrencyOutput(delvisSecondResponse)\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(currencyIntResponse[1])\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />\r\n      if (currencyIntResponse[0] === 5) {\r\n        const currencyCustom = this.createClientMessage(currencyJSX)\r\n        this.addMessageToBotState(currencyCustom)\r\n        state.undividedEstate.temp_last = parseInt(currencyIntResponse[1])\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part6,\r\n            undividedEstateSeparateWealth: (state.undividedEstate.totalEstateValue - state.undividedEstate.temp_last - state.undividedEstate.temp_first) / 2 + state.undividedEstate.temp_first\r\n          },\r\n          netWealth: (state.undividedEstate.totalEstateValue - state.undividedEstate.temp_last - state.undividedEstate.temp_first) / 2 + state.undividedEstate.temp_last,\r\n        }\r\n        const undividedEstateSpouseQuestion = this.createChatBotMessage(this.QuestionConsts.UndividedEstateSpouseQuestion)\r\n        this.addMessageToBotState(undividedEstateSpouseQuestion)\r\n      }\r\n      else {\r\n        const netWealthWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthWarning\r\n        );\r\n        const delvisSecondQuestion = this.createChatBotMessage(this.QuestionConsts.DelvisSecondQuestion);\r\n        this.addMessageToBotState(netWealthWarning);\r\n        this.addMessageToBotState(delvisSecondQuestion);\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n  handleFulltSaereieResponse = (fulltSaereieResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const currencyIntResponse = CurrencyOutput(fulltSaereieResponse)\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(currencyIntResponse[1])\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />\r\n      if (currencyIntResponse[0] === 5) {\r\n        const currencyCustom = this.createClientMessage(currencyJSX)\r\n        this.addMessageToBotState(currencyCustom)\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part6,\r\n            undividedEstateSeparateWealth: state.undividedEstate.totalEstateValue - parseInt(fulltSaereieResponse)\r\n          },\r\n          netWealth: parseInt(fulltSaereieResponse),\r\n        }\r\n        if (state.undividedEstate.undividedEstateSeparateWealth > 0) {\r\n          const undividedEstateSpouseQuestion = this.createChatBotMessage(this.QuestionConsts.UndividedEstateSpouseQuestion)\r\n          this.addMessageToBotState(undividedEstateSpouseQuestion)\r\n        }\r\n      }\r\n      else {\r\n        const netWealthWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthWarning\r\n        );\r\n        const fulltSaereieQuestion = this.createChatBotMessage(this.QuestionConsts.FulltSaereieQuestion);\r\n        this.addMessageToBotState(netWealthWarning);\r\n        this.addMessageToBotState(fulltSaereieQuestion)\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n  handleUndividedEstateSpouse = (undividedEstateSpouseResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const undividedSpouseID = undividedEstateSpouseResponse\r\n      if (undividedEstateSpouseResponse !== \"\") {\r\n        const newUndividedSpouse = this.createNewPerson(undividedSpouseID, state)\r\n        state.person = newUndividedSpouse;\r\n        state.testator._undividedEstateSpouse = newUndividedSpouse._id\r\n        state.testator.setPathforPartner(ParentChildSelector.undividedSpouse, newUndividedSpouse)\r\n        const newUndividedSpouseDetail = Person.getPerson(newUndividedSpouse._id, state.personsMap)\r\n        newUndividedSpouseDetail._deceased = true;\r\n        const textBeforeSucsrUndvdSpouse = this.createChatBotMessage(this.QuestionConsts.TextBeforeSucsrUndvdSpouse)\r\n        this.addMessageToBotState(textBeforeSucsrUndvdSpouse)\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.undividedEstateStep,\r\n          successor_flag: QuestionType.part3,\r\n          temp_person: newUndividedSpouse,\r\n        };\r\n\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorCount(newUndividedSpouseDetail._personName)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n        return this.returnState(state);\r\n      }\r\n      else {\r\n        const spouseChoiceQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.SpouseChoiceQuestion,\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.spouseChoice,\r\n        }\r\n        this.addMessageToBotState(spouseChoiceQuestion);\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n\r\n  handleNetWealth(currencyResponse: string): void {\r\n    /**\r\n     *  * function for handling wealth replies.\r\n     *  * stepID is updated to 3 and then proceed to underage question.\r\n     *  * conditions for reply in currencyDisplayValue function.\r\n     */\r\n    this.setState((state: ChatbotInterface) => {\r\n      const netWealthQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.NetWealthQuestion\r\n      );\r\n      const currencyIntResponse = CurrencyOutput(currencyResponse)\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(currencyIntResponse[1])\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />\r\n      if (currencyIntResponse[0] === 5) {\r\n        const underAgeQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.UnderAgeQuestion,\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        const currencyCustom = this.createClientMessage(currencyJSX)\r\n        this.addMessageToBotState(currencyCustom)\r\n\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.underAgeStep,\r\n          netWealth: parseInt(currencyIntResponse[1]),\r\n        }\r\n        if (state.netWealth <= 0) {\r\n          this.askFinalQuestion()\r\n        }\r\n        this.addMessageToBotState(underAgeQuestion);\r\n      } else {\r\n        const netWealthWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthWarning\r\n        );\r\n\r\n        this.addMessageToBotState(netWealthWarning);\r\n        this.addMessageToBotState(netWealthQuestion);\r\n      }\r\n\r\n\r\n      return this.returnState(state)\r\n    })\r\n\r\n  }\r\n\r\n  handleUnderAge = (selectedOption: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      state.person = state.testator;\r\n      state.temp_person = state.testator\r\n      this.getPerson(state.person._id, state.personsMap)._underAge = selectedOption;\r\n      if (selectedOption) {\r\n        const cohabitantChoiceQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.CohabitantChoiceQuestion,\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.cohabitantChoice,\r\n        }\r\n        this.addMessageToBotState(cohabitantChoiceQuestion);\r\n\r\n        return this.returnState(state)\r\n      }\r\n\r\n      const spouseChoiceQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.SpouseChoiceQuestion,\r\n        this.QuestionConsts.YesNoWidgetOptions\r\n      );\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.spouseChoice,\r\n      }\r\n      this.addMessageToBotState(spouseChoiceQuestion);\r\n\r\n\r\n      return this.returnState(state)\r\n    });\r\n  };\r\n\r\n\r\n  handleSpouseChoice = (spouseChoice: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      // Spouse present\r\n      if (spouseChoice) {\r\n        state.stepID = ChatStepTypes.spouseStep;\r\n\r\n        const spouseQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.SpouseQuestion\r\n        );\r\n        this.addMessageToBotState(spouseQuestion);\r\n      }\r\n      // No spouse\r\n      else {\r\n        const testator = Person.getPerson(state.person._id, state.personsMap)\r\n        // is Adult, then ask for cohabitant\r\n        if (!testator._underAge && testator.spouse === undefined) {\r\n          state = {\r\n            ...state,\r\n            stepID: ChatStepTypes.cohabitantChoice\r\n          };\r\n          const cohabitantChoiceQuestion = this.createChatBotMessage(this.QuestionConsts.CohabitantChoiceQuestion, this.QuestionConsts.YesNoWidgetOptions)\r\n          this.addMessageToBotState(cohabitantChoiceQuestion);\r\n        }\r\n        else {\r\n          state = {\r\n            ...state,\r\n            stepID: ChatStepTypes.successorStep,\r\n            successor_flag: QuestionType.part3,\r\n          };\r\n          const newSuccessorQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.addSuccessorCount(testator._personName)\r\n          );\r\n          this.addMessageToBotState(newSuccessorQuestion);\r\n        }\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n  handleSpouseInput = (spouseResponse: string): void => {\r\n    /**\r\n     *  * function for handling spouseID replies.\r\n     *  * stepID is updated to 6 and then further conditions are evaluated next.\r\n     *  * open reply, no conditions for now.\r\n     */\r\n    const spouseID = spouseResponse;\r\n    this.setState((state: ChatbotInterface) => {\r\n      const testator = Person.getPerson(state.person._id, state.personsMap)\r\n      const newSpouse = this.createNewPerson(spouseID, state)\r\n      state.person._spouse = newSpouse._id\r\n      state.person.setPathforPartner(ParentChildSelector.spouse, newSpouse)\r\n      if (state.netWealth <=\r\n        this.InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.rearChildrenStep\r\n        }\r\n        this.askFinalQuestion();\r\n        return this.returnState(state);\r\n      }\r\n\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.successorStep,\r\n        successor_flag: QuestionType.part3,\r\n      };\r\n      const newSuccessorQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.addSuccessorCount(testator._personName)\r\n      );\r\n      this.addMessageToBotState(newSuccessorQuestion);\r\n      return this.returnState(state);\r\n    });\r\n  }\r\n\r\n\r\n  handleCohabitantChoice = (cohabitantChoiceResponse: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      // if cohabitant choice is yes\r\n      if (cohabitantChoiceResponse) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.cohabitantStep,\r\n        };\r\n        const cohabitantQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.CohabitantQuestion\r\n        );\r\n        this.addMessageToBotState(cohabitantQuestion);\r\n      }\r\n      // if cohabitant choice is no\r\n      else {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.successorStep,\r\n          successor_flag: QuestionType.part3,\r\n        };\r\n        const testator = Person.getPerson(state.person._id, state.personsMap)\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorCount(testator._personName)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n  handleCohabitantInput = (cohabitantResponse: string): void => {\r\n    /**\r\n     *  * function for handling cohabitant replies.\r\n     *  * stepID is updated to 7 and then further conditions are evaluated next.\r\n     *  * open reply, no conditions for now.\r\n     */\r\n    // NodeEntity.setPathforPartner(ParentChildSelector.cohabitant, state.person._cohabitant)\r\n    const cohabitantID = cohabitantResponse;\r\n    this.setState((state: ChatbotInterface) => {\r\n      const testator = Person.getPerson(state.person._id, state.personsMap)\r\n      const newCohabitant = this.createNewPerson(cohabitantID, state)\r\n      state.person._cohabitant = newCohabitant._id\r\n      state.person.setPathforPartner(ParentChildSelector.cohabitant, newCohabitant)\r\n\r\n      if (state.netWealth <=\r\n        this.InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.rearChildrenStep\r\n        }\r\n        this.askFinalQuestion();\r\n        return this.returnState(state);\r\n      }\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.successorStep,\r\n        successor_flag: QuestionType.part3,\r\n      };\r\n      const newSuccessorQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.addSuccessorCount(testator._personName)\r\n      );\r\n      this.addMessageToBotState(newSuccessorQuestion);\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleSuccessorCount(message: string): void {\r\n    const successorCount = parseInt(message);\r\n    this.setState((state: ChatbotInterface) => {\r\n      state.temp_person._childCount = successorCount;\r\n      if (successorCount === 0) {\r\n        const parentID = state.temp_person.getParentId(state.nodeMap)\r\n        if (parentID) {\r\n          const parent = this.getNode(parentID, state.nodeMap);\r\n          state.temp_person = parent;\r\n          const successorProcessArray = state.successorProcessArray\r\n          this.handleNoSuccessorCase(state, successorProcessArray);\r\n        } else {\r\n          this.handleClosingStep(state);\r\n        }\r\n        return this.returnState(state);\r\n      }\r\n\r\n      const questionType = state.temp_person._children.length === 0;\r\n      let itr_id = state.id;\r\n      for (let i = 0; i < state.temp_person._childCount; i++) {\r\n        const child = this.createEmptyNode(state, itr_id++);\r\n        state.temp_person.add_child(child, true);\r\n      }\r\n      state.id = itr_id;\r\n      if (state.successorProcessArray.filter(t => t[0] === state.temp_person._level).length === 0) {\r\n        state.successorProcessArray.push([state.temp_person._level, 1]);\r\n      }\r\n\r\n      state.successor_flag = QuestionType.part1;\r\n      const personName = this.getPerson(state.temp_person._id, state.personsMap)._personName\r\n      if (questionType) {\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorQuestion1(personName)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n      }\r\n      else {\r\n        const allChildrenID = this.getParentChildrenIDStrings(state.temp_person._children, state)\r\n        const newSuccessorQuestion = this.createChatBotMessage(this.QuestionConsts.addSuccessorQuestion2(personName, allChildrenID))\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n      }\r\n\r\n      return this.returnState(state);\r\n    });\r\n  }\r\n  handleSuccessorInput = (successorResponse: string): void => {\r\n    const child_name = successorResponse;\r\n    this.setState((state: ChatbotInterface) => {\r\n      const childID = state.temp_person.getChildUnprocessedNode();\r\n      if (childID) {\r\n        const child = this.getNode(childID, state.nodeMap)\r\n        const childDetail = this.getPerson(childID, state.personsMap);\r\n        childDetail._personName = child_name;\r\n        state = {\r\n          ...state,\r\n          successor_flag: QuestionType.part2,\r\n          temp_child: child,\r\n        };\r\n\r\n        const personId: any = Person.getPerson(child._id, state.personsMap)?._personName\r\n        const aliveQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.AliveQuestion(personId),\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        this.addMessageToBotState(aliveQuestion);\r\n        // }\r\n        return this.returnState(state);\r\n      } else {\r\n        // error case\r\n        console.log(\"Count of children exceeded\");\r\n      }\r\n\r\n    });\r\n  };\r\n\r\n  handleChildAliveOption = (alive: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const child = state.temp_child;\r\n      const childDetail = this.getPerson(child._id, state.personsMap);\r\n      // const temp_person: NodeEntity = state.temp_person\r\n      const successorProcessArray = state.successorProcessArray\r\n      if (alive) {\r\n        childDetail._deceased = false;\r\n        this.handleNoSuccessorCase(state, successorProcessArray);\r\n      } else {\r\n        // not alive\r\n        childDetail._deceased = true;\r\n        if (state.stepID === ChatStepTypes.grandParentStep) {\r\n          const generationCount = child.getGenerationCount()\r\n          if (generationCount === 2) {\r\n            this.handleNoSuccessorCase(state, successorProcessArray);\r\n            return this.returnState(state);\r\n          }\r\n        }\r\n        state = {\r\n          ...state,\r\n          successor_flag: QuestionType.part3,\r\n          temp_person: child\r\n        };\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorCount(childDetail._personName)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n        return this.returnState(state);\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleNoSuccessorCase = (state: ChatbotInterface, successorProcessArray: Array<[number, number]>) => {\r\n    const childItrPos = successorProcessArray[successorProcessArray.length - 1][1]\r\n    if (childItrPos) {\r\n      if (state.temp_person._childCount > childItrPos) {\r\n        successorProcessArray[successorProcessArray.length - 1][1] = childItrPos + 1;\r\n        // ask childid question\r\n        state.successor_flag = QuestionType.part1;\r\n        const allChildrenID = this.getParentChildrenIDStrings(state.temp_person._children, state)\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorQuestion2(this.getPerson(state.temp_person._id, state.personsMap)._personName, allChildrenID)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n        return this.returnState(state);\r\n      } else if (state.temp_person._childCount === childItrPos) {\r\n\r\n        let currentParentID = state.temp_person._id;\r\n        let currentParent = NodeEntity.getNode(currentParentID, state.nodeMap)\r\n\r\n        let isCurrentParentID = true;\r\n        while (successorProcessArray[successorProcessArray.length - 1][1] === currentParent._childCount) {\r\n          successorProcessArray.pop()\r\n          // current parent update\r\n          const currentId = currentParent.getParentId(state.nodeMap);\r\n          if (currentId) {\r\n            currentParentID = currentId;\r\n            currentParent = NodeEntity.getNode(currentParentID, state.nodeMap);\r\n          } else {\r\n            isCurrentParentID = false\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!isCurrentParentID) {\r\n          // exit case\r\n          this.handleClosingStep(state);\r\n        } else {\r\n          successorProcessArray[successorProcessArray.length - 1][1] = successorProcessArray[successorProcessArray.length - 1][1] + 1;\r\n          // ask childid question\r\n          state.temp_person = currentParent\r\n          const currentParentDetail = this.getPerson(currentParentID, state.personsMap)\r\n          state.successor_flag = QuestionType.part1;\r\n          const allChildrenID = this.getParentChildrenIDStrings(currentParent._children, state)\r\n          const newSuccessorQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.addSuccessorQuestion2(currentParentDetail._personName, allChildrenID)\r\n          );\r\n          this.addMessageToBotState(newSuccessorQuestion);\r\n          return this.returnState(state);\r\n        }\r\n\r\n      } else {\r\n        throw new Error(\"state.temp_person._childCount < childItrPos case\")\r\n      }\r\n    } else {\r\n      throw new Error(\"childItrPos is null\")\r\n    }\r\n  }\r\n\r\n  handleSecondParentExists = (secondParentChoice: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (secondParentChoice) {\r\n        const temp_person = state.temp_person;\r\n        state = {\r\n          ...state,\r\n          parent_flag: QuestionType.part1,\r\n        }\r\n        const allParentsID = this.getParentChildrenIDStrings(temp_person._parents, state)\r\n        const temp_person_detail = this.getPerson(temp_person._id, state.personsMap)\r\n        const newParentQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addParentsQuestion2(\r\n            temp_person_detail._personName,\r\n            allParentsID\r\n          )\r\n        );\r\n        this.addMessageToBotState(newParentQuestion);\r\n      }\r\n      else {\r\n        if (state.stepID !== ChatStepTypes.grandParentStep) {\r\n          this.closestSurvivingRelativeParents(false);\r\n        } else {\r\n          this.closestSurvivingRelativeGrandParents(false);\r\n        }\r\n\r\n      }\r\n      return state;\r\n    })\r\n  }\r\n\r\n  handleParentsInput = (parentResponse: string): void => {\r\n    const predecessor_id = parentResponse;\r\n    this.setState((state: ChatbotInterface) => {\r\n      const predecessor = this.createNewPerson(predecessor_id, state);\r\n      state = {\r\n        ...state,\r\n        parent_flag: QuestionType.part2,\r\n        temp_parent: predecessor,\r\n      };\r\n\r\n      state.temp_person.add_parent(predecessor, true);\r\n\r\n      const aliveQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.AliveQuestion(Person.getPerson(predecessor._id, state.personsMap)._personName),\r\n        this.QuestionConsts.YesNoWidgetOptions\r\n      );\r\n      this.addMessageToBotState(aliveQuestion);\r\n\r\n      return this.returnState(state);\r\n    })\r\n  }\r\n\r\n  handleParentAliveOption = (alive: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const temp_parent = state.temp_parent;\r\n      const temp_parent_detail = Person.getPerson(temp_parent._id, state.personsMap)\r\n      if (!alive) {\r\n        temp_parent_detail._deceased = true;\r\n        state = {\r\n          ...state,\r\n          temp_person: temp_parent,\r\n          successor_flag: QuestionType.part3,\r\n        }\r\n        temp_parent._processChildNodePos += 1;\r\n        const allChildrenID = this.getParentChildrenIDStrings(temp_parent._children, state)\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorOfParentCount(temp_parent_detail._personName, allChildrenID)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n        return this.returnState(state)\r\n      }\r\n      else {\r\n        temp_parent_detail._deceased = false;\r\n        if (state.stepID !== ChatStepTypes.grandParentStep) {\r\n          this.closestSurvivingRelativeParents();\r\n        } else {\r\n          this.closestSurvivingRelativeGrandParents();\r\n        }\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n\r\n  grandParentFirst = () => {\r\n    this.setState((state: ChatbotInterface) => {\r\n\r\n      const testatorNode = NodeEntity.getNode(state.person._id, state.nodeMap);\r\n      if (!state.deceasedParentsArray) state.deceasedParentsArray = []\r\n\r\n      for (const parent_id of testatorNode._parents) {\r\n        if (Person.getPerson(parent_id, state.personsMap)._deceased) {\r\n          const temp_class = this.get_class_and_distance_closest_surviving_relative(NodeEntity.getNode(parent_id, state.nodeMap), state)[0]\r\n          if (temp_class !== 1) {\r\n            if (!state.deceasedParentsArray.includes(parent_id))\r\n              state.deceasedParentsArray.push(parent_id)\r\n          }\r\n        }\r\n      }\r\n      if (state.deceasedParentsArray.length !== 0) {\r\n        const temp_person = this.getNode(state.deceasedParentsArray[0], state.nodeMap);\r\n        const temp_person_detail = this.getPerson(state.deceasedParentsArray[0], state.personsMap)\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.grandParentStep,\r\n          parent_flag: QuestionType.part1,\r\n          temp_person: temp_person,\r\n          successor_flag: QuestionType.initialQuestion\r\n        };\r\n        const newParentQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addParentsQuestion1(temp_person_detail._personName)\r\n        );\r\n        this.addMessageToBotState(newParentQuestion);\r\n      }\r\n      else {\r\n        console.log(\"check situation if it arrives here\");\r\n        this.askFinalQuestion()\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n  askForNextGrandParent = () => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (state.deceasedParentsArray.length !== 0) {\r\n        const temp_person = this.getNode(state.deceasedParentsArray[0], state.nodeMap);\r\n        const temp_person_detail = this.getPerson(state.deceasedParentsArray[0], state.personsMap)\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.grandParentStep,\r\n          parent_flag: QuestionType.part1,\r\n          temp_person: temp_person,\r\n          successor_flag: QuestionType.initialQuestion\r\n        };\r\n        const newParentQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addParentsQuestion1(temp_person_detail._personName)\r\n        );\r\n        this.addMessageToBotState(newParentQuestion);\r\n      }\r\n      else {\r\n        this.askFinalQuestion()\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n  // TODO check options\r\n  handleMarriedParents = (marriedParentsResponse: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (marriedParentsResponse) {\r\n        this.set_spouse(state.person._parents[0], state.person._parents[1], true)\r\n        this.askFinalQuestion()\r\n      }\r\n      else {\r\n        this.grandParentFirst()\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n  // eslint-disable-next-line\r\n  handleFinalQuestion = (finalOption: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (finalOption) {\r\n        const inheritanceCalculation = new InheritanceCalculation(state.person._id, this, state)\r\n        inheritanceCalculation.computeGenealogyInheritance(state.testator._id)\r\n        console.log(inheritanceCalculation);\r\n\r\n        // console.log(inheritanceCalculation);\r\n\r\n        console.log(\"prepare report and download\");\r\n      }\r\n      else {\r\n        console.log(\"retry\");\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n  }\r\n\r\n  handleRearChildrenResult = (rearChildrenResponse: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      state = {\r\n        ...state,\r\n        rearChildrenResponse: rearChildrenResponse\r\n      }\r\n      this.askFinalQuestion()\r\n      return this.returnState(state)\r\n    })\r\n\r\n  };\r\n  handleClosingStep = (state: ChatbotInterface) => {\r\n    switch (state.stepID) {\r\n      case ChatStepTypes.successorStep:\r\n        this.closestSurvivingRelativeChildren()\r\n        break;\r\n      case ChatStepTypes.parentsStep:\r\n        state.temp_person = state.person;\r\n        this.closestSurvivingRelativeParents()\r\n        break;\r\n      case ChatStepTypes.undividedEstateStep:\r\n        state.temp_person = state.person;\r\n        if (!state.isUndividedParent) {\r\n          this.closestSurvivingRelativeChildren();\r\n        } else {\r\n          this.closestSurvivingRelativeParents()\r\n        }\r\n\r\n\r\n        break;\r\n      case ChatStepTypes.grandParentStep:\r\n        state.temp_person = this.getNode(state.deceasedParentsArray[0], state.nodeMap);\r\n        this.closestSurvivingRelativeGrandParents();\r\n        break;\r\n    }\r\n  }\r\n\r\n  closestSurvivingRelativeChildren = () => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const testator = state.person\r\n      const testatorDetail = Person.getPerson(testator._id, state.personsMap);\r\n      const temp_class_testator = this.get_class_and_distance_closest_surviving_relative(state.testator, state)[0]\r\n\r\n      if (state.person !== state.testator && state.testator._undividedEstateSpouse) {\r\n        const temp_class_undivided_spouse = this.get_class_and_distance_closest_surviving_relative(this.getNode(state.testator._id, state.nodeMap), state)[0]\r\n        if (!(temp_class_testator && temp_class_testator !== 1)) {\r\n          state = {\r\n            ...state,\r\n            parent_flag: QuestionType.part1,\r\n            successor_flag: QuestionType.initialQuestion,\r\n            isUndividedParent: true\r\n          };\r\n          const newParentQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.addParentsQuestion1(testatorDetail._personName)\r\n          );\r\n          this.addMessageToBotState(newParentQuestion);\r\n          return this.returnState(state)\r\n        }\r\n        if (temp_class_undivided_spouse === undefined) {\r\n          state.netWealth = state.netWealth + state.undividedEstate.undividedEstateSeparateWealth\r\n          state.undividedEstate.undividedEstateSeparateWealth = 0\r\n        }\r\n\r\n        if (state.netWealth <= 0) {\r\n          this.askFinalQuestion()\r\n        }\r\n        else {\r\n          state.stepID = ChatStepTypes.underAgeStep;\r\n          const underAgeQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.UnderAgeQuestion,\r\n            this.QuestionConsts.YesNoWidgetOptions\r\n          );\r\n          this.addMessageToBotState(underAgeQuestion);\r\n          return this.returnState(state)\r\n        }\r\n      }\r\n\r\n      if (temp_class_testator === 1) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.rearChildrenStep,\r\n        }\r\n        // const possiblyChildrenRearing = this.createChatBotMessage(this.QuestionConsts.RearChildrenQuestion, this.QuestionConsts.RearChildrenWidgetOptions)\r\n        // this.addMessageToBotState(possiblyChildrenRearing)\r\n        this.askFinalQuestion();\r\n        return this.returnState(state)\r\n      }\r\n\r\n      if (testator._spouse !== null && state.netWealth <= this.InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS) {\r\n        this.askFinalQuestion();\r\n        return this.returnState(state)\r\n      }\r\n\r\n      if (testator._cohabitant !== null && state.netWealth <= this.InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS) {\r\n        this.askFinalQuestion();\r\n        return this.returnState(state)\r\n      }\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.parentsStep,\r\n        parent_flag: QuestionType.part1,\r\n        temp_person: state.testator,\r\n        successor_flag: QuestionType.initialQuestion\r\n      };\r\n      const newParentQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.addParentsQuestion1(testatorDetail._personName)\r\n      );\r\n      this.addMessageToBotState(newParentQuestion);\r\n      return this.returnState(state)\r\n    });\r\n  };\r\n\r\n  getParentChildrenIDStrings = (collection: Array<number>, state: ChatbotInterface): ReactElement => {\r\n    return <strong>{`{{ ${collection.map((child_id) => Person.getPerson(child_id, state.personsMap)._personName).filter(name => name !== '').join(', ')} }}`}</strong>\r\n  }\r\n\r\n  askFinalQuestion = (): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.finalStep,\r\n      }\r\n      const finalQuestion = this.createChatBotMessage(this.QuestionConsts.FinalQuestion, this.QuestionConsts.YesNoWidgetOptions)\r\n      this.addMessageToBotState(finalQuestion);\r\n      return this.returnState(state)\r\n    })\r\n\r\n  }\r\n\r\n  closestSurvivingRelativeParents = (isTwoParent = true) => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (isTwoParent && state.temp_person._parents.length < 2) {\r\n        // TODO\r\n        state.successor_flag = QuestionType.initialQuestion;\r\n        state.parent_flag = QuestionType.part3;\r\n        const personName = this.getPerson(state.temp_person._id, state.personsMap)._personName\r\n        const secondParentChoiceQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.askSecondParentChoiceQuestion(`${personName}`), this.QuestionConsts.YesNoWidgetOptions\r\n        )\r\n        this.addMessageToBotState(secondParentChoiceQuestion);\r\n        return this.returnState(state);\r\n      }\r\n\r\n      if (state.person._spouse !== null) {\r\n        this.askFinalQuestion()\r\n        return this.returnState(state)\r\n      }\r\n      const temp_class = this.get_class_and_distance_closest_surviving_relative(state.person, state)[0]\r\n      const eitherParentsDeceased = state.person._parents.filter(p_id => { return Person.getPerson(p_id, state.personsMap)._deceased }).length !== 0;\r\n      const personDetail = Person.getPerson(state.person._id, state.personsMap)\r\n\r\n      // TODO change condition to stepID\r\n      if (state.person !== state.testator && state.testator._undividedEstateSpouse !== null) {\r\n        const temp_class_undivided_spouse = this.get_class_and_distance_closest_surviving_relative(this.getNode(state.testator._undividedEstateSpouse, state.nodeMap), state)[0]\r\n        if (temp_class_undivided_spouse === undefined) {\r\n          state.netWealth = state.netWealth + state.undividedEstate.undividedEstateSeparateWealth\r\n          state.undividedEstate.undividedEstateSeparateWealth = 0\r\n        }\r\n\r\n        if (state.netWealth <= 0) {\r\n          this.askFinalQuestion()\r\n          return state;\r\n        }\r\n        else {\r\n          state.stepID = ChatStepTypes.underAgeStep;\r\n          const underAgeQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.UnderAgeQuestion,\r\n            this.QuestionConsts.YesNoWidgetOptions\r\n          );\r\n          this.addMessageToBotState(underAgeQuestion);\r\n          return this.returnState(state)\r\n        }\r\n      }\r\n      if (state.person._parents.length === 2 && eitherParentsDeceased && temp_class === 2) {\r\n        const parent1Detail = Person.getPerson(state.person._parents[0], state.personsMap)\r\n        const parent2Detail = Person.getPerson(state.person._parents[1], state.personsMap)\r\n        if (!personDetail._underAge) {\r\n          this.askFinalQuestion()\r\n          return this.returnState(state)\r\n        }\r\n        if (state.person._parents.length !== 2) {\r\n          this.askFinalQuestion()\r\n          return this.returnState(state)\r\n        }\r\n\r\n        if (parent1Detail._deceased) {\r\n          state = {\r\n            ...state,\r\n            stepID: ChatStepTypes.marriedParentsStep\r\n          }\r\n          const marriedParentsQn = this.createChatBotMessage(this.QuestionConsts.MarriedParents1(parent1Detail._personName, parent2Detail._personName))\r\n          this.addMessageToBotState(marriedParentsQn)\r\n          return this.returnState(state)\r\n        }\r\n        else {\r\n          state = {\r\n            ...state,\r\n            stepID: ChatStepTypes.marriedParentsStep\r\n          }\r\n          const marriedParentsQn = this.createChatBotMessage(this.QuestionConsts.MarriedParents2(parent1Detail._personName, parent2Detail._personName))\r\n          this.addMessageToBotState(marriedParentsQn)\r\n          return this.returnState(state)\r\n        }\r\n      }\r\n      else {\r\n        this.grandParentFirst()\r\n        return this.returnState(state)\r\n      }\r\n\r\n    });\r\n  };\r\n\r\n\r\n  closestSurvivingRelativeGrandParents = (isTwoParent = true) => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (isTwoParent && state.temp_person._parents.length < 2) {\r\n        // TODO\r\n        state.successor_flag = QuestionType.initialQuestion;\r\n        state.parent_flag = QuestionType.part3;\r\n\r\n        const secondParentChoiceQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.askSecondParentChoiceQuestion(`${state.temp_person._id}`), this.QuestionConsts.YesNoWidgetOptions\r\n        )\r\n        this.addMessageToBotState(secondParentChoiceQuestion);\r\n        return this.returnState(state);\r\n      }\r\n      state.deceasedParentsArray = state.deceasedParentsArray.filter(item => item !== state.deceasedParentsArray[0]);\r\n      this.askForNextGrandParent();\r\n      return state;\r\n    });\r\n\r\n  }\r\n\r\n  // Generic functions\r\n  addMessageToBotState = (messages: any): void => {\r\n    this.setState((state: any) => {\r\n      if (Array.isArray(messages)) {\r\n        state.messages = [...state.messages, ...messages];\r\n      } else {\r\n\r\n        state.messages = [...state.messages, messages];\r\n      }\r\n      // const messageCopy = _.cloneDeep(state.messages)\r\n      // state.tempMessages = messageCopy;\r\n      return this.returnState(state)\r\n    })\r\n  };\r\n\r\n  handleDefault = (): void => {\r\n    const message = this.createChatBotMessage(this.QuestionConsts.DefaultText, {\r\n      withAvatar: true,\r\n    });\r\n\r\n    this.addMessageToBotState(message);\r\n  };\r\n\r\n  createNewPerson = (personID: string, state: any) => {\r\n    const newPerson = new Person(personID, this.generateNextID(state.id))\r\n    state.personsMap.set(newPerson._id, newPerson)\r\n    const newNode = new NodeEntity(newPerson._id, 0);\r\n    state.nodeMap.set(newNode._id, newNode);\r\n    return newNode;\r\n  }\r\n  createEmptyNode = (state: any, id: number) => {\r\n    const newPerson = new Person(\"\", id)\r\n    state.personsMap.set(newPerson._id, newPerson)\r\n    const newNode = new NodeEntity(newPerson._id, 0);\r\n    state.nodeMap.set(newNode._id, newNode);\r\n    return newNode;\r\n  }\r\n  createTestator = (personID: string, state: any) => {\r\n    const newPerson = new Person(personID, this.generateNextID(state.id))\r\n    newPerson._deceased = true;\r\n    state.personsMap.set(newPerson._id, newPerson)\r\n    const newNode = new NodeEntity(newPerson._id, 0);\r\n    newNode._path.push([ParentChildSelector.testator, newPerson._id]);\r\n    state.nodeMap.set(newNode._id, newNode);\r\n    return newNode;\r\n  }\r\n\r\n  getPerson = (id: number, personMap: Map<number, Person>) => {\r\n    const person: Person | undefined = personMap.get(id);\r\n    if (person == undefined) {\r\n      throw new Error(\"Person not found with given id:\" + id);\r\n    }\r\n    return person;\r\n  };\r\n\r\n  getNode = (id: number, nodeMap: Map<number, NodeEntity>) => {\r\n    const node: NodeEntity | undefined = nodeMap.get(id);\r\n    if (node == undefined) {\r\n      throw new Error(\"Node not found with given id:\" + id);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  generateNextID = (id: number) => {\r\n    this.setState((state: any) => {\r\n      state.id = state.id + 1\r\n      return this.returnState(state)\r\n    })\r\n    return id;\r\n  }\r\n\r\n  set_spouse = (firstSpouse_id: number, secondSpouse_id: number, add_for_both: boolean): void => {\r\n    this.setState((state: any) => {\r\n      NodeEntity.getNode(firstSpouse_id, state.nodeMap)._spouse = secondSpouse_id\r\n      if (add_for_both) {\r\n        NodeEntity.getNode(secondSpouse_id, state.nodeMap)._spouse = firstSpouse_id\r\n      }\r\n      return this.returnState(state)\r\n    })\r\n\r\n\r\n  }\r\n\r\n  surviving_successor_distance = (node: NodeEntity, state: any): number | undefined => {\r\n    const nodeDetail: Person = Person.getPerson(node._id, state.personsMap)\r\n\r\n\r\n    if (nodeDetail._deceased === false) return 0;\r\n    else if (node._children.length === 0) return undefined;\r\n    else {\r\n      const possible_distances: Array<number> = [];\r\n      for (const child_id of node._children) {\r\n        const temp = this.surviving_successor_distance(NodeEntity.getNode(child_id, state.nodeMap), state);\r\n        if (temp != undefined) {\r\n          possible_distances.push(1 + temp);\r\n        }\r\n      }\r\n      if (possible_distances.length === 0) return undefined;\r\n      else return Math.min(...possible_distances);\r\n    }\r\n  };\r\n\r\n  get_class_and_distance_closest_surviving_relative = (testatorNode: NodeEntity, state: any): [\r\n    number | undefined,\r\n    number | undefined\r\n  ] => {\r\n    const distance = this.surviving_successor_distance(testatorNode, state);\r\n    if (distance !== undefined) return [1, distance];\r\n    else if (testatorNode._parents.length == 0) return [undefined, undefined];\r\n    else {\r\n      const alternatives: Array<Array<number | undefined>> = [];\r\n      for (const parent_id of testatorNode._parents) {\r\n        alternatives.push(\r\n          this.get_class_and_distance_closest_surviving_relative(NodeEntity.getNode(parent_id, state.nodeMap), state)\r\n        );\r\n      }\r\n\r\n      alternatives.sort((a, b) => {\r\n        if (a[0] != undefined && b[0] != undefined) return a[0] - b[0];\r\n        if (a[0] == undefined && b[0] != undefined) return 1;\r\n        return -1;\r\n      });\r\n      const [closest_alternative_class, closest_alternative_distance] =\r\n        alternatives[0];\r\n\r\n      if (closest_alternative_class == undefined) {\r\n        return [undefined, undefined];\r\n      }\r\n      return [closest_alternative_class + 1, closest_alternative_distance];\r\n    }\r\n  };\r\n  check = () => {\r\n    const self = this\r\n    if (this.isStarted) {\r\n      this.checkstate = setInterval(() => {\r\n        if (self.glb_state !== null) {\r\n          self.isStarted = false;\r\n          messageService.sendMessageFromChatbot({ detail: self.glb_state });\r\n          // close the interval\r\n          self.glb_state = null;\r\n          clearInterval(this.checkstate)\r\n        }\r\n      }, 200)\r\n    }\r\n  }\r\n  returnState = (state: any) => {\r\n    this.check();\r\n    this.glb_state = chartSelector(state);\r\n    return state;\r\n  }\r\n  handleValidation = (tempMessages: any) => {\r\n    this.setState((state: any) => {\r\n      if (tempMessages && tempMessages.length !== 0) {\r\n        state.messages = tempMessages;\r\n        return state;\r\n      }\r\n      return state;\r\n    })\r\n  }\r\n  resetChatbot = () => {\r\n    this.setState((state: any) => {\r\n      state = InitialChatbotState\r\n      console.log(InitialChatbotState);\r\n\r\n      return this.returnState(state);\r\n    });\r\n    const initialQuestion = this.createChatBotMessage(this.QuestionConsts.TestatorQuestion);\r\n    this.addMessageToBotState(initialQuestion)\r\n\r\n\r\n  }\r\n}\r\n\r\nexport default ActionProvider;","export default function chartSelector(state) {\r\n  return {\r\n    nodeMap: state.nodeMap,\r\n    personsMap: state.personsMap,\r\n    testator: state.testator,\r\n  };\r\n}\r\n\r\nexport function messageSelector(state) {\r\n  return {\r\n    messages: state.messages,\r\n  };\r\n}\r\n","class ChartNode {\r\n  id: string;\r\n  type: string;\r\n  data: NodeData;\r\n  position: { x: number; y: number };\r\n  xLevel: number;\r\n  draggable = false;\r\n  connectable = false;\r\n  constructor(\r\n    id: string,\r\n    type: string,\r\n    data: NodeData,\r\n    position: { x: number; y: number },\r\n    xLevel: number\r\n  ) {\r\n    this.id = id;\r\n    this.type = type;\r\n    this.data = data;\r\n    this.position = position;\r\n    this.xLevel = xLevel;\r\n  }\r\n}\r\nexport class NodeData {\r\n  label = \"\";\r\n  showDialog: boolean;\r\n  pos: {\r\n    left?: null | string;\r\n    right?: null | string;\r\n    top?: null | string;\r\n    bottom?: null | string;\r\n  };\r\n\r\n  constructor(label: string, data?: any) {\r\n    this.label = label;\r\n    this.pos = data;\r\n    this.showDialog = false;\r\n  }\r\n}\r\nexport default ChartNode;\r\n","class ChartConnector {\r\n  id: string;\r\n  type = \"smoothstep\";\r\n  source: string;\r\n  target: string;\r\n  label: string;\r\n  animated = false;\r\n  // arrowHeadType = \"arrowclosed\";\r\n  sourceHandle: string;\r\n  targetHandle: string;\r\n\r\n  constructor(\r\n    id: string,\r\n    type: string,\r\n    source: string,\r\n    target: string,\r\n    label: string,\r\n    sourceHandle = \"\",\r\n    targetHandle = \"\"\r\n  ) {\r\n    this.id = id;\r\n    this.type = type;\r\n    this.source = source;\r\n    this.target = target;\r\n    this.label = label;\r\n    this.sourceHandle = sourceHandle;\r\n    this.targetHandle = targetHandle;\r\n  }\r\n}\r\n\r\nexport default ChartConnector;\r\n","export class Bubble {\r\n  parent: number | undefined;\r\n  elements: Array<number>;\r\n  constructor(elements: Array<number>, parent?: number) {\r\n    this.elements = elements;\r\n    this.parent = parent;\r\n  }\r\n}\r\n","import { Subject, Subscription } from 'rxjs';\r\n\r\nconst chatBotDataSubject = new Subject();\r\nconst chatbotMessageSubscriptionList = new Array<Subscription>()\r\nexport const componentCommunicatorService = {\r\n\r\n    sendChatbotMessage: (message: any) => chatBotDataSubject.next(message),\r\n\r\n\r\n    getChatbotMessage: () => chatBotDataSubject.asObservable(),\r\n\r\n    addSubscription: (subscription: Subscription) => chatbotMessageSubscriptionList.push(subscription),\r\n\r\n\r\n    clearAllSubscription: () => {\r\n        chatbotMessageSubscriptionList.forEach((subscription: Subscription) => {\r\n            subscription.unsubscribe();\r\n        })\r\n    },\r\n\r\n\r\n};","import ReactFlow, { Background, BackgroundVariant, Controls } from \"react-flow-renderer\";\r\nimport { processData } from \"./ProcessDataForChart\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useZoomPanHelper, useUpdateNodeInternals } from \"react-flow-renderer\";\r\nimport CustomNode from \"./CustomNode\";\r\nimport ChartNode from \"./Classes/ChartNode\";\r\nimport ChartConnector from \"./Classes/ChartConnector\";\r\nimport { componentCommunicatorService } from \"../../ChatbotComponent/services/ComponentCommunicatorService\";\r\n\r\n\r\n// import { CustomDetailDialog } from \"./Classes/CustomDetailDialog\";\r\n\r\nconst flowStyles = { height: \"80vh\", width: \"60%\" };\r\nlet isHandleChange = true;\r\nconst OrgChartTree = () => {\r\n  // const result = useSelector(chartSelector);\r\n  const [result, setResult] = useState({ nodeMap: new Map(), personMap: new Map(), testator: null })\r\n  const [chartContent, setChartContent] = useState([]);\r\n  const componentWillUnmount = useRef(false)\r\n  const updateNodeInternals = useUpdateNodeInternals();\r\n\r\n  const getNodeData = () => chartContent.forEach((chartData: ChartNode | ChartConnector) => {\r\n    //\r\n    if (chartData instanceof ChartNode) {\r\n      updateNodeInternals(chartData.id)\r\n    }\r\n  })\r\n  useEffect(() => {\r\n    return () => {\r\n      componentWillUnmount.current = true\r\n    }\r\n  }, [])\r\n  useEffect(() => {\r\n    componentCommunicatorService.clearAllSubscription();\r\n    const subscription = componentCommunicatorService.getChatbotMessage().subscribe((data: any) => setResult(data))\r\n    componentCommunicatorService.addSubscription(subscription);\r\n    if (componentWillUnmount.current) {\r\n      componentCommunicatorService.clearAllSubscription();\r\n    }\r\n  }, [1])\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      getNodeData()\r\n    }, 500);\r\n\r\n  }, [chartContent]);\r\n  useEffect(() => {\r\n    setChartContent(processData(result))\r\n    isHandleChange = true;\r\n  }, [result])\r\n  const { fitView } = useZoomPanHelper();\r\n  const nodeTypes = {\r\n    specialNode: CustomNode,\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (isHandleChange) {\r\n      fitView();\r\n    }\r\n  });\r\n\r\n  // const onNodeMouseEnter = (event: any, node: any) => {\r\n  //   // setHoverNode(node);\r\n  //   console.log(event);\r\n\r\n  //   const dialog = new CustomDetailDialog(node, event.currentTarget, chartContent)\r\n  //   dialog.showDialog();\r\n  //   const newChartContent = [...chartContent]\r\n  //   setChartContent(newChartContent)\r\n  //   isHandleChange = false;\r\n  //   // getNodeData()\r\n  //   // setRerender(!rerender)\r\n  //   // highlightPath()\r\n\r\n  // }\r\n\r\n  // const onNodeMouseLeave = (event: any, node: any) => {\r\n  //   const dialog = new CustomDetailDialog(node, event.currentTarget, chartContent)\r\n  //   dialog.hideDialog();\r\n  //   const newChartContent = [...chartContent]\r\n  //   setChartContent(newChartContent)\r\n  //   isHandleChange = false;\r\n  //   // getNodeData()\r\n\r\n  //   // setRerender(!rerender)\r\n\r\n  // }\r\n\r\n\r\n  return (\r\n    <div id=\"ChartContainer\" style={{ height: \"100%\", paddingTop: \"3rem\" }}>\r\n      <ReactFlow\r\n        elements={chartContent}\r\n        style={flowStyles}\r\n        nodeTypes={nodeTypes}\r\n        nodesConnectable={false}\r\n        paneMoveable={false}\r\n        selectNodesOnDrag={false}\r\n        elementsSelectable={false}\r\n        nodesDraggable={false}\r\n      // onNodeMouseEnter={onNodeMouseEnter}\r\n      // onNodeMouseLeave={onNodeMouseLeave}\r\n      >\r\n        <Background variant={BackgroundVariant.Dots} gap={1} size={2} />\r\n        <Controls />\r\n\r\n      </ReactFlow>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrgChartTree;\r\n","export default __webpack_public_path__ + \"static/media/chat_button_logo.6fc97b77.svg\";","import { useEffect, useRef } from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { Chatbot } from \"react-chatbot-kit\";\r\nimport Config from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/Config.js\";\r\nimport MessageParser from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/MessageParser\";\r\nimport ActionProvider from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProvider\";\r\nimport OrgChartTree from \"../Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ChartComponent\";\r\nimport \"../Components/InheritanceCalculatorComponents/OtherComponent/ChatbotToggleButton/ChatbotToggleButton.scss\";\r\nimport botIcon from \"../assets/images/chat_button_logo.svg\";\r\nimport { ReactFlowProvider } from \"react-flow-renderer\";\r\nimport { messageService } from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/services/ChatbotCommunicator.tsx\";\r\nimport { componentCommunicatorService } from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/services/ComponentCommunicatorService.tsx\";\r\n\r\nconst InheritanceCalculatorPage = () => {\r\n  let prev = \"block\";\r\n  const componentWillUnmount = useRef(false);\r\n  useEffect(() => {\r\n    messageService.clearAllExternalSubscription();\r\n    const subscription = messageService\r\n      .getMessageOutChatbot()\r\n      .subscribe(({ detail }) => {\r\n        componentCommunicatorService.sendChatbotMessage(detail);\r\n        // dispatch({\r\n        //   type: \"UPDATE_GENERIC\",\r\n        //   payload: detail,\r\n        // });\r\n      });\r\n    messageService.addExternalSubscription(subscription);\r\n    setWarningDiv();\r\n    // setRevertDiv();\r\n    addListenerToChatInputField();\r\n  }, [1]);\r\n  // useEffect(() => {\r\n  //   return () => {\r\n  //     componentWillUnmount.current = true;\r\n  //   };\r\n  // }, []);\r\n  // useEffect(() => {\r\n  //   if (componentWillUnmount.current) {\r\n  //     messageService.clearAllExternalSubscription();\r\n  //     messageService.clearAllInternalSubscription();\r\n  //   }\r\n  // }, [1]);\r\n\r\n  // localStorage.setItem(\"isRevertListenerSet\", \"false\");\r\n  // document.removeEventListener(\"revert\");\r\n  const toggleBot = () => {\r\n    const divChatBot = document.getElementsByClassName(\r\n      \"react-chatbot-kit-chat-container\"\r\n    )[0];\r\n    if (prev === \"block\") {\r\n      divChatBot.style.display = \"none\";\r\n      prev = \"none\";\r\n    } else {\r\n      divChatBot.style.display = \"block\";\r\n      prev = \"block\";\r\n    }\r\n  };\r\n  return (\r\n    <div id=\"InheritanceCalculatorMain\" style={{ height: \"100%\" }}>\r\n      <Typography variant=\"h2\" align=\"center\">\r\n        Inheritance Calculator\r\n      </Typography>\r\n      <ReactFlowProvider>\r\n        <OrgChartTree />\r\n      </ReactFlowProvider>\r\n      {\r\n        <div className=\"chatbotContainer\">\r\n          <Chatbot\r\n            config={Config}\r\n            actionProvider={ActionProvider}\r\n            messageParser={MessageParser}\r\n          />\r\n        </div>\r\n      }\r\n      <button className=\"ChatbotToggleButton\" onClick={toggleBot}>\r\n        <img src={botIcon} />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\nconst setRevertDiv = () => {\r\n  const chatParentElement = document.getElementsByClassName(\r\n    \"react-chatbot-kit-chat-input-container\"\r\n  )[0];\r\n  if (!document.getElementById(\"revert-div\")) {\r\n    const chatContainer = document.getElementsByClassName(\r\n      \"react-chatbot-kit-chat-container\"\r\n    )[0];\r\n    chatContainer.id = \"chat_container\";\r\n    const newDiv = document.createElement(\"div\");\r\n    newDiv.id = \"revert-div\";\r\n    const revertButton = document.createElement(\"button\");\r\n    revertButton.innerText = \"Revert\";\r\n    newDiv.appendChild(revertButton);\r\n    chatParentElement.prepend(newDiv);\r\n    revertButton.addEventListener(\"click\", ({ event }) => {\r\n      messageService.sendMessageToChatbot(\"ON CLICK\");\r\n    });\r\n  }\r\n};\r\nconst setWarningDiv = () => {\r\n  // const chatParentElement = document.getElementsByClassName(\r\n  //   \"react-chatbot-kit-chat-container\"\r\n  // )[0];\r\n\r\n  const chatParentElement = document.getElementsByClassName(\r\n    \"react-chatbot-kit-chat-input-form\"\r\n  )[0];\r\n  const newDiv = document.createElement(\"div\");\r\n  newDiv.id = \"chatbot-warning-div\";\r\n  newDiv.innerHTML = \"warning\";\r\n  newDiv.style.backgroundColor = \"red\";\r\n  newDiv.style.position = \"absolute\";\r\n  newDiv.style.bottom = \"2.5rem\";\r\n  newDiv.style.width = \"100%\";\r\n  newDiv.style.display = \"none\";\r\n  chatParentElement.prepend(newDiv);\r\n};\r\n\r\nconst addListenerToChatInputField = () => {\r\n  const chatInputField = document.getElementsByClassName(\r\n    \"react-chatbot-kit-chat-input\"\r\n  )[0];\r\n  chatInputField.addEventListener(\"input\", () => {\r\n    const warningDiv = document.getElementById(\"chatbot-warning-div\");\r\n    if (warningDiv) {\r\n      if (warningDiv.style.display === \"block\") {\r\n        warningDiv.style.display = \"none\";\r\n      }\r\n    }\r\n  });\r\n};\r\nexport default InheritanceCalculatorPage;\r\n","import { ReactElement } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Link from \"@mui/material/Link\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\n// import LangButton from \"./LangButton/LangButton\";\r\n\r\ninterface propsTypes {\r\n  description: string;\r\n  title: string;\r\n}\r\n\r\nconst Copyright = (): ReactElement => {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright © \"}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Arvebot\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  footer: {\r\n    // backgroundColor: theme.palette.background.paper,\r\n    padding: useTheme().spacing(6),\r\n    backgroundColor: \"silver\"\r\n  },\r\n}));\r\n\r\nconst Footer = (props: propsTypes): ReactElement => {\r\n  const classes = useStyles();\r\n  const { description, title } = props;\r\n\r\n  return (\r\n    <Paper className={classes.footer}>\r\n      <Typography variant=\"h6\" align=\"center\" gutterBottom>\r\n        {title}\r\n      </Typography>\r\n      <Typography\r\n        variant=\"subtitle1\"\r\n        align=\"center\"\r\n        color=\"textSecondary\"\r\n        component=\"p\"\r\n      >\r\n        {description}\r\n      </Typography>\r\n      <Copyright />\r\n\r\n      {/* {Object.keys(props.langValue).map((lang) => (\r\n        <LangButton\r\n          key={lang}\r\n          langButtonValue={props.langValue[lang]}\r\n          sendDataToParent={props.sendDataToParent}\r\n        />\r\n      ))} */}\r\n    </Paper>\r\n  );\r\n};\r\n\r\nFooter.propTypes = {\r\n  description: PropTypes.string,\r\n  title: PropTypes.string,\r\n};\r\n\r\nexport default Footer;\r\n","import { ReactElement } from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\n\r\nconst ResourcesPage = (): ReactElement => {\r\n  return (\r\n    <Typography variant=\"h2\" align=\"center\">\r\n      ResourcesPage\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ResourcesPage;\r\n","import { ChatbotState } from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/Generics\";\r\n\r\nconst initialState = ChatbotState;\r\n\r\nconst genericReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"UPDATE_GENERIC\":\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default genericReducer;\r\n","import { createStore } from \"redux\";\r\nimport genericReducer from \"./genericReducer\";\r\n\r\nconst store = createStore(genericReducer);\r\nexport default store;\r\n","// React\r\nimport { ReactElement } from \"react\";\r\n// material-ui\r\nimport { Paper } from \"@mui/material\";\r\nimport { createTheme, ThemeProvider, StyledEngineProvider } from \"@mui/material/styles\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { useTheme } from \"@mui/material/styles\";\r\n// react-router\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { IntlProvider } from \"react-intl\";\r\n// local - check in newer chrome version and remove. added polyfill because nb locale not supported in chromium>92\r\n// https://github.com/formatjs/formatjs/issues/3066\r\nimport \"@formatjs/intl-datetimeformat/polyfill-force\";\r\nimport \"@formatjs/intl-datetimeformat/locale-data/nb\";\r\nimport \"@formatjs/intl-numberformat/polyfill-force\";\r\nimport \"@formatjs/intl-numberformat/locale-data/nb\";\r\nimport \"@formatjs/intl-numberformat/locale-data/en\";\r\n//\r\n// import theme from \"./theme\";\r\nimport Header from \"./Components/Generic/Header/Header\";\r\nimport HomePage from \"./Pages/HomePage\";\r\nimport AboutPage from \"./Pages/AboutPage\";\r\nimport InheritanceCalculatorPage from \"./Pages/InheritanceCalculatorPage.js\";\r\nimport Footer from \"./Components/Generic/Footer/Footer\";\r\n// import HomePageImage from \"./assets/images/homepage-image.jpg\";\r\nimport ResourcesPage from \"./Pages/ResourcesPage\";\r\n\r\nimport Norsk from \"./languages/translationNO.json\";\r\n// import English from \"./languages/translationEN.json\";\r\nimport store from './store/store'\r\nimport { Provider } from \"react-redux\";\r\n\r\nconst theme = createTheme();\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    // backgroundImage: `url(${HomePageImage})`,\r\n    // backgroundPosition: \"center\",\r\n    // backgroundSize: \"cover\",\r\n    // backgroundRepeat: \"no-repeat\",\r\n    height: \"100vh\",\r\n  },\r\n  rootPaper: {\r\n    marginTop: \"5rem\",\r\n    minHeight: \"100vh\",\r\n    background:\r\n      \"radial-gradient( circle farthest-corner at 10% 20%,  #FCCABD 0%, #4151C9 45.5% )\",\r\n    opacity: \"1\",\r\n  },\r\n});\r\n\r\nconst menuItems = (\r\n  <Switch>\r\n    <Route exact path=\"/\" component={HomePage} />\r\n    <Route path=\"/about\" component={AboutPage} />\r\n    <Route path=\"/calculator\" component={InheritanceCalculatorPage} />\r\n    <Route path=\"/resources\" component={ResourcesPage} />\r\n  </Switch>\r\n);\r\n\r\nconst App = (): ReactElement => {\r\n  const classes = useStyles();\r\n  const lang = \"nb-NO\";\r\n  const langMessages = Norsk;\r\n  // const [lang, setLang] = useState(\"nb-NO\");\r\n  // const [langMessages, setLangMessages] = useState(Norsk);\r\n  // const sendDataToParent = (index) => {\r\n  //   setLang(index.code);\r\n  //   if (index.code === \"nb-NO\") {\r\n  //     setLangMessages(Norsk);\r\n  //   } else {\r\n  //     setLangMessages(English);\r\n  //   }\r\n  // };\r\n\r\n  // const LangValue = {\r\n  //   no: {\r\n  //     code: \"nb-NO\",\r\n  //     name: \"Norsk\",\r\n  //   },\r\n  //   en: {\r\n  //     code: \"en-US\",\r\n  //     name: \"English\",\r\n  //   },\r\n  // };\r\n  return (\r\n\r\n    <StyledEngineProvider injectFirst>\r\n      <ThemeProvider theme={theme}>\r\n        <IntlProvider locale={lang} messages={langMessages}>\r\n\r\n          <Paper\r\n            role=\"img\"\r\n            // className={classes.root}\r\n            aria-label=\"Image by Free-Photos from Pixabay\"\r\n          >\r\n            <Header />\r\n            <Provider store={store}>\r\n              <Paper className={classes.rootPaper}>{menuItems}</Paper>\r\n            </Provider>\r\n          </Paper>\r\n          {/* <Footer langValue={LangValue} sendDataToParent={sendDataToParent} /> */}\r\n          <Footer description=\"Arvebot\" title=\"Arvebot\" />\r\n\r\n          {/* Route components are rendered if the path prop matches the current URL */}\r\n\r\n        </IntlProvider>\r\n      </ThemeProvider>\r\n    </StyledEngineProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\n// react-spring -> animations\r\n// nivo for visualisation\r\n// primary - 003049   , 264653 , 031d44\r\n// secondary - EAE2B7   ,e76f51 , d5896f\r\n","// import { StrictMode } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport \"./index.scss\";\r\n// import LogRocket from 'logrocket';\r\n// LogRocket.init('yx1kmd/arvebot_log');\r\n// LogRocket.identify('123456', {\r\n//   name: 'aman',\r\n// });\r\nimport App from \"./App\";\r\nimport { render } from \"react-dom\";\r\n\r\nrender(\r\n  // <StrictMode>\r\n  <Router>\r\n    <App />\r\n  </Router>,\r\n  // </StrictMode>,\r\n  document.getElementById(\"app\")\r\n);\r\n"],"sourceRoot":""}